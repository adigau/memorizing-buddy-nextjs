/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/index"],{

/***/ "./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css":
/*!******************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css ***!
  \******************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".Avatar_avatar__Bv9y3 {\\n  display: flex;\\n  place-content: center;\\n  position: relative;\\n  border: 4px solid #fff;\\n  border-radius: 9999px;\\n  width: 56px;\\n  height: 56px;\\n  background-color: #9ca3af;\\n  margin-left: -0.75rem;\\n}\\n\\n.Avatar_avatar__Bv9y3:before {\\n  content: attr(data-tooltip);\\n  position: absolute;\\n  bottom: 100%;\\n  opacity: 0;\\n  transition: opacity 0.15s ease;\\n  padding: 5px 10px;\\n  color: white;\\n  font-size: 0.75rem;\\n  border-radius: 8px;\\n  margin-bottom: 10px;\\n  z-index: 1;\\n  background: black;\\n  white-space: nowrap;\\n}\\n\\n.Avatar_avatar__Bv9y3:hover:before {\\n  opacity: 1;\\n}\\n\\n.Avatar_avatar_picture__vUWHS {\\n  border-radius: 9999px;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://components/Avatar.module.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,aAAa;EACb,qBAAqB;EACrB,kBAAkB;EAClB,sBAAsB;EACtB,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,yBAAyB;EACzB,qBAAqB;AACvB;;AAEA;EACE,2BAA2B;EAC3B,kBAAkB;EAClB,YAAY;EACZ,UAAU;EACV,8BAA8B;EAC9B,iBAAiB;EACjB,YAAY;EACZ,kBAAkB;EAClB,kBAAkB;EAClB,mBAAmB;EACnB,UAAU;EACV,iBAAiB;EACjB,mBAAmB;AACrB;;AAEA;EACE,UAAU;AACZ;;AAEA;EACE,qBAAqB;AACvB\",\"sourcesContent\":[\".avatar {\\n  display: flex;\\n  place-content: center;\\n  position: relative;\\n  border: 4px solid #fff;\\n  border-radius: 9999px;\\n  width: 56px;\\n  height: 56px;\\n  background-color: #9ca3af;\\n  margin-left: -0.75rem;\\n}\\n\\n.avatar:before {\\n  content: attr(data-tooltip);\\n  position: absolute;\\n  bottom: 100%;\\n  opacity: 0;\\n  transition: opacity 0.15s ease;\\n  padding: 5px 10px;\\n  color: white;\\n  font-size: 0.75rem;\\n  border-radius: 8px;\\n  margin-bottom: 10px;\\n  z-index: 1;\\n  background: black;\\n  white-space: nowrap;\\n}\\n\\n.avatar:hover:before {\\n  opacity: 1;\\n}\\n\\n.avatar_picture {\\n  border-radius: 9999px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"avatar\": \"Avatar_avatar__Bv9y3\",\n\t\"avatar_picture\": \"Avatar_avatar_picture__vUWHS\"\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9jc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMV0hLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzJdIS4vY29tcG9uZW50cy9BdmF0YXIubW9kdWxlLmNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGtDQUFrQyxtQkFBTyxDQUFDLG1LQUErRTtBQUN6SDtBQUNBO0FBQ0EsaUVBQWlFLGtCQUFrQiwwQkFBMEIsdUJBQXVCLDJCQUEyQiwwQkFBMEIsZ0JBQWdCLGlCQUFpQiw4QkFBOEIsMEJBQTBCLEdBQUcsa0NBQWtDLGdDQUFnQyx1QkFBdUIsaUJBQWlCLGVBQWUsbUNBQW1DLHNCQUFzQixpQkFBaUIsdUJBQXVCLHVCQUF1Qix3QkFBd0IsZUFBZSxzQkFBc0Isd0JBQXdCLEdBQUcsd0NBQXdDLGVBQWUsR0FBRyxtQ0FBbUMsMEJBQTBCLEdBQUcsT0FBTyw2RkFBNkYsVUFBVSxZQUFZLGFBQWEsYUFBYSxhQUFhLFdBQVcsVUFBVSxZQUFZLGFBQWEsT0FBTyxLQUFLLFlBQVksYUFBYSxXQUFXLFVBQVUsWUFBWSxhQUFhLFdBQVcsWUFBWSxhQUFhLGFBQWEsV0FBVyxZQUFZLGFBQWEsT0FBTyxLQUFLLFVBQVUsTUFBTSxLQUFLLFlBQVksbUNBQW1DLGtCQUFrQiwwQkFBMEIsdUJBQXVCLDJCQUEyQiwwQkFBMEIsZ0JBQWdCLGlCQUFpQiw4QkFBOEIsMEJBQTBCLEdBQUcsb0JBQW9CLGdDQUFnQyx1QkFBdUIsaUJBQWlCLGVBQWUsbUNBQW1DLHNCQUFzQixpQkFBaUIsdUJBQXVCLHVCQUF1Qix3QkFBd0IsZUFBZSxzQkFBc0Isd0JBQXdCLEdBQUcsMEJBQTBCLGVBQWUsR0FBRyxxQkFBcUIsMEJBQTBCLEdBQUcsbUJBQW1CO0FBQy94RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9BdmF0YXIubW9kdWxlLmNzcz84ZWE2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvcnVudGltZS9hcGkuanNcIik7XG52YXIgX19fQ1NTX0xPQURFUl9FWFBPUlRfX18gPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18odHJ1ZSk7XG4vLyBNb2R1bGVcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLnB1c2goW21vZHVsZS5pZCwgXCIuQXZhdGFyX2F2YXRhcl9fQnY5eTMge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIHBsYWNlLWNvbnRlbnQ6IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJvcmRlcjogNHB4IHNvbGlkICNmZmY7XFxuICBib3JkZXItcmFkaXVzOiA5OTk5cHg7XFxuICB3aWR0aDogNTZweDtcXG4gIGhlaWdodDogNTZweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM5Y2EzYWY7XFxuICBtYXJnaW4tbGVmdDogLTAuNzVyZW07XFxufVxcblxcbi5BdmF0YXJfYXZhdGFyX19Cdjl5MzpiZWZvcmUge1xcbiAgY29udGVudDogYXR0cihkYXRhLXRvb2x0aXApO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgYm90dG9tOiAxMDAlO1xcbiAgb3BhY2l0eTogMDtcXG4gIHRyYW5zaXRpb246IG9wYWNpdHkgMC4xNXMgZWFzZTtcXG4gIHBhZGRpbmc6IDVweCAxMHB4O1xcbiAgY29sb3I6IHdoaXRlO1xcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcXG4gIHotaW5kZXg6IDE7XFxuICBiYWNrZ3JvdW5kOiBibGFjaztcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxufVxcblxcbi5BdmF0YXJfYXZhdGFyX19Cdjl5Mzpob3ZlcjpiZWZvcmUge1xcbiAgb3BhY2l0eTogMTtcXG59XFxuXFxuLkF2YXRhcl9hdmF0YXJfcGljdHVyZV9fdlVXSFMge1xcbiAgYm9yZGVyLXJhZGl1czogOTk5OXB4O1xcbn1cIiwgXCJcIix7XCJ2ZXJzaW9uXCI6MyxcInNvdXJjZXNcIjpbXCJ3ZWJwYWNrOi8vY29tcG9uZW50cy9BdmF0YXIubW9kdWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLGFBQWE7RUFDYixxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLHNCQUFzQjtFQUN0QixxQkFBcUI7RUFDckIsV0FBVztFQUNYLFlBQVk7RUFDWix5QkFBeUI7RUFDekIscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsMkJBQTJCO0VBQzNCLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osVUFBVTtFQUNWLDhCQUE4QjtFQUM5QixpQkFBaUI7RUFDakIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixrQkFBa0I7RUFDbEIsbUJBQW1CO0VBQ25CLFVBQVU7RUFDVixpQkFBaUI7RUFDakIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UscUJBQXFCO0FBQ3ZCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIi5hdmF0YXIge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIHBsYWNlLWNvbnRlbnQ6IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJvcmRlcjogNHB4IHNvbGlkICNmZmY7XFxuICBib3JkZXItcmFkaXVzOiA5OTk5cHg7XFxuICB3aWR0aDogNTZweDtcXG4gIGhlaWdodDogNTZweDtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM5Y2EzYWY7XFxuICBtYXJnaW4tbGVmdDogLTAuNzVyZW07XFxufVxcblxcbi5hdmF0YXI6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6IGF0dHIoZGF0YS10b29sdGlwKTtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGJvdHRvbTogMTAwJTtcXG4gIG9wYWNpdHk6IDA7XFxuICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMTVzIGVhc2U7XFxuICBwYWRkaW5nOiA1cHggMTBweDtcXG4gIGNvbG9yOiB3aGl0ZTtcXG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcXG4gIGJvcmRlci1yYWRpdXM6IDhweDtcXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XFxuICB6LWluZGV4OiAxO1xcbiAgYmFja2dyb3VuZDogYmxhY2s7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG5cXG4uYXZhdGFyOmhvdmVyOmJlZm9yZSB7XFxuICBvcGFjaXR5OiAxO1xcbn1cXG5cXG4uYXZhdGFyX3BpY3R1cmUge1xcbiAgYm9yZGVyLXJhZGl1czogOTk5OXB4O1xcbn1cIl0sXCJzb3VyY2VSb290XCI6XCJcIn1dKTtcbi8vIEV4cG9ydHNcbl9fX0NTU19MT0FERVJfRVhQT1JUX19fLmxvY2FscyA9IHtcblx0XCJhdmF0YXJcIjogXCJBdmF0YXJfYXZhdGFyX19Cdjl5M1wiLFxuXHRcImF2YXRhcl9waWN0dXJlXCI6IFwiQXZhdGFyX2F2YXRhcl9waWN0dXJlX192VVdIU1wiXG59O1xubW9kdWxlLmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css\n");

/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css":
/*!****************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css ***!
  \****************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n\\n\\n.Line_line__kMdg5, .Line_highlightedLine__ocZFK{\\n\\n\\tlist-style: none outside none;\\n    margin-bottom: 15px;\\n}\\n\\n.Line_character__QbWS_{\\n    font-weight: bold;\\n    text-transform: uppercase;\\n}\\n\\n.Line_highlightedLine__ocZFK .Line_character__QbWS_{\\n    background-color: pink;\\n}\\n.Line_highlightedLine__ocZFK .Line_textShow__aI5hR{\\n    background-color: yellow;\\n}\\n\\n.Line_textShow__aI5hR, .Line_revealerShow__CO7rY\\n{\\n    display: inline;\\n}\\n\\n.Line_textHide__WaPD9, .Line_revealerHide___RC1A\\n{\\n    display:none;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://components/Line.module.css\"],\"names\":[],\"mappings\":\";;;AAGA;;CAEC,6BAA6B;IAC1B,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;AAC7B;;AAEA;IACI,sBAAsB;AAC1B;AACA;IACI,wBAAwB;AAC5B;;AAEA;;IAEI,eAAe;AACnB;;AAEA;;IAEI,YAAY;AAChB\",\"sourcesContent\":[\"\\n\\n\\n.line, .highlightedLine{\\n\\n\\tlist-style: none outside none;\\n    margin-bottom: 15px;\\n}\\n\\n.character{\\n    font-weight: bold;\\n    text-transform: uppercase;\\n}\\n\\n.highlightedLine .character{\\n    background-color: pink;\\n}\\n.highlightedLine .textShow{\\n    background-color: yellow;\\n}\\n\\n.textShow, .revealerShow\\n{\\n    display: inline;\\n}\\n\\n.textHide, .revealerHide\\n{\\n    display:none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"line\": \"Line_line__kMdg5\",\n\t\"highlightedLine\": \"Line_highlightedLine__ocZFK\",\n\t\"character\": \"Line_character__QbWS_\",\n\t\"textShow\": \"Line_textShow__aI5hR\",\n\t\"revealerShow\": \"Line_revealerShow__CO7rY\",\n\t\"textHide\": \"Line_textHide__WaPD9\",\n\t\"revealerHide\": \"Line_revealerHide___RC1A\"\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9jc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMV0hLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzJdIS4vY29tcG9uZW50cy9MaW5lLm1vZHVsZS5jc3MuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxrQ0FBa0MsbUJBQU8sQ0FBQyxtS0FBK0U7QUFDekg7QUFDQTtBQUNBLGdHQUFnRyxvQ0FBb0MsMEJBQTBCLEdBQUcsMkJBQTJCLHdCQUF3QixnQ0FBZ0MsR0FBRyx3REFBd0QsNkJBQTZCLEdBQUcscURBQXFELCtCQUErQixHQUFHLHVEQUF1RCxzQkFBc0IsR0FBRyx1REFBdUQsbUJBQW1CLEdBQUcsU0FBUyx5RkFBeUYsTUFBTSxZQUFZLGFBQWEsT0FBTyxLQUFLLFlBQVksYUFBYSxPQUFPLEtBQUssWUFBWSxNQUFNLEtBQUssWUFBWSxPQUFPLE1BQU0sVUFBVSxPQUFPLE1BQU0sVUFBVSx3REFBd0Qsb0NBQW9DLDBCQUEwQixHQUFHLGVBQWUsd0JBQXdCLGdDQUFnQyxHQUFHLGdDQUFnQyw2QkFBNkIsR0FBRyw2QkFBNkIsK0JBQStCLEdBQUcsK0JBQStCLHNCQUFzQixHQUFHLCtCQUErQixtQkFBbUIsR0FBRyxxQkFBcUI7QUFDMXdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9MaW5lLm1vZHVsZS5jc3M/ODBlYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnRzXG52YXIgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL2Nzcy1sb2FkZXIvc3JjL3J1bnRpbWUvYXBpLmpzXCIpO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKHRydWUpO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiXFxuXFxuXFxuLkxpbmVfbGluZV9fa01kZzUsIC5MaW5lX2hpZ2hsaWdodGVkTGluZV9fb2NaRkt7XFxuXFxuXFx0bGlzdC1zdHlsZTogbm9uZSBvdXRzaWRlIG5vbmU7XFxuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XFxufVxcblxcbi5MaW5lX2NoYXJhY3Rlcl9fUWJXU197XFxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xcbn1cXG5cXG4uTGluZV9oaWdobGlnaHRlZExpbmVfX29jWkZLIC5MaW5lX2NoYXJhY3Rlcl9fUWJXU197XFxuICAgIGJhY2tncm91bmQtY29sb3I6IHBpbms7XFxufVxcbi5MaW5lX2hpZ2hsaWdodGVkTGluZV9fb2NaRksgLkxpbmVfdGV4dFNob3dfX2FJNWhSe1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XFxufVxcblxcbi5MaW5lX3RleHRTaG93X19hSTVoUiwgLkxpbmVfcmV2ZWFsZXJTaG93X19DTzdyWVxcbntcXG4gICAgZGlzcGxheTogaW5saW5lO1xcbn1cXG5cXG4uTGluZV90ZXh0SGlkZV9fV2FQRDksIC5MaW5lX3JldmVhbGVySGlkZV9fX1JDMUFcXG57XFxuICAgIGRpc3BsYXk6bm9uZTtcXG59XFxuXCIsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovL2NvbXBvbmVudHMvTGluZS5tb2R1bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCI7OztBQUdBOztDQUVDLDZCQUE2QjtJQUMxQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxpQkFBaUI7SUFDakIseUJBQXlCO0FBQzdCOztBQUVBO0lBQ0ksc0JBQXNCO0FBQzFCO0FBQ0E7SUFDSSx3QkFBd0I7QUFDNUI7O0FBRUE7O0lBRUksZUFBZTtBQUNuQjs7QUFFQTs7SUFFSSxZQUFZO0FBQ2hCXCIsXCJzb3VyY2VzQ29udGVudFwiOltcIlxcblxcblxcbi5saW5lLCAuaGlnaGxpZ2h0ZWRMaW5le1xcblxcblxcdGxpc3Qtc3R5bGU6IG5vbmUgb3V0c2lkZSBub25lO1xcbiAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xcbn1cXG5cXG4uY2hhcmFjdGVye1xcbiAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTtcXG59XFxuXFxuLmhpZ2hsaWdodGVkTGluZSAuY2hhcmFjdGVye1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBwaW5rO1xcbn1cXG4uaGlnaGxpZ2h0ZWRMaW5lIC50ZXh0U2hvd3tcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogeWVsbG93O1xcbn1cXG5cXG4udGV4dFNob3csIC5yZXZlYWxlclNob3dcXG57XFxuICAgIGRpc3BsYXk6IGlubGluZTtcXG59XFxuXFxuLnRleHRIaWRlLCAucmV2ZWFsZXJIaWRlXFxue1xcbiAgICBkaXNwbGF5Om5vbmU7XFxufVxcblwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ubG9jYWxzID0ge1xuXHRcImxpbmVcIjogXCJMaW5lX2xpbmVfX2tNZGc1XCIsXG5cdFwiaGlnaGxpZ2h0ZWRMaW5lXCI6IFwiTGluZV9oaWdobGlnaHRlZExpbmVfX29jWkZLXCIsXG5cdFwiY2hhcmFjdGVyXCI6IFwiTGluZV9jaGFyYWN0ZXJfX1FiV1NfXCIsXG5cdFwidGV4dFNob3dcIjogXCJMaW5lX3RleHRTaG93X19hSTVoUlwiLFxuXHRcInJldmVhbGVyU2hvd1wiOiBcIkxpbmVfcmV2ZWFsZXJTaG93X19DTzdyWVwiLFxuXHRcInRleHRIaWRlXCI6IFwiTGluZV90ZXh0SGlkZV9fV2FQRDlcIixcblx0XCJyZXZlYWxlckhpZGVcIjogXCJMaW5lX3JldmVhbGVySGlkZV9fX1JDMUFcIlxufTtcbm1vZHVsZS5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css\n");

/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css":
/*!***************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css ***!
  \***************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("// Imports\nvar ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(true);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n\\n.MemorizingBuddy_fieldset__lk7W5 {\\n  border-width: 1px;\\n}\\n\\n.MemorizingBuddy_more__yiPb8 {\\n  border-width: 4px;\\n  border-radius: 9999px;\\n  border-color: white;\\n  background-color: #9ca3af;\\n  min-width: 56px;\\n  width: 56px;\\n  height: 56px;\\n  margin-left: -0.75rem;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  color: white;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://components/MemorizingBuddy.module.css\"],\"names\":[],\"mappings\":\";;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,iBAAiB;EACjB,qBAAqB;EACrB,mBAAmB;EACnB,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,YAAY;EACZ,qBAAqB;EACrB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd\",\"sourcesContent\":[\"\\n\\n.fieldset {\\n  border-width: 1px;\\n}\\n\\n.more {\\n  border-width: 4px;\\n  border-radius: 9999px;\\n  border-color: white;\\n  background-color: #9ca3af;\\n  min-width: 56px;\\n  width: 56px;\\n  height: 56px;\\n  margin-left: -0.75rem;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  color: white;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"fieldset\": \"MemorizingBuddy_fieldset__lk7W5\",\n\t\"more\": \"MemorizingBuddy_more__yiPb8\"\n};\nmodule.exports = ___CSS_LOADER_EXPORT___;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9jc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMV0hLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzJdIS4vY29tcG9uZW50cy9NZW1vcml6aW5nQnVkZHkubW9kdWxlLmNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBLGtDQUFrQyxtQkFBTyxDQUFDLG1LQUErRTtBQUN6SDtBQUNBO0FBQ0EsZ0ZBQWdGLHNCQUFzQixHQUFHLGtDQUFrQyxzQkFBc0IsMEJBQTBCLHdCQUF3Qiw4QkFBOEIsb0JBQW9CLGdCQUFnQixpQkFBaUIsMEJBQTBCLGtCQUFrQiw0QkFBNEIsd0JBQXdCLGlCQUFpQixHQUFHLE9BQU8sbUdBQW1HLEtBQUssWUFBWSxPQUFPLEtBQUssWUFBWSxhQUFhLGFBQWEsYUFBYSxXQUFXLFVBQVUsVUFBVSxZQUFZLFdBQVcsWUFBWSxhQUFhLFdBQVcsd0NBQXdDLHNCQUFzQixHQUFHLFdBQVcsc0JBQXNCLDBCQUEwQix3QkFBd0IsOEJBQThCLG9CQUFvQixnQkFBZ0IsaUJBQWlCLDBCQUEwQixrQkFBa0IsNEJBQTRCLHdCQUF3QixpQkFBaUIsR0FBRyxtQkFBbUI7QUFDNWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL01lbW9yaXppbmdCdWRkeS5tb2R1bGUuY3NzP2RlYTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xudmFyIF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9jc3MtbG9hZGVyL3NyYy9ydW50aW1lL2FwaS5qc1wiKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyh0cnVlKTtcbi8vIE1vZHVsZVxuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ucHVzaChbbW9kdWxlLmlkLCBcIlxcblxcbi5NZW1vcml6aW5nQnVkZHlfZmllbGRzZXRfX2xrN1c1IHtcXG4gIGJvcmRlci13aWR0aDogMXB4O1xcbn1cXG5cXG4uTWVtb3JpemluZ0J1ZGR5X21vcmVfX3lpUGI4IHtcXG4gIGJvcmRlci13aWR0aDogNHB4O1xcbiAgYm9yZGVyLXJhZGl1czogOTk5OXB4O1xcbiAgYm9yZGVyLWNvbG9yOiB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM5Y2EzYWY7XFxuICBtaW4td2lkdGg6IDU2cHg7XFxuICB3aWR0aDogNTZweDtcXG4gIGhlaWdodDogNTZweDtcXG4gIG1hcmdpbi1sZWZ0OiAtMC43NXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBjb2xvcjogd2hpdGU7XFxufVwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly9jb21wb25lbnRzL01lbW9yaXppbmdCdWRkeS5tb2R1bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCI7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxpQkFBaUI7RUFDakIscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQix5QkFBeUI7RUFDekIsZUFBZTtFQUNmLFdBQVc7RUFDWCxZQUFZO0VBQ1oscUJBQXFCO0VBQ3JCLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLFlBQVk7QUFDZFwiLFwic291cmNlc0NvbnRlbnRcIjpbXCJcXG5cXG4uZmllbGRzZXQge1xcbiAgYm9yZGVyLXdpZHRoOiAxcHg7XFxufVxcblxcbi5tb3JlIHtcXG4gIGJvcmRlci13aWR0aDogNHB4O1xcbiAgYm9yZGVyLXJhZGl1czogOTk5OXB4O1xcbiAgYm9yZGVyLWNvbG9yOiB3aGl0ZTtcXG4gIGJhY2tncm91bmQtY29sb3I6ICM5Y2EzYWY7XFxuICBtaW4td2lkdGg6IDU2cHg7XFxuICB3aWR0aDogNTZweDtcXG4gIGhlaWdodDogNTZweDtcXG4gIG1hcmdpbi1sZWZ0OiAtMC43NXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBjb2xvcjogd2hpdGU7XFxufVwiXSxcInNvdXJjZVJvb3RcIjpcIlwifV0pO1xuLy8gRXhwb3J0c1xuX19fQ1NTX0xPQURFUl9FWFBPUlRfX18ubG9jYWxzID0ge1xuXHRcImZpZWxkc2V0XCI6IFwiTWVtb3JpemluZ0J1ZGR5X2ZpZWxkc2V0X19sazdXNVwiLFxuXHRcIm1vcmVcIjogXCJNZW1vcml6aW5nQnVkZHlfbW9yZV9feWlQYjhcIlxufTtcbm1vZHVsZS5leHBvcnRzID0gX19fQ1NTX0xPQURFUl9FWFBPUlRfX187XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css\n");

/***/ }),

/***/ "./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fadriengaudon%2FDocuments%2FDEV%2Fmemorizing-buddy-nextjs%2Fpages%2Findex.tsx&page=%2F!":
/*!*****************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fadriengaudon%2FDocuments%2FDEV%2Fmemorizing-buddy-nextjs%2Fpages%2Findex.tsx&page=%2F! ***!
  \*****************************************************************************************************************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return __webpack_require__(/*! ./pages/index.tsx */ \"./pages/index.tsx\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWNsaWVudC1wYWdlcy1sb2FkZXIuanM/YWJzb2x1dGVQYWdlUGF0aD0lMkZVc2VycyUyRmFkcmllbmdhdWRvbiUyRkRvY3VtZW50cyUyRkRFViUyRm1lbW9yaXppbmctYnVkZHktbmV4dGpzJTJGcGFnZXMlMkZpbmRleC50c3gmcGFnZT0lMkYhLmpzIiwibWFwcGluZ3MiOiI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1CQUFPLENBQUMsNENBQW1CO0FBQzFDO0FBQ0E7QUFDQSxPQUFPLElBQVU7QUFDakIsTUFBTSxVQUFVO0FBQ2hCO0FBQ0EsT0FBTztBQUNQO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLz82YzkyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuICAgICh3aW5kb3cuX19ORVhUX1AgPSB3aW5kb3cuX19ORVhUX1AgfHwgW10pLnB1c2goW1xuICAgICAgXCIvXCIsXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZXF1aXJlKFwiLi9wYWdlcy9pbmRleC50c3hcIik7XG4gICAgICB9XG4gICAgXSk7XG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93Ll9fTkVYVF9QLnB1c2goW1wiL1wiXSlcbiAgICAgIH0pO1xuICAgIH1cbiAgIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fadriengaudon%2FDocuments%2FDEV%2Fmemorizing-buddy-nextjs%2Fpages%2Findex.tsx&page=%2F!\n");

/***/ }),

/***/ "./components/Avatar.module.css":
/*!**************************************!*\
  !*** ./components/Avatar.module.css ***!
  \**************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! !../node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Avatar.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(element) {\n                // These elements should always exist. If they do not,\n                // this code should fail.\n                var anchorElement = document.querySelector('#__next_css__DO_NOT_USE__');\n                var parentNode = anchorElement.parentNode// Normally <head>\n                ;\n                // Each style tag should be placed right before our\n                // anchor. By inserting before and not after, we do not\n                // need to track the last inserted element.\n                parentNode.insertBefore(element, anchorElement);\n            };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (true) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n    if (!a && b || a && !b) {\n        return false;\n    }\n    let p;\n    for(p in a){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (a[p] !== b[p]) {\n            return false;\n        }\n    }\n    for(p in b){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (!a[p]) {\n            return false;\n        }\n    }\n    return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      /*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Avatar.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css\",\n      function () {\n        content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Avatar.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Avatar.module.css\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0F2YXRhci5tb2R1bGUuY3NzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyxvTkFBd0c7QUFDMUgsMEJBQTBCLG1CQUFPLENBQUMsdWZBQXFQOztBQUV2Ujs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7QUFHQSxJQUFJLElBQVU7QUFDZCx5QkFBeUIsVUFBVTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSSxpQkFBaUI7QUFDckIsTUFBTSx1ZkFBcVA7QUFDM1A7QUFDQSxrQkFBa0IsbUJBQU8sQ0FBQyx1ZkFBcVA7O0FBRS9ROztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixVQUFVOztBQUUxQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUUsVUFBVTtBQUNaO0FBQ0EsR0FBRztBQUNIOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvQXZhdGFyLm1vZHVsZS5jc3M/NGI5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXN0eWxlLWxvYWRlci9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9BdmF0YXIubW9kdWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVzZSBlbGVtZW50cyBzaG91bGQgYWx3YXlzIGV4aXN0LiBJZiB0aGV5IGRvIG5vdCxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNvZGUgc2hvdWxkIGZhaWwuXG4gICAgICAgICAgICAgICAgdmFyIGFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjX19uZXh0X2Nzc19fRE9fTk9UX1VTRV9fJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBhbmNob3JFbGVtZW50LnBhcmVudE5vZGUvLyBOb3JtYWxseSA8aGVhZD5cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgLy8gRWFjaCBzdHlsZSB0YWcgc2hvdWxkIGJlIHBsYWNlZCByaWdodCBiZWZvcmUgb3VyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yLiBCeSBpbnNlcnRpbmcgYmVmb3JlIGFuZCBub3QgYWZ0ZXIsIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gdHJhY2sgdGhlIGxhc3QgaW5zZXJ0ZWQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBhbmNob3JFbGVtZW50KTtcbiAgICAgICAgICAgIH07XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cbmlmIChtb2R1bGUuaG90KSB7XG4gIGlmICghY29udGVudC5sb2NhbHMgfHwgbW9kdWxlLmhvdC5pbnZhbGlkYXRlKSB7XG4gICAgdmFyIGlzRXF1YWxMb2NhbHMgPSBmdW5jdGlvbiBpc0VxdWFsTG9jYWxzKGEsIGIsIGlzTmFtZWRFeHBvcnQpIHtcbiAgICBpZiAoIWEgJiYgYiB8fCBhICYmICFiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHA7XG4gICAgZm9yKHAgaW4gYSl7XG4gICAgICAgIGlmIChpc05hbWVkRXhwb3J0ICYmIHAgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFbcF0gIT09IGJbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IocCBpbiBiKXtcbiAgICAgICAgaWYgKGlzTmFtZWRFeHBvcnQgJiYgcCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4gICAgdmFyIG9sZExvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoXG4gICAgICBcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9BdmF0YXIubW9kdWxlLmNzc1wiLFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9BdmF0YXIubW9kdWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFpc0VxdWFsTG9jYWxzKG9sZExvY2FscywgY29udGVudC5sb2NhbHMpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmhvdC5pbnZhbGlkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvbGRMb2NhbHMgPSBjb250ZW50LmxvY2FscztcblxuICAgICAgICAgICAgICB1cGRhdGUoY29udGVudCk7XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkge1xuICAgIHVwZGF0ZSgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Avatar.module.css\n");

/***/ }),

/***/ "./components/Line.module.css":
/*!************************************!*\
  !*** ./components/Line.module.css ***!
  \************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! !../node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Line.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(element) {\n                // These elements should always exist. If they do not,\n                // this code should fail.\n                var anchorElement = document.querySelector('#__next_css__DO_NOT_USE__');\n                var parentNode = anchorElement.parentNode// Normally <head>\n                ;\n                // Each style tag should be placed right before our\n                // anchor. By inserting before and not after, we do not\n                // need to track the last inserted element.\n                parentNode.insertBefore(element, anchorElement);\n            };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (true) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n    if (!a && b || a && !b) {\n        return false;\n    }\n    let p;\n    for(p in a){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (a[p] !== b[p]) {\n            return false;\n        }\n    }\n    for(p in b){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (!a[p]) {\n            return false;\n        }\n    }\n    return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      /*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Line.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css\",\n      function () {\n        content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Line.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/Line.module.css\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xpbmUubW9kdWxlLmNzcy5qcyIsIm1hcHBpbmdzIjoiQUFBQSxVQUFVLG1CQUFPLENBQUMsb05BQXdHO0FBQzFILDBCQUEwQixtQkFBTyxDQUFDLG1mQUFtUDs7QUFFclI7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EsSUFBSSxJQUFVO0FBQ2QseUJBQXlCLFVBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksaUJBQWlCO0FBQ3JCLE1BQU0sbWZBQW1QO0FBQ3pQO0FBQ0Esa0JBQWtCLG1CQUFPLENBQUMsbWZBQW1QOztBQUU3UTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsVUFBVTs7QUFFMUI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFLFVBQVU7QUFDWjtBQUNBLEdBQUc7QUFDSDs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0xpbmUubW9kdWxlLmNzcz9hNjE4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtc3R5bGUtbG9hZGVyL3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9jc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMV0hLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLm9uZU9mWzRdLnVzZVsyXSEuL0xpbmUubW9kdWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVzZSBlbGVtZW50cyBzaG91bGQgYWx3YXlzIGV4aXN0LiBJZiB0aGV5IGRvIG5vdCxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNvZGUgc2hvdWxkIGZhaWwuXG4gICAgICAgICAgICAgICAgdmFyIGFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjX19uZXh0X2Nzc19fRE9fTk9UX1VTRV9fJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBhbmNob3JFbGVtZW50LnBhcmVudE5vZGUvLyBOb3JtYWxseSA8aGVhZD5cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgLy8gRWFjaCBzdHlsZSB0YWcgc2hvdWxkIGJlIHBsYWNlZCByaWdodCBiZWZvcmUgb3VyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yLiBCeSBpbnNlcnRpbmcgYmVmb3JlIGFuZCBub3QgYWZ0ZXIsIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gdHJhY2sgdGhlIGxhc3QgaW5zZXJ0ZWQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBhbmNob3JFbGVtZW50KTtcbiAgICAgICAgICAgIH07XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cbmlmIChtb2R1bGUuaG90KSB7XG4gIGlmICghY29udGVudC5sb2NhbHMgfHwgbW9kdWxlLmhvdC5pbnZhbGlkYXRlKSB7XG4gICAgdmFyIGlzRXF1YWxMb2NhbHMgPSBmdW5jdGlvbiBpc0VxdWFsTG9jYWxzKGEsIGIsIGlzTmFtZWRFeHBvcnQpIHtcbiAgICBpZiAoIWEgJiYgYiB8fCBhICYmICFiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHA7XG4gICAgZm9yKHAgaW4gYSl7XG4gICAgICAgIGlmIChpc05hbWVkRXhwb3J0ICYmIHAgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFbcF0gIT09IGJbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IocCBpbiBiKXtcbiAgICAgICAgaWYgKGlzTmFtZWRFeHBvcnQgJiYgcCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4gICAgdmFyIG9sZExvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoXG4gICAgICBcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9MaW5lLm1vZHVsZS5jc3NcIixcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL2Nzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9ydWxlU2V0WzFdLnJ1bGVzWzNdLm9uZU9mWzRdLnVzZVsxXSEuLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzJdIS4vTGluZS5tb2R1bGUuY3NzXCIpO1xuXG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoIWlzRXF1YWxMb2NhbHMob2xkTG9jYWxzLCBjb250ZW50LmxvY2FscykpIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUuaG90LmludmFsaWRhdGUoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIG9sZExvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG4gICAgICAgICAgICAgIHVwZGF0ZShjb250ZW50KTtcbiAgICAgIH1cbiAgICApXG4gIH1cblxuICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7XG4gICAgdXBkYXRlKCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Line.module.css\n");

/***/ }),

/***/ "./components/MemorizingBuddy.module.css":
/*!***********************************************!*\
  !*** ./components/MemorizingBuddy.module.css ***!
  \***********************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! !../node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/next/dist/build/webpack/loaders/next-style-loader/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./MemorizingBuddy.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function(element) {\n                // These elements should always exist. If they do not,\n                // this code should fail.\n                var anchorElement = document.querySelector('#__next_css__DO_NOT_USE__');\n                var parentNode = anchorElement.parentNode// Normally <head>\n                ;\n                // Each style tag should be placed right before our\n                // anchor. By inserting before and not after, we do not\n                // need to track the last inserted element.\n                parentNode.insertBefore(element, anchorElement);\n            };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\nif (true) {\n  if (!content.locals || module.hot.invalidate) {\n    var isEqualLocals = function isEqualLocals(a, b, isNamedExport) {\n    if (!a && b || a && !b) {\n        return false;\n    }\n    let p;\n    for(p in a){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (a[p] !== b[p]) {\n            return false;\n        }\n    }\n    for(p in b){\n        if (isNamedExport && p === 'default') {\n            continue;\n        }\n        if (!a[p]) {\n            return false;\n        }\n    }\n    return true;\n};\n    var oldLocals = content.locals;\n\n    module.hot.accept(\n      /*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./MemorizingBuddy.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css\",\n      function () {\n        content = __webpack_require__(/*! !!../node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!../node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./MemorizingBuddy.module.css */ \"./node_modules/next/dist/build/webpack/loaders/css-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[1]!./node_modules/next/dist/build/webpack/loaders/postcss-loader/src/index.js??ruleSet[1].rules[3].oneOf[4].use[2]!./components/MemorizingBuddy.module.css\");\n\n              content = content.__esModule ? content.default : content;\n\n              if (typeof content === 'string') {\n                content = [[module.id, content, '']];\n              }\n\n              if (!isEqualLocals(oldLocals, content.locals)) {\n                module.hot.invalidate();\n\n                return;\n              }\n\n              oldLocals = content.locals;\n\n              update(content);\n      }\n    )\n  }\n\n  module.hot.dispose(function() {\n    update();\n  });\n}\n\nmodule.exports = content.locals || {};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL01lbW9yaXppbmdCdWRkeS5tb2R1bGUuY3NzLmpzIiwibWFwcGluZ3MiOiJBQUFBLFVBQVUsbUJBQU8sQ0FBQyxvTkFBd0c7QUFDMUgsMEJBQTBCLG1CQUFPLENBQUMseWdCQUE4UDs7QUFFaFM7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EsSUFBSSxJQUFVO0FBQ2QseUJBQXlCLFVBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUksaUJBQWlCO0FBQ3JCLE1BQU0seWdCQUE4UDtBQUNwUTtBQUNBLGtCQUFrQixtQkFBTyxDQUFDLHlnQkFBOFA7O0FBRXhSOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixVQUFVOztBQUUxQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUUsVUFBVTtBQUNaO0FBQ0EsR0FBRztBQUNIOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvTWVtb3JpemluZ0J1ZGR5Lm1vZHVsZS5jc3M/OTQwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXN0eWxlLWxvYWRlci9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9NZW1vcml6aW5nQnVkZHkubW9kdWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVzZSBlbGVtZW50cyBzaG91bGQgYWx3YXlzIGV4aXN0LiBJZiB0aGV5IGRvIG5vdCxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNvZGUgc2hvdWxkIGZhaWwuXG4gICAgICAgICAgICAgICAgdmFyIGFuY2hvckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjX19uZXh0X2Nzc19fRE9fTk9UX1VTRV9fJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBhbmNob3JFbGVtZW50LnBhcmVudE5vZGUvLyBOb3JtYWxseSA8aGVhZD5cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgLy8gRWFjaCBzdHlsZSB0YWcgc2hvdWxkIGJlIHBsYWNlZCByaWdodCBiZWZvcmUgb3VyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yLiBCeSBpbnNlcnRpbmcgYmVmb3JlIGFuZCBub3QgYWZ0ZXIsIHdlIGRvIG5vdFxuICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gdHJhY2sgdGhlIGxhc3QgaW5zZXJ0ZWQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCBhbmNob3JFbGVtZW50KTtcbiAgICAgICAgICAgIH07XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gYXBpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cbmlmIChtb2R1bGUuaG90KSB7XG4gIGlmICghY29udGVudC5sb2NhbHMgfHwgbW9kdWxlLmhvdC5pbnZhbGlkYXRlKSB7XG4gICAgdmFyIGlzRXF1YWxMb2NhbHMgPSBmdW5jdGlvbiBpc0VxdWFsTG9jYWxzKGEsIGIsIGlzTmFtZWRFeHBvcnQpIHtcbiAgICBpZiAoIWEgJiYgYiB8fCBhICYmICFiKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGV0IHA7XG4gICAgZm9yKHAgaW4gYSl7XG4gICAgICAgIGlmIChpc05hbWVkRXhwb3J0ICYmIHAgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFbcF0gIT09IGJbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IocCBpbiBiKXtcbiAgICAgICAgaWYgKGlzTmFtZWRFeHBvcnQgJiYgcCA9PT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFbcF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG4gICAgdmFyIG9sZExvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoXG4gICAgICBcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9NZW1vcml6aW5nQnVkZHkubW9kdWxlLmNzc1wiLFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvY3NzLWxvYWRlci9zcmMvaW5kZXguanM/P3J1bGVTZXRbMV0ucnVsZXNbM10ub25lT2ZbNF0udXNlWzFdIS4uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cnVsZVNldFsxXS5ydWxlc1szXS5vbmVPZls0XS51c2VbMl0hLi9NZW1vcml6aW5nQnVkZHkubW9kdWxlLmNzc1wiKTtcblxuICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5fX2VzTW9kdWxlID8gY29udGVudC5kZWZhdWx0IDogY29udGVudDtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKCFpc0VxdWFsTG9jYWxzKG9sZExvY2FscywgY29udGVudC5sb2NhbHMpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLmhvdC5pbnZhbGlkYXRlKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvbGRMb2NhbHMgPSBjb250ZW50LmxvY2FscztcblxuICAgICAgICAgICAgICB1cGRhdGUoY29udGVudCk7XG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkge1xuICAgIHVwZGF0ZSgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscyB8fCB7fTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/MemorizingBuddy.module.css\n");

/***/ }),

/***/ "./components/Avatar.js":
/*!******************************!*\
  !*** ./components/Avatar.js ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Avatar\": function() { return /* binding */ Avatar; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Avatar_module_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Avatar.module.css */ \"./components/Avatar.module.css\");\n/* harmony import */ var _Avatar_module_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_Avatar_module_css__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n/**\n * This file shows how to add live avatars like you can see them at the top right of a Google Doc or a Figma file.\n * https://liveblocks.io/docs/examples/live-avatars\n *\n * The users picture and name are not set via the `useMyPresence` hook like the cursors.\n * They are set from the authentication endpoint.\n *\n * See pages/api/auth.ts and https://liveblocks.io/docs/api-reference/liveblocks-node#authorize for more information\n */ var IMAGE_SIZE = 48;\nfunction Avatar(param) {\n    var picture = param.picture, name = param.name;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (_Avatar_module_css__WEBPACK_IMPORTED_MODULE_2___default().avatar),\n        \"data-tooltip\": name,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n            src: picture,\n            height: IMAGE_SIZE,\n            width: IMAGE_SIZE,\n            className: (_Avatar_module_css__WEBPACK_IMPORTED_MODULE_2___default().avatar_picture)\n        }, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Avatar.js\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Avatar.js\",\n        lineNumber: 18,\n        columnNumber: 5\n    }, this);\n}\n_c = Avatar;\nvar _c;\n$RefreshReg$(_c, \"Avatar\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0F2YXRhci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFBMEI7QUFDZTtBQUV6Qzs7Ozs7Ozs7R0FRRyxDQUVILElBQU1FLFVBQVUsR0FBRyxFQUFFO0FBRWQsU0FBU0MsTUFBTSxDQUFDLEtBQWlCLEVBQUU7UUFBakJDLE9BQU8sR0FBVCxLQUFpQixDQUFmQSxPQUFPLEVBQUVDLElBQUksR0FBZixLQUFpQixDQUFOQSxJQUFJO0lBQ3BDLHFCQUNFLDhEQUFDQyxLQUFHO1FBQUNDLFNBQVMsRUFBRU4sa0VBQWE7UUFBRVEsY0FBWSxFQUFFSixJQUFJO2tCQUMvQyw0RUFBQ0ssS0FBRztZQUNGQyxHQUFHLEVBQUVQLE9BQU87WUFDWlEsTUFBTSxFQUFFVixVQUFVO1lBQ2xCVyxLQUFLLEVBQUVYLFVBQVU7WUFDakJLLFNBQVMsRUFBRU4sMEVBQXFCOzs7OztnQkFDaEM7Ozs7O1lBQ0UsQ0FDTjtDQUNIO0FBWGVFLEtBQUFBLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9BdmF0YXIuanM/NmYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL0F2YXRhci5tb2R1bGUuY3NzXCI7XG5cbi8qKlxuICogVGhpcyBmaWxlIHNob3dzIGhvdyB0byBhZGQgbGl2ZSBhdmF0YXJzIGxpa2UgeW91IGNhbiBzZWUgdGhlbSBhdCB0aGUgdG9wIHJpZ2h0IG9mIGEgR29vZ2xlIERvYyBvciBhIEZpZ21hIGZpbGUuXG4gKiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9leGFtcGxlcy9saXZlLWF2YXRhcnNcbiAqXG4gKiBUaGUgdXNlcnMgcGljdHVyZSBhbmQgbmFtZSBhcmUgbm90IHNldCB2aWEgdGhlIGB1c2VNeVByZXNlbmNlYCBob29rIGxpa2UgdGhlIGN1cnNvcnMuXG4gKiBUaGV5IGFyZSBzZXQgZnJvbSB0aGUgYXV0aGVudGljYXRpb24gZW5kcG9pbnQuXG4gKlxuICogU2VlIHBhZ2VzL2FwaS9hdXRoLnRzIGFuZCBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3Mtbm9kZSNhdXRob3JpemUgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAqL1xuXG5jb25zdCBJTUFHRV9TSVpFID0gNDg7XG5cbmV4cG9ydCBmdW5jdGlvbiBBdmF0YXIoeyBwaWN0dXJlLCBuYW1lIH0pIHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17c3R5bGVzLmF2YXRhcn0gZGF0YS10b29sdGlwPXtuYW1lfT5cbiAgICAgIDxpbWdcbiAgICAgICAgc3JjPXtwaWN0dXJlfVxuICAgICAgICBoZWlnaHQ9e0lNQUdFX1NJWkV9XG4gICAgICAgIHdpZHRoPXtJTUFHRV9TSVpFfVxuICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5hdmF0YXJfcGljdHVyZX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJzdHlsZXMiLCJJTUFHRV9TSVpFIiwiQXZhdGFyIiwicGljdHVyZSIsIm5hbWUiLCJkaXYiLCJjbGFzc05hbWUiLCJhdmF0YXIiLCJkYXRhLXRvb2x0aXAiLCJpbWciLCJzcmMiLCJoZWlnaHQiLCJ3aWR0aCIsImF2YXRhcl9waWN0dXJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Avatar.js\n");

/***/ }),

/***/ "./components/Cursor.js":
/*!******************************!*\
  !*** ./components/Cursor.js ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Cursor; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Cursor(param) {\n    var color = param.color, x = param.x, y = param.y;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n        style: {\n            position: \"absolute\",\n            left: 0,\n            top: 0,\n            transition: \"transform 120ms linear\",\n            transform: \"translateX(\".concat(x, \"px) translateY(\").concat(y, \"px)\")\n        },\n        width: \"24\",\n        height: \"36\",\n        viewBox: \"0 0 24 36\",\n        fill: \"none\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n            d: \"M5.65376 12.3673H5.46026L5.31717 12.4976L0.500002 16.8829L0.500002 1.19841L11.7841 12.3673H5.65376Z\",\n            fill: color\n        }, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Cursor.js\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Cursor.js\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n};\n_c = Cursor;\nvar _c;\n$RefreshReg$(_c, \"Cursor\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0N1cnNvci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQTBCO0FBRVgsU0FBU0MsTUFBTSxDQUFDLEtBQWUsRUFBRTtRQUFmQyxLQUFLLEdBQVAsS0FBZSxDQUFiQSxLQUFLLEVBQUVDLENBQUMsR0FBVixLQUFlLENBQU5BLENBQUMsRUFBRUMsQ0FBQyxHQUFiLEtBQWUsQ0FBSEEsQ0FBQztJQUMxQyxxQkFDRSw4REFBQ0MsS0FBRztRQUNGQyxLQUFLLEVBQUU7WUFDTEMsUUFBUSxFQUFFLFVBQVU7WUFDcEJDLElBQUksRUFBRSxDQUFDO1lBQ1BDLEdBQUcsRUFBRSxDQUFDO1lBQ05DLFVBQVUsRUFBRSx3QkFBd0I7WUFDcENDLFNBQVMsRUFBRSxhQUFZLENBQXFCUCxNQUFDLENBQXBCRCxDQUFDLEVBQUMsaUJBQWUsQ0FBSSxPQUFHLENBQUxDLENBQUMsRUFBQyxLQUFHLENBQUM7U0FDbkQ7UUFDRFEsS0FBSyxFQUFDLElBQUk7UUFDVkMsTUFBTSxFQUFDLElBQUk7UUFDWEMsT0FBTyxFQUFDLFdBQVc7UUFDbkJDLElBQUksRUFBQyxNQUFNO1FBQ1hDLEtBQUssRUFBQyw0QkFBNEI7a0JBRWxDLDRFQUFDQyxNQUFJO1lBQ0hDLENBQUMsRUFBQyxxR0FBcUc7WUFDdkdILElBQUksRUFBRWIsS0FBSzs7Ozs7Z0JBQ1g7Ozs7O1lBQ0UsQ0FDTjtDQUNIO0FBdEJ1QkQsS0FBQUEsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0N1cnNvci5qcz9mNzVlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3Vyc29yKHsgY29sb3IsIHgsIHkgfSkge1xuICByZXR1cm4gKFxuICAgIDxzdmdcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgdHJhbnNpdGlvbjogXCJ0cmFuc2Zvcm0gMTIwbXMgbGluZWFyXCIsXG4gICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVgoJHt4fXB4KSB0cmFuc2xhdGVZKCR7eX1weClgLFxuICAgICAgfX1cbiAgICAgIHdpZHRoPVwiMjRcIlxuICAgICAgaGVpZ2h0PVwiMzZcIlxuICAgICAgdmlld0JveD1cIjAgMCAyNCAzNlwiXG4gICAgICBmaWxsPVwibm9uZVwiXG4gICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICA+XG4gICAgICA8cGF0aFxuICAgICAgICBkPVwiTTUuNjUzNzYgMTIuMzY3M0g1LjQ2MDI2TDUuMzE3MTcgMTIuNDk3NkwwLjUwMDAwMiAxNi44ODI5TDAuNTAwMDAyIDEuMTk4NDFMMTEuNzg0MSAxMi4zNjczSDUuNjUzNzZaXCJcbiAgICAgICAgZmlsbD17Y29sb3J9XG4gICAgICAvPlxuICAgIDwvc3ZnPlxuICApO1xufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwiQ3Vyc29yIiwiY29sb3IiLCJ4IiwieSIsInN2ZyIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwidG9wIiwidHJhbnNpdGlvbiIsInRyYW5zZm9ybSIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJ4bWxucyIsInBhdGgiLCJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/Cursor.js\n");

/***/ }),

/***/ "./components/Line.js":
/*!****************************!*\
  !*** ./components/Line.js ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Line; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _Line_module_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Line.module.css */ \"./components/Line.module.css\");\n/* harmony import */ var _Line_module_css__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_Line_module_css__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction Line(props) {\n    var handleRevealerButtonClick = function(event) {\n        null;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n        className: props.isHighlighted ? (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().highlightedLine) : (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().line),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().character),\n                children: props.displayName\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                lineNumber: 11,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: \": \"\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                lineNumber: 12,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: props.hideHighlightedLines && props.isHighlighted ? (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().revealerShow) : (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().revealerHide),\n                children: [\n                    \"(\",\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        for: \"revealer-\" + props.lineId,\n                        children: [\n                            \"\\uD83D\\uDC41\\xa0\",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"checkbox\",\n                                id: \"revealer-\" + props.lineId,\n                                name: \"revealer-\" + props.lineId,\n                                value: \"revealer-\" + props.lineId,\n                                onClick: function(event) {\n                                    return handleRevealerButtonClick(event);\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                                lineNumber: 17,\n                                columnNumber: 17\n                            }, this),\n                            \")\\xa0\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                        lineNumber: 15,\n                        columnNumber: 18\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                lineNumber: 14,\n                columnNumber: 14\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                className: !props.hideHighlightedLines || props.hideHighlightedLines && !props.isHighlighted ? (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().textShow) : (_Line_module_css__WEBPACK_IMPORTED_MODULE_2___default().textHide),\n                children: props.text\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n                lineNumber: 25,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/Line.js\",\n        lineNumber: 10,\n        columnNumber: 9\n    }, this);\n};\n_c = Line;\nvar _c;\n$RefreshReg$(_c, \"Line\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0xpbmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBO0FBQXdDO0FBQ0Q7QUFFeEIsU0FBU0csSUFBSSxDQUFDQyxLQUFLLEVBQUU7SUFFaEMsSUFBTUMseUJBQXlCLEdBQUcsU0FBQ0MsS0FBSyxFQUFLO1FBQUUsSUFBSTtLQUFFO0lBRXJELHFCQUNJLDhEQUFDQyxJQUFFO1FBQUNDLFNBQVMsRUFBRUosS0FBSyxDQUFDSyxhQUFhLEdBQUdQLHlFQUFzQixHQUFHQSw4REFBVzs7MEJBQ3JFLDhEQUFDVSxNQUFJO2dCQUFDSixTQUFTLEVBQUVOLG1FQUFnQjswQkFBR0UsS0FBSyxDQUFDVSxXQUFXOzs7OztvQkFBUTswQkFDN0QsOERBQUNGLE1BQUk7MEJBQUMsSUFBRTs7Ozs7b0JBQU87MEJBRWQsOERBQUNBLE1BQUk7Z0JBQUNKLFNBQVMsRUFBRUosS0FBSyxDQUFDVyxvQkFBb0IsSUFBSVgsS0FBSyxDQUFDSyxhQUFhLEdBQUdQLHNFQUFtQixHQUFHQSxzRUFBbUI7O29CQUFFLEdBQzVHO2tDQUFBLDhEQUFDZ0IsT0FBSzt3QkFBQ0MsR0FBRyxFQUFFLFdBQVcsR0FBQ2YsS0FBSyxDQUFDZ0IsTUFBTTs7NEJBQUUsa0JBRXZDOzBDQUFBLDhEQUFDQyxPQUFLO2dDQUNGQyxJQUFJLEVBQUMsVUFBVTtnQ0FBQ0MsRUFBRSxFQUFFLFdBQVcsR0FBQ25CLEtBQUssQ0FBQ2dCLE1BQU07Z0NBQUVJLElBQUksRUFBRSxXQUFXLEdBQUNwQixLQUFLLENBQUNnQixNQUFNO2dDQUFFSyxLQUFLLEVBQUUsV0FBVyxHQUFDckIsS0FBSyxDQUFDZ0IsTUFBTTtnQ0FFN0dNLE9BQU8sRUFBRSxTQUFDcEIsS0FBSzsyQ0FBS0QseUJBQXlCLENBQUNDLEtBQUssQ0FBQztpQ0FBQTs7Ozs7b0NBQUk7NEJBQUEsT0FFNUQ7Ozs7Ozs0QkFBUTs7Ozs7O29CQUNMOzBCQUVQLDhEQUFDTSxNQUFJO2dCQUFDSixTQUFTLEVBQUUsQ0FBQ0osS0FBSyxDQUFDVyxvQkFBb0IsSUFBS1gsS0FBSyxDQUFDVyxvQkFBb0IsSUFBSSxDQUFDWCxLQUFLLENBQUNLLGFBQWEsR0FBS1Asa0VBQWUsR0FBR0Esa0VBQWU7MEJBQ3BJRSxLQUFLLENBQUN5QixJQUFJOzs7OztvQkFDUjs7Ozs7O1lBQ04sQ0FDUDtDQUNMO0FBekJ1QjFCLEtBQUFBLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9MaW5lLmpzPzA3OGUiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVzIGZyb20gXCIuL0xpbmUubW9kdWxlLmNzc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMaW5lKHByb3BzKSB7XG5cbiAgICBjb25zdCBoYW5kbGVSZXZlYWxlckJ1dHRvbkNsaWNrID0gKGV2ZW50KSA9PiB7IG51bGwgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGxpIGNsYXNzTmFtZT17cHJvcHMuaXNIaWdobGlnaHRlZCA/IHN0eWxlcy5oaWdobGlnaHRlZExpbmUgOiBzdHlsZXMubGluZSB9PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtzdHlsZXMuY2hhcmFjdGVyfT57cHJvcHMuZGlzcGxheU5hbWV9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4+OiA8L3NwYW4+XG5cbiAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e3Byb3BzLmhpZGVIaWdobGlnaHRlZExpbmVzICYmIHByb3BzLmlzSGlnaGxpZ2h0ZWQgPyBzdHlsZXMucmV2ZWFsZXJTaG93IDogc3R5bGVzLnJldmVhbGVySGlkZX0+XG4gICAgICAgICAgICAgICAgKDxsYWJlbCBmb3I9e1wicmV2ZWFsZXItXCIrcHJvcHMubGluZUlkfT5cbiAgICAgICAgICAgICAgICAgICAg8J+RgSZuYnNwO1xuICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBpZD17XCJyZXZlYWxlci1cIitwcm9wcy5saW5lSWR9IG5hbWU9e1wicmV2ZWFsZXItXCIrcHJvcHMubGluZUlkfSB2YWx1ZT17XCJyZXZlYWxlci1cIitwcm9wcy5saW5lSWR9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IGhhbmRsZVJldmVhbGVyQnV0dG9uQ2xpY2soZXZlbnQpfSAvPlxuICAgICAgICAgICAgICAgICAgICApJm5ic3A7XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvc3Bhbj4gXG5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17IXByb3BzLmhpZGVIaWdobGlnaHRlZExpbmVzIHx8IChwcm9wcy5oaWRlSGlnaGxpZ2h0ZWRMaW5lcyAmJiAhcHJvcHMuaXNIaWdobGlnaHRlZCkgPyAgc3R5bGVzLnRleHRTaG93IDogc3R5bGVzLnRleHRIaWRlfSA+XG4gICAgICAgICAgICAgICAge3Byb3BzLnRleHR9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvbGk+XG4gICAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwic3R5bGVzIiwiTGluZSIsInByb3BzIiwiaGFuZGxlUmV2ZWFsZXJCdXR0b25DbGljayIsImV2ZW50IiwibGkiLCJjbGFzc05hbWUiLCJpc0hpZ2hsaWdodGVkIiwiaGlnaGxpZ2h0ZWRMaW5lIiwibGluZSIsInNwYW4iLCJjaGFyYWN0ZXIiLCJkaXNwbGF5TmFtZSIsImhpZGVIaWdobGlnaHRlZExpbmVzIiwicmV2ZWFsZXJTaG93IiwicmV2ZWFsZXJIaWRlIiwibGFiZWwiLCJmb3IiLCJsaW5lSWQiLCJpbnB1dCIsInR5cGUiLCJpZCIsIm5hbWUiLCJ2YWx1ZSIsIm9uQ2xpY2siLCJ0ZXh0U2hvdyIsInRleHRIaWRlIiwidGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/Line.js\n");

/***/ }),

/***/ "./components/MemorizingBuddy.js":
/*!***************************************!*\
  !*** ./components/MemorizingBuddy.js ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MemorizingBuddy\": function() { return /* binding */ MemorizingBuddy; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks.config.ts */ \"./liveblocks.config.ts\");\n/* harmony import */ var _MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MemorizingBuddy.module.css */ \"./components/MemorizingBuddy.module.css\");\n/* harmony import */ var _MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _data_lemonstre__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../data/lemonstre */ \"./data/lemonstre.json\");\n/* harmony import */ var _data_romeoandjuliet__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/romeoandjuliet */ \"./data/romeoandjuliet.json\");\n/* harmony import */ var _components_Line__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/Line */ \"./components/Line.js\");\n/* harmony import */ var _components_Cursor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/Cursor */ \"./components/Cursor.js\");\n/* harmony import */ var _components_Avatar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/Avatar */ \"./components/Avatar.js\");\n\n\n\n\n\n\n\n\n\nvar _s = $RefreshSig$();\nfunction MemorizingBuddy() {\n    var _this = this;\n    var ref5;\n    _s();\n    var ref1 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(_data_romeoandjuliet__WEBPACK_IMPORTED_MODULE_4__), textToPractice = ref1[0], setTextToPractice = ref1[1];\n    var ref2 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null), allScript = ref2[0], setAllScript = ref2[1];\n    var ref3 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false), isHiddenLines = ref3[0], setIsHiddenLines = ref3[1]; //false is the default value i want to pass\n    var ref4 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]), cast = ref4[0], setCast = ref4[1];\n    var lineIncrement = 0;\n    //LiveBlocks\n    var others = (0,_liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useOthers)().toArray();\n    var currentUser = (0,_liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useSelf)();\n    var othersCursors = others.map(function(user) {\n        var ref;\n        return (ref = user.presence) === null || ref === void 0 ? void 0 : ref.cursor;\n    });\n    var hasMoreUsers = others.length > 3;\n    var updateMyPresence = (0,_liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useUpdateMyPresence)();\n    var refreshScreen = function(text) {\n        console.log(\"text: \" + text.script.title);\n        setTextToPractice(text);\n        textToPractice = text;\n        console.log(\"textToPractice.script.title: \" + textToPractice.script.title);\n        setAllScript(textToPractice.script);\n        setCast(textToPractice.script.cast.map(function(value) {\n            return {\n                id: value.id,\n                displayName: value.displayName,\n                isHighlighted: false\n            };\n        }));\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function() {\n        refreshScreen(textToPractice);\n    }, []);\n    //What's the best way to handle localization?\n    var renderOptions = function() {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"fieldset\", {\n                    className: (_MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8___default().fieldset),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"legend\", {\n                            children: \"Who are you?\"\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 50,\n                            columnNumber: 21\n                        }, _this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                children: cast.map(function(character) {\n                                    return renderOptionCharacter(character);\n                                })\n                            }, void 0, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 52,\n                                columnNumber: 25\n                            }, _this)\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 51,\n                            columnNumber: 21\n                        }, _this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 49,\n                    columnNumber: 17\n                }, _this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"fieldset\", {\n                    className: (_MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8___default().fieldset),\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"legend\", {\n                            children: \"Options\"\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 56,\n                            columnNumber: 21\n                        }, _this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"checkbox\",\n                                    id: \"hideLines\",\n                                    name: \"hideLines\",\n                                    value: \"hide\",\n                                    onClick: function(event) {\n                                        return handleHideLinesOptionClick(event);\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                    lineNumber: 58,\n                                    columnNumber: 25\n                                }, _this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    for: \"hideLines\",\n                                    children: \"\\uD83E\\uDDD1\\u200D\\uD83E\\uDDAF Hide your lines\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                    lineNumber: 61,\n                                    columnNumber: 25\n                                }, _this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 57,\n                            columnNumber: 21\n                        }, _this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"checkbox\",\n                                    id: \"optimizeForReading\",\n                                    name: \"optimizeForReading\",\n                                    value: \"optimizeForReading\",\n                                    onClick: function(event) {\n                                        return null;\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                    lineNumber: 66,\n                                    columnNumber: 25\n                                }, _this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    for: \"optimizeForReading\",\n                                    children: [\n                                        \"\\uD83D\\uDC53 Optimize for reading \",\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                            children: \"(Soon!)\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                            lineNumber: 70,\n                                            columnNumber: 52\n                                        }, _this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                    lineNumber: 69,\n                                    columnNumber: 25\n                                }, _this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 65,\n                            columnNumber: 21\n                        }, _this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                children: [\n                                    \"\\uD83D\\uDC64 Practice on your own \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        children: \"(Soon!)\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                        lineNumber: 74,\n                                        columnNumber: 56\n                                    }, _this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 74,\n                                columnNumber: 25\n                            }, _this)\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 73,\n                            columnNumber: 21\n                        }, _this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                children: [\n                                    \"\\uD83D\\uDC65 Start a group practice \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                                        children: \"(Soon!)\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                        lineNumber: 77,\n                                        columnNumber: 58\n                                    }, _this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 77,\n                                columnNumber: 25\n                            }, _this)\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 76,\n                            columnNumber: 21\n                        }, _this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 55,\n                    columnNumber: 17\n                }, _this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 48,\n            columnNumber: 13\n        }, _this);\n    };\n    var handleHideLinesOptionClick = function(event) {\n        setIsHiddenLines(event.target.checked);\n    };\n    var handleHighlightOptionClick = function(event, characterId) {\n        var newCast = cast.slice();\n        var castKey = newCast.findIndex(function(x, i) {\n            return x.id == characterId;\n        });\n        newCast[castKey].isHighlighted = event.target.checked;\n        setCast(newCast);\n    };\n    var renderOptionCharacter = function(character) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                    type: \"checkbox\",\n                    id: character.id,\n                    name: character.id,\n                    value: character.id,\n                    onClick: function(event) {\n                        return handleHighlightOptionClick(event, character.id);\n                    }\n                }, void 0, false, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 96,\n                    columnNumber: 17\n                }, _this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                    for: character.id,\n                    children: character.displayName\n                }, void 0, false, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 99,\n                    columnNumber: 17\n                }, _this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 95,\n            columnNumber: 13\n        }, _this);\n    };\n    var renderScript = function() {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                    children: allScript.title\n                }, void 0, false, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 110,\n                    columnNumber: 17\n                }, _this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: renderSections(allScript.sections)\n                }, void 0, false, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 111,\n                    columnNumber: 17\n                }, _this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 109,\n            columnNumber: 13\n        }, _this);\n    };\n    var renderSections = function(sections) {\n        var _this1 = _this;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: sections.map(function(section) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                            children: [\n                                \"Act \",\n                                section.number\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 124,\n                            columnNumber: 33\n                        }, _this1),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                            children: section.lines.map(function(line) {\n                                var newIncrementValue = lineIncrement;\n                                lineIncrement = newIncrementValue + 1;\n                                return renderLine(line);\n                            })\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 125,\n                            columnNumber: 33\n                        }, _this1)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 123,\n                    columnNumber: 29\n                }, _this1);\n            })\n        }, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 119,\n            columnNumber: 13\n        }, _this);\n    };\n    var renderLine = function(line) {\n        var currentCharacter = cast.findLast(function(character) {\n            return character.id == line.characterId;\n        });\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Line__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n            characterId: line.characterId,\n            displayName: currentCharacter.displayName,\n            text: line.text,\n            isHighlighted: currentCharacter.isHighlighted,\n            hideHighlightedLines: isHiddenLines,\n            lineId: lineIncrement\n        }, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 143,\n            columnNumber: 13\n        }, _this);\n    };\n    var handleScriptSelectorChange = function(event) {\n        console.log(\"Select value: \" + event.target.value);\n        if (event.target.value == \"lemonstre\") {\n            console.log(\"Case lemonstre\");\n            refreshScreen(_data_lemonstre__WEBPACK_IMPORTED_MODULE_3__);\n        } else if (event.target.value == \"romeoandjuliet\") {\n            console.log(\"Case romeoandjuliet\");\n            refreshScreen(_data_romeoandjuliet__WEBPACK_IMPORTED_MODULE_4__);\n        }\n    };\n    if (allScript == null) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            children: \"Loading...\"\n        }, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n            lineNumber: 171,\n            columnNumber: 16\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"flex place-items-center place-content-center select-none\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex pl-3\",\n                    children: [\n                        others.slice(0, 3).map(function(param) {\n                            var connectionId = param.connectionId, info = param.info;\n                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Avatar__WEBPACK_IMPORTED_MODULE_7__.Avatar, {\n                                picture: info.picture,\n                                name: info.name\n                            }, connectionId, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 180,\n                                columnNumber: 29\n                            }, _this);\n                        }),\n                        hasMoreUsers && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: (_MemorizingBuddy_module_css__WEBPACK_IMPORTED_MODULE_8___default().more),\n                            children: [\n                                \"+\",\n                                others.length - 3\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 188,\n                            columnNumber: 38\n                        }, this),\n                        currentUser && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative ml-8 first:ml-0\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Avatar__WEBPACK_IMPORTED_MODULE_7__.Avatar, {\n                                picture: (ref5 = currentUser.info) === null || ref5 === void 0 ? void 0 : ref5.picture,\n                                name: \"You\"\n                            }, void 0, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 192,\n                                columnNumber: 29\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                            lineNumber: 191,\n                            columnNumber: 25\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                    lineNumber: 177,\n                    columnNumber: 17\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                lineNumber: 176,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                children: \"Memorizing Buddy\"\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                lineNumber: 197,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        for: \"scriptSelector\",\n                        children: \"Choose your script to practice: \"\n                    }, void 0, false, {\n                        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                        lineNumber: 199,\n                        columnNumber: 17\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        id: \"scriptSelector\",\n                        onChange: function(event) {\n                            return handleScriptSelectorChange(event);\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"romeoandjuliet\",\n                                children: \"\\uD83C\\uDDEC\\uD83C\\uDDE7 Romeo & Juliet\"\n                            }, void 0, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 201,\n                                columnNumber: 21\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"lemonstre\",\n                                children: \"\\uD83C\\uDDEB\\uD83C\\uDDF7 Le Monstre\"\n                            }, void 0, false, {\n                                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                                lineNumber: 202,\n                                columnNumber: 21\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                        lineNumber: 200,\n                        columnNumber: 17\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                lineNumber: 198,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: renderOptions()\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                lineNumber: 205,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: renderScript()\n            }, void 0, false, {\n                fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n                lineNumber: 206,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/components/MemorizingBuddy.js\",\n        lineNumber: 175,\n        columnNumber: 9\n    }, this);\n}\n_s(MemorizingBuddy, \"2bCdfxzA6FyztTQaovnlzgMMa7E=\", false, function() {\n    return [\n        _liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useOthers,\n        _liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useSelf,\n        _liveblocks_config_ts__WEBPACK_IMPORTED_MODULE_2__.useUpdateMyPresence\n    ];\n});\n_c = MemorizingBuddy;\nvar _c;\n$RefreshReg$(_c, \"MemorizingBuddy\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7b0NBQVM7Ozs7Ozs0QkFDM0M7Ozs7OztvQkFDUDswQkFDTiw4REFBQ0ssS0FBRzswQkFBRUQsYUFBYSxFQUFFOzs7OztvQkFBTzswQkFDNUIsOERBQUNDLEtBQUc7MEJBQUUwQixZQUFZLEVBQUU7Ozs7O29CQUFPOzs7Ozs7WUFDekIsQ0FFUjtDQUNMO0dBdk1lMUQsZUFBZTs7UUFVWlIsNERBQVM7UUFDSkQsMERBQU87UUFHRkUsc0VBQW1COzs7QUFkaENPLEtBQUFBLGVBQWUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9NZW1vcml6aW5nQnVkZHkuanM/ZWMyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVNlbGYsIHVzZU90aGVycywgdXNlVXBkYXRlTXlQcmVzZW5jZSB9IGZyb20gXCIuLi9saXZlYmxvY2tzLmNvbmZpZy50c1wiO1xuaW1wb3J0IHN0eWxlcyBmcm9tIFwiLi9NZW1vcml6aW5nQnVkZHkubW9kdWxlLmNzc1wiO1xuaW1wb3J0IGxlbW9uc3RyZSBmcm9tIFwiLi4vZGF0YS9sZW1vbnN0cmVcIjtcbmltcG9ydCByb21lb2FuZGp1bGlldCBmcm9tIFwiLi4vZGF0YS9yb21lb2FuZGp1bGlldFwiO1xuaW1wb3J0IExpbmUgZnJvbSBcIi4uL2NvbXBvbmVudHMvTGluZVwiO1xuaW1wb3J0IEN1cnNvciBmcm9tICcuLi9jb21wb25lbnRzL0N1cnNvcic7XG5pbXBvcnQgeyBBdmF0YXIgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BdmF0YXJcIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gTWVtb3JpemluZ0J1ZGR5KCkge1xuICAgIFxuICAgIGNvbnN0IFt0ZXh0VG9QcmFjdGljZSwgc2V0VGV4dFRvUHJhY3RpY2VdID0gdXNlU3RhdGUocm9tZW9hbmRqdWxpZXQpO1xuICAgIGNvbnN0IFthbGxTY3JpcHQsIHNldEFsbFNjcmlwdF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgICBjb25zdCBbaXNIaWRkZW5MaW5lcywgc2V0SXNIaWRkZW5MaW5lc10gPSB1c2VTdGF0ZShmYWxzZSk7IC8vZmFsc2UgaXMgdGhlIGRlZmF1bHQgdmFsdWUgaSB3YW50IHRvIHBhc3NcbiAgICBjb25zdCBbY2FzdCwgc2V0Q2FzdF0gPSB1c2VTdGF0ZShbXSk7XG4gICAgY29uc3QgbGluZUluY3JlbWVudCA9IDA7XG5cblxuICAgIC8vTGl2ZUJsb2Nrc1xuICAgIGNvbnN0IG90aGVycyA9IHVzZU90aGVycygpLnRvQXJyYXkoKTtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHVzZVNlbGYoKTtcbiAgICBjb25zdCBvdGhlcnNDdXJzb3JzID0gb3RoZXJzLm1hcCgodXNlcikgPT4gdXNlci5wcmVzZW5jZT8uY3Vyc29yKTtcbiAgICBjb25zdCBoYXNNb3JlVXNlcnMgPSBvdGhlcnMubGVuZ3RoID4gMztcbiAgICBjb25zdCB1cGRhdGVNeVByZXNlbmNlID0gdXNlVXBkYXRlTXlQcmVzZW5jZSgpO1xuXG4gICAgY29uc3QgcmVmcmVzaFNjcmVlbiA9ICh0ZXh0KSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidGV4dDogXCIgKyB0ZXh0LnNjcmlwdC50aXRsZSlcbiAgICAgICAgc2V0VGV4dFRvUHJhY3RpY2UodGV4dClcbiAgICAgICAgdGV4dFRvUHJhY3RpY2U9dGV4dDtcbiAgICAgICAgY29uc29sZS5sb2coXCJ0ZXh0VG9QcmFjdGljZS5zY3JpcHQudGl0bGU6IFwiICsgdGV4dFRvUHJhY3RpY2Uuc2NyaXB0LnRpdGxlKVxuICAgICAgICBzZXRBbGxTY3JpcHQodGV4dFRvUHJhY3RpY2Uuc2NyaXB0KVxuICAgICAgICBzZXRDYXN0KHRleHRUb1ByYWN0aWNlLnNjcmlwdC5jYXN0Lm1hcCh2YWx1ZSA9PiAoXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsIFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogdmFsdWUuZGlzcGxheU5hbWUsIFxuICAgICAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkOiBmYWxzZSBcbiAgICAgICAgICAgIH0pKSlcbiAgICB9XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICByZWZyZXNoU2NyZWVuKHRleHRUb1ByYWN0aWNlKVxuICAgIH0sIFtdKTtcblxuICAgIC8vV2hhdCdzIHRoZSBiZXN0IHdheSB0byBoYW5kbGUgbG9jYWxpemF0aW9uP1xuICAgIGNvbnN0IHJlbmRlck9wdGlvbnMgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxmaWVsZHNldCBjbGFzc05hbWU9e3N0eWxlcy5maWVsZHNldH0+XG4gICAgICAgICAgICAgICAgICAgIDxsZWdlbmQ+V2hvIGFyZSB5b3U/PC9sZWdlbmQ+XG4gICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx1bD57Y2FzdC5tYXAoY2hhcmFjdGVyID0+IHJlbmRlck9wdGlvbkNoYXJhY3RlcihjaGFyYWN0ZXIpKX08L3VsPlxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDwvZmllbGRzZXQ+XG4gICAgICAgICAgICAgICAgPGZpZWxkc2V0IGNsYXNzTmFtZT17c3R5bGVzLmZpZWxkc2V0fT5cbiAgICAgICAgICAgICAgICAgICAgPGxlZ2VuZD5PcHRpb25zPC9sZWdlbmQ+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImhpZGVMaW5lc1wiIG5hbWU9XCJoaWRlTGluZXNcIiB2YWx1ZT1cImhpZGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhldmVudCkgPT4gaGFuZGxlSGlkZUxpbmVzT3B0aW9uQ2xpY2soZXZlbnQpfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImhpZGVMaW5lc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfp5HigI3wn6avIEhpZGUgeW91ciBsaW5lc1xuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBpZD1cIm9wdGltaXplRm9yUmVhZGluZ1wiIG5hbWU9XCJvcHRpbWl6ZUZvclJlYWRpbmdcIiB2YWx1ZT1cIm9wdGltaXplRm9yUmVhZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiBudWxsfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm9wdGltaXplRm9yUmVhZGluZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkZMgT3B0aW1pemUgZm9yIHJlYWRpbmcgPGk+KFNvb24hKTwvaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbj7wn5GkIFByYWN0aWNlIG9uIHlvdXIgb3duIDxpPihTb29uISk8L2k+PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbj7wn5GlIFN0YXJ0IGEgZ3JvdXAgcHJhY3RpY2UgPGk+KFNvb24hKTwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9maWVsZHNldD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZUhpZGVMaW5lc09wdGlvbkNsaWNrID0gKGV2ZW50KSA9PiB7IHNldElzSGlkZGVuTGluZXMoZXZlbnQudGFyZ2V0LmNoZWNrZWQpOyB9XG5cbiAgICBjb25zdCBoYW5kbGVIaWdobGlnaHRPcHRpb25DbGljayA9IChldmVudCwgY2hhcmFjdGVySWQpID0+IHtcbiAgICAgICAgY29uc3QgbmV3Q2FzdCA9IGNhc3Quc2xpY2UoKTtcbiAgICAgICAgdmFyIGNhc3RLZXkgPSBuZXdDYXN0LmZpbmRJbmRleCgoeCwgaSkgPT4geC5pZCA9PSBjaGFyYWN0ZXJJZCk7XG4gICAgICAgIG5ld0Nhc3RbY2FzdEtleV0uaXNIaWdobGlnaHRlZCA9IGV2ZW50LnRhcmdldC5jaGVja2VkO1xuICAgICAgICBzZXRDYXN0KG5ld0Nhc3QpO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlck9wdGlvbkNoYXJhY3RlciA9IChjaGFyYWN0ZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiIGlkPXtjaGFyYWN0ZXIuaWR9IG5hbWU9e2NoYXJhY3Rlci5pZH0gdmFsdWU9e2NoYXJhY3Rlci5pZH1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiBoYW5kbGVIaWdobGlnaHRPcHRpb25DbGljayhldmVudCwgY2hhcmFjdGVyLmlkKX0gLz5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPXtjaGFyYWN0ZXIuaWR9PlxuICAgICAgICAgICAgICAgICAgICB7Y2hhcmFjdGVyLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cblxuICAgIGNvbnN0IHJlbmRlclNjcmlwdCA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGg0PnthbGxTY3JpcHQudGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICA8ZGl2PntyZW5kZXJTZWN0aW9ucyhhbGxTY3JpcHQuc2VjdGlvbnMpfTwvZGl2PlxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJTZWN0aW9ucyA9IChzZWN0aW9ucykgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb25zLm1hcCgoc2VjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+QWN0IHtzZWN0aW9uLm51bWJlcn08L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWw+e3NlY3Rpb24ubGluZXMubWFwKChsaW5lKSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJbmNyZW1lbnRWYWx1ZSA9IGxpbmVJbmNyZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZUluY3JlbWVudD1uZXdJbmNyZW1lbnRWYWx1ZSsxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAocmVuZGVyTGluZShsaW5lKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX08L3VsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlckxpbmUgPSAobGluZSkgPT4ge1xuICAgICAgICBsZXQgY3VycmVudENoYXJhY3RlciA9IGNhc3QuZmluZExhc3QoKGNoYXJhY3RlcikgPT4geyByZXR1cm4gY2hhcmFjdGVyLmlkID09IGxpbmUuY2hhcmFjdGVySWQgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TGluZVxuICAgICAgICAgICAgICAgIGNoYXJhY3RlcklkPXtsaW5lLmNoYXJhY3RlcklkfVxuICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lPXtjdXJyZW50Q2hhcmFjdGVyLmRpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgIHRleHQ9e2xpbmUudGV4dH1cbiAgICAgICAgICAgICAgICBpc0hpZ2hsaWdodGVkPXtjdXJyZW50Q2hhcmFjdGVyLmlzSGlnaGxpZ2h0ZWR9XG4gICAgICAgICAgICAgICAgaGlkZUhpZ2hsaWdodGVkTGluZXM9e2lzSGlkZGVuTGluZXN9XG4gICAgICAgICAgICAgICAgbGluZUlkPXtsaW5lSW5jcmVtZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IGhhbmRsZVNjcmlwdFNlbGVjdG9yQ2hhbmdlID0gKGV2ZW50KSA9PiB7IFxuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWN0IHZhbHVlOiBcIiArIGV2ZW50LnRhcmdldC52YWx1ZSlcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LnZhbHVlPT1cImxlbW9uc3RyZVwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhc2UgbGVtb25zdHJlXCIpO1xuICAgICAgICAgICAgcmVmcmVzaFNjcmVlbihsZW1vbnN0cmUpXG4gICAgICAgIDt9XG4gICAgICAgIGVsc2UgaWYoZXZlbnQudGFyZ2V0LnZhbHVlPT1cInJvbWVvYW5kanVsaWV0XCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FzZSByb21lb2FuZGp1bGlldFwiKTtcbiAgICAgICAgICAgIHJlZnJlc2hTY3JlZW4ocm9tZW9hbmRqdWxpZXQpXG4gICAgICAgIDt9XG4gICAgfVxuXG5cbiAgICBpZiAoYWxsU2NyaXB0ID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIDxkaXY+TG9hZGluZy4uLjwvZGl2PlxuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bWFpbiBjbGFzc05hbWU9XCJmbGV4IHBsYWNlLWl0ZW1zLWNlbnRlciBwbGFjZS1jb250ZW50LWNlbnRlciBzZWxlY3Qtbm9uZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBwbC0zXCI+XG4gICAgICAgICAgICAgICAgICAgIHtvdGhlcnMuc2xpY2UoMCwgMykubWFwKCh7IGNvbm5lY3Rpb25JZCwgaW5mbyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBdmF0YXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtjb25uZWN0aW9uSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY3R1cmU9e2luZm8ucGljdHVyZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17aW5mby5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KX1cblxuICAgICAgICAgICAgICAgICAgICB7aGFzTW9yZVVzZXJzICYmIDxkaXYgY2xhc3NOYW1lPXtzdHlsZXMubW9yZX0+K3tvdGhlcnMubGVuZ3RoIC0gM308L2Rpdj59XG5cbiAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRVc2VyICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgbWwtOCBmaXJzdDptbC0wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEF2YXRhciBwaWN0dXJlPXtjdXJyZW50VXNlci5pbmZvPy5waWN0dXJlfSBuYW1lPVwiWW91XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9tYWluPlxuICAgICAgICAgICAgPGgxPk1lbW9yaXppbmcgQnVkZHk8L2gxPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwic2NyaXB0U2VsZWN0b3JcIj5DaG9vc2UgeW91ciBzY3JpcHQgdG8gcHJhY3RpY2U6IDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cInNjcmlwdFNlbGVjdG9yXCIgb25DaGFuZ2U9eyhldmVudCkgPT4gaGFuZGxlU2NyaXB0U2VsZWN0b3JDaGFuZ2UoZXZlbnQpfSA+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJyb21lb2FuZGp1bGlldFwiPvCfh6zwn4enIFJvbWVvICYgSnVsaWV0PC9vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJsZW1vbnN0cmVcIj7wn4er8J+HtyBMZSBNb25zdHJlPC9vcHRpb24+XG4gICAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+e3JlbmRlck9wdGlvbnMoKX08L2Rpdj5cbiAgICAgICAgICAgIDxkaXY+e3JlbmRlclNjcmlwdCgpfTwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICk7XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VTZWxmIiwidXNlT3RoZXJzIiwidXNlVXBkYXRlTXlQcmVzZW5jZSIsInN0eWxlcyIsImxlbW9uc3RyZSIsInJvbWVvYW5kanVsaWV0IiwiTGluZSIsIkN1cnNvciIsIkF2YXRhciIsIk1lbW9yaXppbmdCdWRkeSIsImN1cnJlbnRVc2VyIiwidGV4dFRvUHJhY3RpY2UiLCJzZXRUZXh0VG9QcmFjdGljZSIsImFsbFNjcmlwdCIsInNldEFsbFNjcmlwdCIsImlzSGlkZGVuTGluZXMiLCJzZXRJc0hpZGRlbkxpbmVzIiwiY2FzdCIsInNldENhc3QiLCJsaW5lSW5jcmVtZW50Iiwib3RoZXJzIiwidG9BcnJheSIsIm90aGVyc0N1cnNvcnMiLCJtYXAiLCJ1c2VyIiwicHJlc2VuY2UiLCJjdXJzb3IiLCJoYXNNb3JlVXNlcnMiLCJsZW5ndGgiLCJ1cGRhdGVNeVByZXNlbmNlIiwicmVmcmVzaFNjcmVlbiIsInRleHQiLCJjb25zb2xlIiwibG9nIiwic2NyaXB0IiwidGl0bGUiLCJ2YWx1ZSIsImlkIiwiZGlzcGxheU5hbWUiLCJpc0hpZ2hsaWdodGVkIiwicmVuZGVyT3B0aW9ucyIsImRpdiIsImZpZWxkc2V0IiwiY2xhc3NOYW1lIiwibGVnZW5kIiwidWwiLCJjaGFyYWN0ZXIiLCJyZW5kZXJPcHRpb25DaGFyYWN0ZXIiLCJpbnB1dCIsInR5cGUiLCJuYW1lIiwib25DbGljayIsImV2ZW50IiwiaGFuZGxlSGlkZUxpbmVzT3B0aW9uQ2xpY2siLCJsYWJlbCIsImZvciIsImkiLCJidXR0b24iLCJ0YXJnZXQiLCJjaGVja2VkIiwiaGFuZGxlSGlnaGxpZ2h0T3B0aW9uQ2xpY2siLCJjaGFyYWN0ZXJJZCIsIm5ld0Nhc3QiLCJzbGljZSIsImNhc3RLZXkiLCJmaW5kSW5kZXgiLCJ4IiwicmVuZGVyU2NyaXB0IiwiaDQiLCJyZW5kZXJTZWN0aW9ucyIsInNlY3Rpb25zIiwic2VjdGlvbiIsIm51bWJlciIsImxpbmVzIiwibGluZSIsIm5ld0luY3JlbWVudFZhbHVlIiwicmVuZGVyTGluZSIsImN1cnJlbnRDaGFyYWN0ZXIiLCJmaW5kTGFzdCIsImhpZGVIaWdobGlnaHRlZExpbmVzIiwibGluZUlkIiwiaGFuZGxlU2NyaXB0U2VsZWN0b3JDaGFuZ2UiLCJtYWluIiwiY29ubmVjdGlvbklkIiwiaW5mbyIsInBpY3R1cmUiLCJtb3JlIiwiaDEiLCJzZWxlY3QiLCJvbkNoYW5nZSIsIm9wdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/MemorizingBuddy.js\n");

/***/ }),

/***/ "./liveblocks.config.ts":
/*!******************************!*\
  !*** ./liveblocks.config.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RoomProvider\": function() { return /* binding */ RoomProvider; },\n/* harmony export */   \"useOthers\": function() { return /* binding */ useOthers; },\n/* harmony export */   \"useSelf\": function() { return /* binding */ useSelf; },\n/* harmony export */   \"useUpdateMyPresence\": function() { return /* binding */ useUpdateMyPresence; }\n/* harmony export */ });\n/* harmony import */ var _liveblocks_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @liveblocks/client */ \"./node_modules/@liveblocks/client/index.mjs\");\n/* harmony import */ var _liveblocks_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @liveblocks/react */ \"./node_modules/@liveblocks/react/index.mjs\");\n\n\nvar client = (0,_liveblocks_client__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n    authEndpoint: \"/api/auth\"\n});\nvar ref = (0,_liveblocks_react__WEBPACK_IMPORTED_MODULE_1__.createRoomContext)(client);\n// Optionally, the type of custom events broadcasted and listened for in this\n// room. Must be JSON-serializable.\n// type RoomEvent = {};\nvar RoomProvider = ref.RoomProvider, useOthers = ref.useOthers, useSelf = ref.useSelf, useUpdateMyPresence = ref.useUpdateMyPresence;\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saXZlYmxvY2tzLmNvbmZpZy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Q7QUFDSTtBQUV0RCxJQUFNRSxNQUFNLEdBQUdGLGdFQUFZLENBQUM7SUFDMUJHLFlBQVksRUFBRSxXQUFXO0NBQzFCLENBQUM7SUFrQ3VFRixHQUtoRSxHQUxnRUEsb0VBQWlCLENBS3hGQyxNQUFNLENBQUM7QUFUVCw2RUFBNkU7QUFDN0UsbUNBQW1DO0FBQ25DLHVCQUF1QjtBQUVoQixJQUFRRSxZQUFZLEdBQThDSCxHQUtoRSxDQUxNRyxZQUFZLEVBQUVDLFNBQVMsR0FBbUNKLEdBS2hFLENBTG9CSSxTQUFTLEVBQUVDLE9BQU8sR0FBMEJMLEdBS2hFLENBTCtCSyxPQUFPLEVBQUVDLG1CQUFtQixHQUFLTixHQUtoRSxDQUx3Q00sbUJBQW1CLENBSzFEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpdmVibG9ja3MuY29uZmlnLnRzP2JjMDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkBsaXZlYmxvY2tzL2NsaWVudFwiO1xuaW1wb3J0IHsgY3JlYXRlUm9vbUNvbnRleHQgfSBmcm9tIFwiQGxpdmVibG9ja3MvcmVhY3RcIjtcblxuY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgYXV0aEVuZHBvaW50OiBcIi9hcGkvYXV0aFwiLFxufSk7XG5cbi8vIFByZXNlbmNlIHJlcHJlc2VudHMgdGhlIHByb3BlcnRpZXMgdGhhdCB3aWxsIGV4aXN0IG9uIGV2ZXJ5IFVzZXIgaW4gdGhlIFJvb21cbi8vIGFuZCB0aGF0IHdpbGwgYXV0b21hdGljYWxseSBiZSBrZXB0IGluIHN5bmMuIEFjY2Vzc2libGUgdGhyb3VnaCB0aGVcbi8vIGB1c2VyLnByZXNlbmNlYCBwcm9wZXJ0eS4gTXVzdCBiZSBKU09OLXNlcmlhbGl6YWJsZS5cbnR5cGUgUHJlc2VuY2UgPSB7XG4gIC8vIGN1cnNvcjogeyB4OiBudW1iZXIsIHk6IG51bWJlciB9IHwgbnVsbCxcbiAgLy8gLi4uXG59O1xuXG4vLyBPcHRpb25hbGx5LCBTdG9yYWdlIHJlcHJlc2VudHMgdGhlIHNoYXJlZCBkb2N1bWVudCB0aGF0IHBlcnNpc3RzIGluIHRoZVxuLy8gUm9vbSwgZXZlbiBhZnRlciBhbGwgVXNlcnMgbGVhdmUuIEZpZWxkcyB1bmRlciBTdG9yYWdlIHR5cGljYWxseSBhcmVcbi8vIExpdmVMaXN0LCBMaXZlTWFwLCBMaXZlT2JqZWN0IGluc3RhbmNlcywgZm9yIHdoaWNoIHVwZGF0ZXMgYXJlXG4vLyBhdXRvbWF0aWNhbGx5IHBlcnNpc3RlZCBhbmQgc3luY2VkIHRvIGFsbCBjb25uZWN0ZWQgY2xpZW50cy5cbnR5cGUgU3RvcmFnZSA9IHtcbiAgLy8gYW5pbWFsczogTGl2ZUxpc3Q8c3RyaW5nPixcbiAgLy8gLi4uXG59O1xuXG4vLyBVc2VyTWV0YSByZXByZXNlbnRzIHN0YXRpYy9yZWFkb25seSBtZXRhZGF0YSBvbiBlYWNoIFVzZXIsIGFzIHByb3ZpZGVkIGJ5XG4vLyB5b3VyIG93biBjdXN0b20gYXV0aCBiYWNrZW5kIChpZiB1c2VkKS4gVXNlZnVsIGZvciBkYXRhIHRoYXQgd2lsbCBub3QgY2hhbmdlXG4vLyBkdXJpbmcgYSBzZXNzaW9uLCBsaWtlIGEgVXNlcidzIG5hbWUgb3IgYXZhdGFyLlxudHlwZSBVc2VyTWV0YSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgaW5mbzoge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBwaWN0dXJlOiBzdHJpbmc7XG4gIH07XG59O1xuXG4vLyBPcHRpb25hbGx5LCB0aGUgdHlwZSBvZiBjdXN0b20gZXZlbnRzIGJyb2FkY2FzdGVkIGFuZCBsaXN0ZW5lZCBmb3IgaW4gdGhpc1xuLy8gcm9vbS4gTXVzdCBiZSBKU09OLXNlcmlhbGl6YWJsZS5cbi8vIHR5cGUgUm9vbUV2ZW50ID0ge307XG5cbmV4cG9ydCBjb25zdCB7IFJvb21Qcm92aWRlciwgdXNlT3RoZXJzLCB1c2VTZWxmLCB1c2VVcGRhdGVNeVByZXNlbmNlIH0gPSBjcmVhdGVSb29tQ29udGV4dDxcbiAgUHJlc2VuY2UsXG4gIFN0b3JhZ2UsXG4gIFVzZXJNZXRhXG4gIC8qIFJvb21FdmVudCAqL1xuPihjbGllbnQpO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNyZWF0ZVJvb21Db250ZXh0IiwiY2xpZW50IiwiYXV0aEVuZHBvaW50IiwiUm9vbVByb3ZpZGVyIiwidXNlT3RoZXJzIiwidXNlU2VsZiIsInVzZVVwZGF0ZU15UHJlc2VuY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./liveblocks.config.ts\n");

/***/ }),

/***/ "./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"__N_SSG\": function() { return /* binding */ __N_SSG; },\n/* harmony export */   \"default\": function() { return /* binding */ Page; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_MemorizingBuddy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/MemorizingBuddy */ \"./components/MemorizingBuddy.js\");\n/* harmony import */ var _liveblocks_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks.config */ \"./liveblocks.config.ts\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/router */ \"./node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nvar _s = $RefreshSig$(), _s1 = $RefreshSig$();\nvar __N_SSG = true;\nfunction Page() {\n    _s();\n    var roomId = useOverrideRoomId(\"nextjs-live-avatars\");\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_liveblocks_config__WEBPACK_IMPORTED_MODULE_3__.RoomProvider, {\n        id: roomId,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MemorizingBuddy__WEBPACK_IMPORTED_MODULE_2__.MemorizingBuddy, {}, void 0, false, {\n            fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/pages/index.tsx\",\n            lineNumber: 14,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/adriengaudon/Documents/DEV/memorizing-buddy-nextjs/pages/index.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n};\n_s(Page, \"M3yPXYZnYtbqavgbq1UkEATBLCs=\", false, function() {\n    return [\n        useOverrideRoomId\n    ];\n});\n_c = Page;\n/**\n * This function is used when deploying an example on liveblocks.io.\n * You can ignore it completely if you run the example locally.\n */ function useOverrideRoomId(roomId) {\n    _s1();\n    var query = (0,next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter)().query;\n    var overrideRoomId = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function() {\n        return (query === null || query === void 0 ? void 0 : query.roomId) ? \"\".concat(roomId, \"-\").concat(query.roomId) : roomId;\n    }, [\n        query,\n        roomId\n    ]);\n    return overrideRoomId;\n}\n_s1(useOverrideRoomId, \"v5bZOIwWBjTk3E30otg0CXK5YGE=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_4__.useRouter\n    ];\n});\nvar _c;\n$RefreshReg$(_c, \"Page\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9pbmRleC50c3guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQXVDO0FBQ3lCO0FBQ1E7QUFDaEM7OztBQUt6QixTQUFTSyxJQUFJLEdBQUc7O0lBQzdCLElBQU1DLE1BQU0sR0FBR0MsaUJBQWlCLENBQUMscUJBQXFCLENBQUM7SUFFdkQscUJBQ0UsOERBQUNKLDREQUFZO1FBQUNLLEVBQUUsRUFBRUYsTUFBTTtrQkFDdEIsNEVBQUNKLHdFQUFlOzs7O2dCQUFHOzs7OztZQUNOLENBQ2Y7Q0FDSDtHQVJ1QkcsSUFBSTs7UUFDWEUsaUJBQWlCOzs7QUFEVkYsS0FBQUEsSUFBSTtBQTBCNUI7OztHQUdHLENBQ0gsU0FBU0UsaUJBQWlCLENBQUNELE1BQWMsRUFBRTs7SUFDekMsSUFBTSxLQUFPLEdBQUtGLHNEQUFTLEVBQUUsQ0FBckJLLEtBQUs7SUFDYixJQUFNQyxjQUFjLEdBQUdULDhDQUFPLENBQUMsV0FBTTtRQUNuQyxPQUFPUSxDQUFBQSxLQUFLLGFBQUxBLEtBQUssV0FBUSxHQUFiQSxLQUFBQSxDQUFhLEdBQWJBLEtBQUssQ0FBRUgsTUFBTSxJQUFHLEVBQUMsQ0FBWUcsTUFBWSxDQUF0QkgsTUFBTSxFQUFDLEdBQUMsQ0FBZSxRQUFiRyxLQUFLLENBQUNILE1BQU0sQ0FBRSxHQUFHQSxNQUFNLENBQUM7S0FDN0QsRUFBRTtRQUFDRyxLQUFLO1FBQUVILE1BQU07S0FBQyxDQUFDO0lBRW5CLE9BQU9JLGNBQWMsQ0FBQztDQUN2QjtJQVBRSCxpQkFBaUI7O1FBQ05ILGtEQUFTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3BhZ2VzL2luZGV4LnRzeD8wN2ZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBNZW1vcml6aW5nQnVkZHkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9NZW1vcml6aW5nQnVkZHlcIjtcbmltcG9ydCB7IFJvb21Qcm92aWRlciwgdXNlT3RoZXJzLCB1c2VTZWxmIH0gZnJvbSBcIi4uL2xpdmVibG9ja3MuY29uZmlnXCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcbmltcG9ydCBzdHlsZXMgZnJvbSBcIi4vaW5kZXgubW9kdWxlLmNzc1wiO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFnZSgpIHtcbiAgY29uc3Qgcm9vbUlkID0gdXNlT3ZlcnJpZGVSb29tSWQoXCJuZXh0anMtbGl2ZS1hdmF0YXJzXCIpO1xuXG4gIHJldHVybiAoXG4gICAgPFJvb21Qcm92aWRlciBpZD17cm9vbUlkfT5cbiAgICAgIDxNZW1vcml6aW5nQnVkZHkgLz5cbiAgICA8L1Jvb21Qcm92aWRlcj5cbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0YXRpY1Byb3BzKCkge1xuICBjb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuQVBJX0tFWTtcbiAgY29uc3QgQVBJX0tFWV9XQVJOSU5HID0gcHJvY2Vzcy5lbnYuQVBJX0tFWV9XQVJOSU5HXG4gICBcbiAgICA/IGBBZGQgeW91ciBzZWNyZXQga2V5IGZyb20gaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2Rhc2hib2FyZC9hcGlrZXlzIGFzIHRoZSBcXGBMSVZFQkxPQ0tTX1NFQ1JFVF9LRVlcXGAgc2VjcmV0IGluIENvZGVTYW5kYm94LlxcbmAgK1xuICAgICAgYExlYXJuIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9saXZlYmxvY2tzL2xpdmVibG9ja3MvdHJlZS9tYWluL2V4YW1wbGVzL25leHRqcy1saXZlLWF2YXRhcnMjY29kZXNhbmRib3guYFxuICAgIDogYENyZWF0ZSBhbiBcXGAuZW52LmxvY2FsXFxgIGZpbGUgYW5kIGFkZCB5b3VyIHNlY3JldCBrZXkgZnJvbSBodHRwczovL2xpdmVibG9ja3MuaW8vZGFzaGJvYXJkL2FwaWtleXMgYXMgdGhlIFxcYExJVkVCTE9DS1NfU0VDUkVUX0tFWVxcYCBlbnZpcm9ubWVudCB2YXJpYWJsZS5cXG5gICtcbiAgICAgIGBMZWFybiBtb3JlOiBodHRwczovL2dpdGh1Yi5jb20vbGl2ZWJsb2Nrcy9saXZlYmxvY2tzL3RyZWUvbWFpbi9leGFtcGxlcy9uZXh0anMtbGl2ZS1hdmF0YXJzI2dldHRpbmctc3RhcnRlZC5gO1xuXG4gIGlmICghQVBJX0tFWSkge1xuICAgIGNvbnNvbGUud2FybihBUElfS0VZX1dBUk5JTkcpO1xuICB9XG5cbiAgcmV0dXJuIHsgcHJvcHM6IHt9IH07XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gZGVwbG95aW5nIGFuIGV4YW1wbGUgb24gbGl2ZWJsb2Nrcy5pby5cbiAqIFlvdSBjYW4gaWdub3JlIGl0IGNvbXBsZXRlbHkgaWYgeW91IHJ1biB0aGUgZXhhbXBsZSBsb2NhbGx5LlxuICovXG5mdW5jdGlvbiB1c2VPdmVycmlkZVJvb21JZChyb29tSWQ6IHN0cmluZykge1xuICBjb25zdCB7IHF1ZXJ5IH0gPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3Qgb3ZlcnJpZGVSb29tSWQgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcXVlcnk/LnJvb21JZCA/IGAke3Jvb21JZH0tJHtxdWVyeS5yb29tSWR9YCA6IHJvb21JZDtcbiAgfSwgW3F1ZXJ5LCByb29tSWRdKTtcblxuICByZXR1cm4gb3ZlcnJpZGVSb29tSWQ7XG59XG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VNZW1vIiwiTWVtb3JpemluZ0J1ZGR5IiwiUm9vbVByb3ZpZGVyIiwidXNlUm91dGVyIiwiUGFnZSIsInJvb21JZCIsInVzZU92ZXJyaWRlUm9vbUlkIiwiaWQiLCJxdWVyeSIsIm92ZXJyaWRlUm9vbUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./pages/index.tsx\n");

/***/ }),

/***/ "./node_modules/@liveblocks/client/index.mjs":
/*!***************************************************!*\
  !*** ./node_modules/@liveblocks/client/index.mjs ***!
  \***************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LiveList\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.q; },\n/* harmony export */   \"LiveMap\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.s; },\n/* harmony export */   \"LiveObject\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.L; },\n/* harmony export */   \"createClient\": function() { return /* binding */ createClient; }\n/* harmony export */ });\n/* harmony import */ var _shared_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shared.mjs */ \"./node_modules/@liveblocks/client/shared.mjs\");\n\n\nconst BACKOFF_RETRY_DELAYS = [250, 500, 1e3, 2e3, 4e3, 8e3, 1e4],\n  BACKOFF_RETRY_DELAYS_SLOW = [2e3, 3e4, 6e4, 3e5];\nfunction makeOthers(userMap) {\n  const users = Object.values(userMap).map((user) =>\n    (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__._)(user, [\"_hasReceivedInitialPresence\"])\n  );\n  return {\n    get count() {\n      return users.length;\n    },\n    [Symbol.iterator]: () => users[Symbol.iterator](),\n    map: (callback) => users.map(callback),\n    toArray: () => users,\n  };\n}\nfunction makeStateMachine(state, context, mockedEffects) {\n  const effects = mockedEffects || {\n    authenticate(auth, createWebSocket) {\n      const rawToken = state.token,\n        parsedToken = null !== rawToken && (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.p)(rawToken);\n      if (!parsedToken || (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.c)(parsedToken))\n        return auth(context.roomId)\n          .then(({ token: token }) => {\n            if (\"authenticating\" !== state.connection.state) return;\n            authenticationSuccess(\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.p)(token),\n              createWebSocket(token)\n            ),\n              (state.token = token);\n          })\n          .catch((er) =>\n            (function (error) {\n               true &&\n                console.error(\"Call to authentication endpoint failed\", error);\n              (state.token = null),\n                updateConnection({ state: \"unavailable\" }),\n                state.numberOfRetry++,\n                (state.timeoutHandles.reconnect = effects.scheduleReconnect(\n                  getRetryDelay()\n                ));\n            })(er instanceof Error ? er : new Error(String(er)))\n          );\n      authenticationSuccess(parsedToken, createWebSocket(rawToken));\n    },\n    send(messageOrMessages) {\n      if (null == state.socket)\n        throw new Error(\"Can't send message if socket is null\");\n      state.socket.send(JSON.stringify(messageOrMessages));\n    },\n    delayFlush: (delay) => setTimeout(tryFlushing, delay),\n    startHeartbeatInterval: () => setInterval(heartbeat, 3e4),\n    schedulePongTimeout: () => setTimeout(pongTimeout, 2e3),\n    scheduleReconnect: (delay) => setTimeout(connect, delay),\n  };\n  function genericSubscribe(callback) {\n    return (\n      state.listeners.storage.push(callback),\n      () => (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.r)(state.listeners.storage, callback)\n    );\n  }\n  function createOrUpdateRootFromMessage(message) {\n    if (0 === message.items.length)\n      throw new Error(\"Internal error: cannot load storage without items\");\n    state.root\n      ? (function (items) {\n          if (!state.root) return;\n          const currentItems = new Map();\n          state.items.forEach((liveCrdt, id) => {\n            currentItems.set(id, liveCrdt._toSerializedCrdt());\n          });\n          const ops = (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.g)(currentItems, new Map(items));\n          notify(apply(ops, !1).updates);\n        })(message.items)\n      : (state.root = (function (items) {\n          const [root, parentToChildren] = (function (items) {\n            const parentToChildren = new Map();\n            let root = null;\n            for (const [id, crdt] of items)\n              if ((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.k)(crdt)) root = [id, crdt];\n              else {\n                const tuple = [id, crdt],\n                  children = parentToChildren.get(crdt.parentId);\n                null != children\n                  ? children.push(tuple)\n                  : parentToChildren.set(crdt.parentId, [tuple]);\n              }\n            if (null == root) throw new Error(\"Root can't be null\");\n            return [root, parentToChildren];\n          })(items);\n          return _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.L._deserialize(root, parentToChildren, {\n            getItem: getItem,\n            addItem: addItem,\n            deleteItem: deleteItem,\n            generateId: generateId,\n            generateOpId: generateOpId,\n            dispatch: storageDispatch,\n            roomId: context.roomId,\n          });\n        })(message.items));\n    for (const key in state.defaultStorageRoot)\n      null == state.root.get(key) &&\n        state.root.set(key, state.defaultStorageRoot[key]);\n  }\n  function addItem(id, liveItem) {\n    state.items.set(id, liveItem);\n  }\n  function deleteItem(id) {\n    state.items.delete(id);\n  }\n  function getItem(id) {\n    return state.items.get(id);\n  }\n  function addToUndoStack(historyItem) {\n    state.undoStack.length >= 50 && state.undoStack.shift(),\n      state.isHistoryPaused\n        ? state.pausedHistory.unshift(...historyItem)\n        : state.undoStack.push(historyItem);\n  }\n  function storageDispatch(ops, reverse, storageUpdates) {\n    state.isBatching\n      ? (state.batch.ops.push(...ops),\n        storageUpdates.forEach((value, key) => {\n          state.batch.updates.storageUpdates.set(\n            key,\n            (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.m)(\n              state.batch.updates.storageUpdates.get(key),\n              value\n            )\n          );\n        }),\n        state.batch.reverseOps.push(...reverse))\n      : (addToUndoStack(reverse),\n        (state.redoStack = []),\n        dispatch(ops),\n        notify({ storageUpdates: storageUpdates }));\n  }\n  function notify({\n    storageUpdates: storageUpdates = new Map(),\n    presence: presence = !1,\n    others: otherEvents = [],\n  }) {\n    if (otherEvents.length > 0) {\n      state.others = makeOthers(state.users);\n      for (const event of otherEvents)\n        for (const listener of state.listeners.others)\n          listener(state.others, event);\n    }\n    if (presence)\n      for (const listener of state.listeners[\"my-presence\"]) listener(state.me);\n    if (storageUpdates.size > 0)\n      for (const subscriber of state.listeners.storage)\n        subscriber(Array.from(storageUpdates.values()));\n  }\n  function getConnectionId() {\n    if (\n      \"open\" === state.connection.state ||\n      \"connecting\" === state.connection.state\n    )\n      return state.connection.id;\n    if (null !== state.lastConnectionId) return state.lastConnectionId;\n    throw new Error(\n      \"Internal. Tried to get connection id but connection was never open\"\n    );\n  }\n  function generateId() {\n    return `${getConnectionId()}:${state.clock++}`;\n  }\n  function generateOpId() {\n    return `${getConnectionId()}:${state.opClock++}`;\n  }\n  function apply(item, isLocal) {\n    const result = {\n        reverse: [],\n        updates: { storageUpdates: new Map(), presence: !1 },\n      },\n      createdNodeIds = new Set();\n    for (const op of item)\n      if (\"presence\" === op.type) {\n        const reverse = { type: \"presence\", data: {} };\n        for (const key in op.data) reverse.data[key] = state.me[key];\n        if (\n          ((state.me = Object.assign(Object.assign({}, state.me), op.data)),\n          null == state.buffer.presence)\n        )\n          state.buffer.presence = op.data;\n        else\n          for (const key in op.data) state.buffer.presence[key] = op.data[key];\n        result.reverse.unshift(reverse), (result.updates.presence = !0);\n      } else {\n        let source;\n        if ((op.opId || (op.opId = generateOpId()), isLocal))\n          source = _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.O.UNDOREDO_RECONNECT;\n        else {\n          source = state.offlineOperations.delete((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(op.opId))\n            ? _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.O.ACK\n            : _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.O.REMOTE;\n        }\n        const applyOpResult = applyOp(op, source);\n        if (applyOpResult.modified) {\n          const parentId =\n            \"HasParent\" === applyOpResult.modified.node.parent.type\n              ? (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(\n                  applyOpResult.modified.node.parent.node._id,\n                  \"Expected parent node to have an ID\"\n                )\n              : void 0;\n          (parentId && createdNodeIds.has(parentId)) ||\n            (result.updates.storageUpdates.set(\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(applyOpResult.modified.node._id),\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.m)(\n                result.updates.storageUpdates.get(\n                  (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(applyOpResult.modified.node._id)\n                ),\n                applyOpResult.modified\n              )\n            ),\n            result.reverse.unshift(...applyOpResult.reverse)),\n            (op.type !== _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_LIST &&\n              op.type !== _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_MAP &&\n              op.type !== _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_OBJECT) ||\n              createdNodeIds.add((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(applyOpResult.modified.node._id));\n        }\n      }\n    return result;\n  }\n  function applyOp(op, source) {\n    switch (op.type) {\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.DELETE_OBJECT_KEY:\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.UPDATE_OBJECT:\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.DELETE_CRDT: {\n        const item = state.items.get(op.id);\n        return null == item\n          ? { modified: !1 }\n          : item._apply(op, source === _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.O.UNDOREDO_RECONNECT);\n      }\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.SET_PARENT_KEY: {\n        const item = state.items.get(op.id);\n        return null == item\n          ? { modified: !1 }\n          : \"HasParent\" === item.parent.type && (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(item.parent.node)\n          ? item.parent.node._setChildKey(op.parentKey, item, source)\n          : { modified: !1 };\n      }\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_OBJECT:\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_LIST:\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_MAP:\n      case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e.CREATE_REGISTER: {\n        if (void 0 === op.parentId) return { modified: !1 };\n        const parent = state.items.get(op.parentId);\n        return null == parent\n          ? { modified: !1 }\n          : parent._attachChild(op, source);\n      }\n    }\n  }\n  function connect() {\n    var _a, _b, _c, _d;\n    if (\n      \"closed\" !== state.connection.state &&\n      \"unavailable\" !== state.connection.state\n    )\n      return null;\n    const auth = (function (authentication, fetchPolyfill) {\n        if (\"public\" === authentication.type) {\n          if (\"undefined\" == typeof window && null == fetchPolyfill)\n            throw new Error(\n              \"To use Liveblocks client in a non-dom environment with a publicApiKey, you need to provide a fetch polyfill.\"\n            );\n          return (room) =>\n            fetchAuthEndpoint(fetchPolyfill || fetch, authentication.url, {\n              room: room,\n              publicApiKey: authentication.publicApiKey,\n            });\n        }\n        if (\"private\" === authentication.type) {\n          if (\"undefined\" == typeof window && null == fetchPolyfill)\n            throw new Error(\n              \"To use Liveblocks client in a non-dom environment with a url as auth endpoint, you need to provide a fetch polyfill.\"\n            );\n          return (room) =>\n            fetchAuthEndpoint(fetchPolyfill || fetch, authentication.url, {\n              room: room,\n            });\n        }\n        if (\"custom\" === authentication.type) {\n          return (room) =>\n            authentication.callback(room).then((response) => {\n              if (!response || !response.token)\n                throw new Error(\n                  'Authentication error. We expect the authentication callback to return a token, but it does not. Hint: the return value should look like: { token: \"...\" }'\n                );\n              return response;\n            });\n        }\n        throw new Error(\"Internal error. Unexpected authentication type\");\n      })(\n        context.authentication,\n        null !==\n          (_b =\n            null === (_a = context.polyfills) || void 0 === _a\n              ? void 0\n              : _a.fetch) && void 0 !== _b\n          ? _b\n          : context.fetchPolyfill\n      ),\n      createWebSocket = (function (liveblocksServer, WebSocketPolyfill) {\n        if (\"undefined\" == typeof window && null == WebSocketPolyfill)\n          throw new Error(\n            \"To use Liveblocks client in a non-dom environment, you need to provide a WebSocket polyfill.\"\n          );\n        const ws = WebSocketPolyfill || WebSocket;\n        return (token) =>\n          new ws(`${liveblocksServer}/?token=${token}&version=0.17.6`);\n      })(\n        context.liveblocksServer,\n        null !==\n          (_d =\n            null === (_c = context.polyfills) || void 0 === _c\n              ? void 0\n              : _c.WebSocket) && void 0 !== _d\n          ? _d\n          : context.WebSocketPolyfill\n      );\n    updateConnection({ state: \"authenticating\" }),\n      effects.authenticate(auth, createWebSocket);\n  }\n  function authenticationSuccess(token, socket) {\n    socket.addEventListener(\"message\", onMessage),\n      socket.addEventListener(\"open\", onOpen),\n      socket.addEventListener(\"close\", onClose),\n      socket.addEventListener(\"error\", onError),\n      updateConnection({\n        state: \"connecting\",\n        id: token.actor,\n        userInfo: token.info,\n        userId: token.id,\n      }),\n      (state.idFactory = (function (connectionId) {\n        let count = 0;\n        return () => `${connectionId}:${count++}`;\n      })(token.actor)),\n      (state.socket = socket);\n  }\n  function onUpdatePresenceMessage(message) {\n    const user = state.users[message.actor];\n    if (\n      void 0 !== message.targetActor ||\n      null == user ||\n      user._hasReceivedInitialPresence\n    )\n      return (\n        (state.users[message.actor] =\n          null == user\n            ? {\n                connectionId: message.actor,\n                presence: message.data,\n                id: void 0,\n                info: void 0,\n                _hasReceivedInitialPresence: !0,\n              }\n            : {\n                id: user.id,\n                info: user.info,\n                connectionId: message.actor,\n                presence: Object.assign(\n                  Object.assign({}, user.presence),\n                  message.data\n                ),\n                _hasReceivedInitialPresence: !0,\n              }),\n        {\n          type: \"update\",\n          updates: message.data,\n          user: state.users[message.actor],\n        }\n      );\n  }\n  function onUserLeftMessage(message) {\n    const userLeftMessage = message,\n      user = state.users[userLeftMessage.actor];\n    return user\n      ? (delete state.users[userLeftMessage.actor],\n        { type: \"leave\", user: user })\n      : null;\n  }\n  function onRoomStateMessage(message) {\n    const newUsers = {};\n    for (const key in message.users) {\n      const connectionId = Number.parseInt(key),\n        user = message.users[key];\n      newUsers[connectionId] = {\n        connectionId: connectionId,\n        info: user.info,\n        id: user.id,\n      };\n    }\n    return (state.users = newUsers), { type: \"reset\" };\n  }\n  function onEvent(message) {\n    for (const listener of state.listeners.event)\n      listener({ connectionId: message.actor, event: message.event });\n  }\n  function onUserJoinedMessage(message) {\n    return (\n      (state.users[message.actor] = {\n        connectionId: message.actor,\n        info: message.info,\n        id: message.id,\n        _hasReceivedInitialPresence: !0,\n      }),\n      state.me &&\n        (state.buffer.messages.push({\n          type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.UPDATE_PRESENCE,\n          data: state.me,\n          targetActor: message.actor,\n        }),\n        tryFlushing()),\n      { type: \"enter\", user: state.users[message.actor] }\n    );\n  }\n  function parseServerMessage(data) {\n    return (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.l)(data) ? data : null;\n  }\n  function onMessage(event) {\n    if (\"pong\" === event.data)\n      return void clearTimeout(state.timeoutHandles.pongTimeout);\n    const messages = (function (text) {\n      const data = (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.t)(text);\n      return void 0 === data\n        ? null\n        : (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.h)(data)\n        ? (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.j)(data.map((item) => parseServerMessage(item)))\n        : (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.j)([parseServerMessage(data)]);\n    })(event.data);\n    if (null === messages || 0 === messages.length) return;\n    const updates = { storageUpdates: new Map(), others: [] };\n    for (const message of messages)\n      switch (message.type) {\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.USER_JOINED:\n          updates.others.push(onUserJoinedMessage(message));\n          break;\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.UPDATE_PRESENCE: {\n          const othersPresenceUpdate = onUpdatePresenceMessage(message);\n          othersPresenceUpdate && updates.others.push(othersPresenceUpdate);\n          break;\n        }\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.BROADCASTED_EVENT:\n          onEvent(message);\n          break;\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.USER_LEFT: {\n          const event = onUserLeftMessage(message);\n          event && updates.others.push(event);\n          break;\n        }\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.ROOM_STATE:\n          updates.others.push(onRoomStateMessage(message));\n          break;\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.INITIAL_STORAGE_STATE: {\n          const offlineOps = new Map(state.offlineOperations);\n          createOrUpdateRootFromMessage(message),\n            applyAndSendOfflineOps(offlineOps),\n            null == _getInitialStateResolver || _getInitialStateResolver();\n          break;\n        }\n        case _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S.UPDATE_STORAGE:\n          apply(message.ops, !1).updates.storageUpdates.forEach(\n            (value, key) => {\n              updates.storageUpdates.set(\n                key,\n                (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.m)(updates.storageUpdates.get(key), value)\n              );\n            }\n          );\n          break;\n      }\n    notify(updates);\n  }\n  function onClose(event) {\n    if (\n      ((state.socket = null),\n      clearTimeout(state.timeoutHandles.pongTimeout),\n      clearInterval(state.intervalHandles.heartbeat),\n      state.timeoutHandles.flush && clearTimeout(state.timeoutHandles.flush),\n      clearTimeout(state.timeoutHandles.reconnect),\n      (state.users = {}),\n      notify({ others: [{ type: \"reset\" }] }),\n      event.code >= 4e3 && event.code <= 4100)\n    ) {\n      updateConnection({ state: \"failed\" });\n      const error = new LiveblocksError(event.reason, event.code);\n      for (const listener of state.listeners.error) listener(error);\n      const delay = getRetryDelay(!0);\n      state.numberOfRetry++,\n         true &&\n          console.error(\n            `Connection to Liveblocks websocket server closed. Reason: ${error.message} (code: ${error.code}). Retrying in ${delay}ms.`\n          ),\n        updateConnection({ state: \"unavailable\" }),\n        (state.timeoutHandles.reconnect = effects.scheduleReconnect(delay));\n    } else if (event.code === _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.W.CLOSE_WITHOUT_RETRY)\n      updateConnection({ state: \"closed\" });\n    else {\n      const delay = getRetryDelay();\n      state.numberOfRetry++,\n         true &&\n          console.warn(\n            `Connection to Liveblocks websocket server closed (code: ${event.code}). Retrying in ${delay}ms.`\n          ),\n        updateConnection({ state: \"unavailable\" }),\n        (state.timeoutHandles.reconnect = effects.scheduleReconnect(delay));\n    }\n  }\n  function updateConnection(connection) {\n    state.connection = connection;\n    for (const listener of state.listeners.connection)\n      listener(connection.state);\n  }\n  function getRetryDelay(slow = !1) {\n    return slow\n      ? BACKOFF_RETRY_DELAYS_SLOW[\n          state.numberOfRetry < BACKOFF_RETRY_DELAYS_SLOW.length\n            ? state.numberOfRetry\n            : BACKOFF_RETRY_DELAYS_SLOW.length - 1\n        ]\n      : BACKOFF_RETRY_DELAYS[\n          state.numberOfRetry < BACKOFF_RETRY_DELAYS.length\n            ? state.numberOfRetry\n            : BACKOFF_RETRY_DELAYS.length - 1\n        ];\n  }\n  function onError() {}\n  function onOpen() {\n    clearInterval(state.intervalHandles.heartbeat),\n      (state.intervalHandles.heartbeat = effects.startHeartbeatInterval()),\n      \"connecting\" === state.connection.state &&\n        (updateConnection(\n          Object.assign(Object.assign({}, state.connection), { state: \"open\" })\n        ),\n        (state.numberOfRetry = 0),\n        void 0 !== state.lastConnectionId &&\n          ((state.buffer.presence = state.me), tryFlushing()),\n        (state.lastConnectionId = state.connection.id),\n        state.root &&\n          state.buffer.messages.push({ type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.FETCH_STORAGE }),\n        tryFlushing());\n  }\n  function heartbeat() {\n    null != state.socket &&\n      (clearTimeout(state.timeoutHandles.pongTimeout),\n      (state.timeoutHandles.pongTimeout = effects.schedulePongTimeout()),\n      state.socket.readyState === state.socket.OPEN &&\n        state.socket.send(\"ping\"));\n  }\n  function pongTimeout() {\n    reconnect();\n  }\n  function reconnect() {\n    state.socket &&\n      (state.socket.removeEventListener(\"open\", onOpen),\n      state.socket.removeEventListener(\"message\", onMessage),\n      state.socket.removeEventListener(\"close\", onClose),\n      state.socket.removeEventListener(\"error\", onError),\n      state.socket.close(),\n      (state.socket = null)),\n      updateConnection({ state: \"unavailable\" }),\n      clearTimeout(state.timeoutHandles.pongTimeout),\n      state.timeoutHandles.flush && clearTimeout(state.timeoutHandles.flush),\n      clearTimeout(state.timeoutHandles.reconnect),\n      clearInterval(state.intervalHandles.heartbeat),\n      connect();\n  }\n  function applyAndSendOfflineOps(offlineOps) {\n    if (0 === offlineOps.size) return;\n    const messages = [],\n      ops = Array.from(offlineOps.values()),\n      result = apply(ops, !0);\n    messages.push({ type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.UPDATE_STORAGE, ops: ops }),\n      notify(result.updates),\n      effects.send(messages);\n  }\n  function tryFlushing() {\n    const storageOps = state.buffer.storageOperations;\n    if (\n      (storageOps.length > 0 &&\n        storageOps.forEach((op) => {\n          state.offlineOperations.set((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(op.opId), op);\n        }),\n      null == state.socket || state.socket.readyState !== state.socket.OPEN)\n    )\n      return void (state.buffer.storageOperations = []);\n    const now = Date.now();\n    if (now - state.lastFlushTime > context.throttleDelay) {\n      const messages = (function (state) {\n        const messages = [];\n        state.buffer.presence &&\n          messages.push({\n            type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.UPDATE_PRESENCE,\n            data: state.buffer.presence,\n          });\n        for (const event of state.buffer.messages) messages.push(event);\n        state.buffer.storageOperations.length > 0 &&\n          messages.push({\n            type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.UPDATE_STORAGE,\n            ops: state.buffer.storageOperations,\n          });\n        return messages;\n      })(state);\n      if (0 === messages.length) return;\n      effects.send(messages),\n        (state.buffer = {\n          messages: [],\n          storageOperations: [],\n          presence: null,\n        }),\n        (state.lastFlushTime = now);\n    } else\n      null != state.timeoutHandles.flush &&\n        clearTimeout(state.timeoutHandles.flush),\n        (state.timeoutHandles.flush = effects.delayFlush(\n          context.throttleDelay - (now - state.lastFlushTime)\n        ));\n  }\n  function getPresence() {\n    return state.me;\n  }\n  function dispatch(ops) {\n    state.buffer.storageOperations.push(...ops), tryFlushing();\n  }\n  let _getInitialStatePromise = null,\n    _getInitialStateResolver = null;\n  return {\n    onClose: onClose,\n    onMessage: onMessage,\n    authenticationSuccess: authenticationSuccess,\n    heartbeat: heartbeat,\n    onNavigatorOnline: function () {\n      \"unavailable\" === state.connection.state && reconnect();\n    },\n    simulateSocketClose: function () {\n      state.socket && (state.socket = null);\n    },\n    simulateSendCloseEvent: function (event) {\n      onClose(event);\n    },\n    onVisibilityChange: function (visibilityState) {\n      \"visible\" === visibilityState &&\n        \"open\" === state.connection.state &&\n        heartbeat();\n    },\n    getUndoStack: () => state.undoStack,\n    getItemsCount: () => state.items.size,\n    connect: connect,\n    disconnect: function () {\n      state.socket &&\n        (state.socket.removeEventListener(\"open\", onOpen),\n        state.socket.removeEventListener(\"message\", onMessage),\n        state.socket.removeEventListener(\"close\", onClose),\n        state.socket.removeEventListener(\"error\", onError),\n        state.socket.close(),\n        (state.socket = null)),\n        updateConnection({ state: \"closed\" }),\n        state.timeoutHandles.flush && clearTimeout(state.timeoutHandles.flush),\n        clearTimeout(state.timeoutHandles.reconnect),\n        clearTimeout(state.timeoutHandles.pongTimeout),\n        clearInterval(state.intervalHandles.heartbeat),\n        (state.users = {}),\n        notify({ others: [{ type: \"reset\" }] }),\n        (function () {\n          for (const key in state.listeners) state.listeners[key] = [];\n        })();\n    },\n    subscribe: function (first, second, options) {\n      if (void 0 === second || \"function\" == typeof first) {\n        if (\"function\" == typeof first) {\n          return genericSubscribe(first);\n        }\n        throw new Error(\"Please specify a listener callback\");\n      }\n      if ((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.i)(first)) {\n        const node = first;\n        if (null == options ? void 0 : options.isDeep) {\n          return (function (node, callback) {\n            return genericSubscribe((updates) => {\n              const relatedUpdates = updates.filter((update) =>\n                (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.d)(update.node, node)\n              );\n              relatedUpdates.length > 0 && callback(relatedUpdates);\n            });\n          })(node, second);\n        }\n        return (function (node, callback) {\n          return genericSubscribe((updates) => {\n            for (const update of updates)\n              update.node._id === node._id && callback(update.node);\n          });\n        })(node, second);\n      }\n      if (!(0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.a)(first))\n        throw new Error(`\"${first}\" is not a valid event name`);\n      const eventName = first,\n        eventListener = second;\n      return (\n        state.listeners[eventName].push(eventListener),\n        () => {\n          const callbacks = state.listeners[eventName];\n          (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.r)(callbacks, eventListener);\n        }\n      );\n    },\n    updatePresence: function (overrides, options) {\n      const oldValues = {};\n      null == state.buffer.presence && (state.buffer.presence = {});\n      for (const key in overrides) {\n        const overrideValue = overrides[key];\n        void 0 !== overrideValue &&\n          ((state.buffer.presence[key] = overrideValue),\n          (oldValues[key] = state.me[key]));\n      }\n      (state.me = Object.assign(Object.assign({}, state.me), overrides)),\n        state.isBatching\n          ? ((null == options ? void 0 : options.addToHistory) &&\n              state.batch.reverseOps.push({\n                type: \"presence\",\n                data: oldValues,\n              }),\n            (state.batch.updates.presence = !0))\n          : (tryFlushing(),\n            (null == options ? void 0 : options.addToHistory) &&\n              addToUndoStack([{ type: \"presence\", data: oldValues }]),\n            notify({ presence: !0 }));\n    },\n    broadcastEvent: function (\n      event,\n      options = { shouldQueueEventIfNotReady: !1 }\n    ) {\n      (null == state.socket && 0 == options.shouldQueueEventIfNotReady) ||\n        (state.buffer.messages.push({\n          type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.BROADCAST_EVENT,\n          event: event,\n        }),\n        tryFlushing());\n    },\n    batch: function (callback) {\n      if (state.isBatching)\n        throw new Error(\"batch should not be called during a batch\");\n      state.isBatching = !0;\n      try {\n        callback();\n      } finally {\n        (state.isBatching = !1),\n          state.batch.reverseOps.length > 0 &&\n            addToUndoStack(state.batch.reverseOps),\n          state.batch.ops.length > 0 && (state.redoStack = []),\n          state.batch.ops.length > 0 && dispatch(state.batch.ops),\n          notify(state.batch.updates),\n          (state.batch = {\n            ops: [],\n            reverseOps: [],\n            updates: { others: [], storageUpdates: new Map(), presence: !1 },\n          }),\n          tryFlushing();\n      }\n    },\n    undo: function () {\n      if (state.isBatching)\n        throw new Error(\"undo is not allowed during a batch\");\n      const historyItem = state.undoStack.pop();\n      if (null == historyItem) return;\n      state.isHistoryPaused = !1;\n      const result = apply(historyItem, !0);\n      notify(result.updates), state.redoStack.push(result.reverse);\n      for (const op of historyItem)\n        \"presence\" !== op.type && state.buffer.storageOperations.push(op);\n      tryFlushing();\n    },\n    redo: function () {\n      if (state.isBatching)\n        throw new Error(\"redo is not allowed during a batch\");\n      const historyItem = state.redoStack.pop();\n      if (null == historyItem) return;\n      state.isHistoryPaused = !1;\n      const result = apply(historyItem, !0);\n      notify(result.updates), state.undoStack.push(result.reverse);\n      for (const op of historyItem)\n        \"presence\" !== op.type && state.buffer.storageOperations.push(op);\n      tryFlushing();\n    },\n    pauseHistory: function () {\n      (state.pausedHistory = []), (state.isHistoryPaused = !0);\n    },\n    resumeHistory: function () {\n      (state.isHistoryPaused = !1),\n        state.pausedHistory.length > 0 && addToUndoStack(state.pausedHistory),\n        (state.pausedHistory = []);\n    },\n    getStorage: function () {\n      return state.root\n        ? new Promise((resolve) => resolve({ root: state.root }))\n        : (null == _getInitialStatePromise &&\n            (state.buffer.messages.push({ type: _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C.FETCH_STORAGE }),\n            tryFlushing(),\n            (_getInitialStatePromise = new Promise(\n              (resolve) => (_getInitialStateResolver = resolve)\n            ))),\n          _getInitialStatePromise.then(() => ({ root: (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n)(state.root) })));\n    },\n    selectors: {\n      getConnectionState: function () {\n        return state.connection.state;\n      },\n      getSelf: function () {\n        return \"open\" === state.connection.state ||\n          \"connecting\" === state.connection.state\n          ? {\n              connectionId: state.connection.id,\n              id: state.connection.userId,\n              info: state.connection.userInfo,\n              presence: getPresence(),\n            }\n          : null;\n      },\n      getPresence: getPresence,\n      getOthers: function () {\n        return state.others;\n      },\n    },\n  };\n}\nfunction createRoom(options, context) {\n  var _a, _b;\n  const initialPresence =\n      null !== (_a = options.initialPresence) && void 0 !== _a\n        ? _a\n        : options.defaultPresence,\n    initialStorage =\n      null !== (_b = options.initialStorage) && void 0 !== _b\n        ? _b\n        : options.defaultStorageRoot,\n    machine = makeStateMachine(\n      (function (initialPresence, initialStorage) {\n        return {\n          connection: { state: \"closed\" },\n          token: null,\n          lastConnectionId: null,\n          socket: null,\n          listeners: {\n            event: [],\n            others: [],\n            \"my-presence\": [],\n            error: [],\n            connection: [],\n            storage: [],\n          },\n          numberOfRetry: 0,\n          lastFlushTime: 0,\n          timeoutHandles: { flush: null, reconnect: 0, pongTimeout: 0 },\n          buffer: {\n            presence: null == initialPresence ? {} : initialPresence,\n            messages: [],\n            storageOperations: [],\n          },\n          intervalHandles: { heartbeat: 0 },\n          me: null == initialPresence ? {} : initialPresence,\n          users: {},\n          others: makeOthers({}),\n          defaultStorageRoot: initialStorage,\n          idFactory: null,\n          clock: 0,\n          opClock: 0,\n          items: new Map(),\n          root: void 0,\n          undoStack: [],\n          redoStack: [],\n          isHistoryPaused: !1,\n          pausedHistory: [],\n          isBatching: !1,\n          batch: {\n            ops: [],\n            updates: { storageUpdates: new Map(), presence: !1, others: [] },\n            reverseOps: [],\n          },\n          offlineOperations: new Map(),\n        };\n      })(\n        \"function\" == typeof initialPresence\n          ? initialPresence(context.roomId)\n          : initialPresence,\n        \"function\" == typeof initialStorage\n          ? initialStorage(context.roomId)\n          : initialStorage\n      ),\n      context\n    ),\n    room = {\n      id: context.roomId,\n      getConnectionState: machine.selectors.getConnectionState,\n      getSelf: machine.selectors.getSelf,\n      subscribe: machine.subscribe,\n      getPresence: machine.selectors.getPresence,\n      updatePresence: machine.updatePresence,\n      getOthers: machine.selectors.getOthers,\n      broadcastEvent: machine.broadcastEvent,\n      getStorage: machine.getStorage,\n      batch: machine.batch,\n      history: {\n        undo: machine.undo,\n        redo: machine.redo,\n        pause: machine.pauseHistory,\n        resume: machine.resumeHistory,\n      },\n      __INTERNAL_DO_NOT_USE: {\n        simulateCloseWebsocket: machine.simulateSocketClose,\n        simulateSendCloseEvent: machine.simulateSendCloseEvent,\n      },\n    };\n  return {\n    connect: machine.connect,\n    disconnect: machine.disconnect,\n    onNavigatorOnline: machine.onNavigatorOnline,\n    onVisibilityChange: machine.onVisibilityChange,\n    room: room,\n  };\n}\nclass LiveblocksError extends Error {\n  constructor(message, code) {\n    super(message), (this.code = code);\n  }\n}\nfunction fetchAuthEndpoint(fetch, endpoint, body) {\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(body),\n  })\n    .then((res) => {\n      if (!res.ok)\n        throw new AuthenticationError(\n          `Expected a status 200 but got ${res.status} when doing a POST request on \"${endpoint}\"`\n        );\n      return res.json().catch((er) => {\n        throw new AuthenticationError(\n          `Expected a JSON response when doing a POST request on \"${endpoint}\". ${er}`\n        );\n      });\n    })\n    .then((data) => {\n      if (!(0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(data) || \"string\" != typeof data.token)\n        throw new AuthenticationError(\n          `Expected a JSON response of the form \\`{ token: \"...\" }\\` when doing a POST request on \"${endpoint}\", but got ${JSON.stringify(\n            data\n          )}`\n        );\n      const { token: token } = data;\n      return { token: token };\n    });\n}\nclass AuthenticationError extends Error {\n  constructor(message) {\n    super(message);\n  }\n}\nfunction createClient(options) {\n  const clientOptions = options,\n    throttleDelay = (function (options) {\n      if (void 0 === options.throttle) return 100;\n      if (\n        \"number\" != typeof options.throttle ||\n        options.throttle < 80 ||\n        options.throttle > 1e3\n      )\n        throw new Error(\"throttle should be a number between 80 and 1000.\");\n      return options.throttle;\n    })(options),\n    rooms = new Map();\n  return (\n    \"undefined\" != typeof window &&\n      void 0 !== window.addEventListener &&\n      window.addEventListener(\"online\", () => {\n        for (const [, room] of rooms) room.onNavigatorOnline();\n      }),\n    \"undefined\" != typeof document &&\n      document.addEventListener(\"visibilitychange\", () => {\n        for (const [, room] of rooms)\n          room.onVisibilityChange(document.visibilityState);\n      }),\n    {\n      getRoom: function (roomId) {\n        const internalRoom = rooms.get(roomId);\n        return internalRoom ? internalRoom.room : null;\n      },\n      enter: function (roomId, options = {}) {\n        var _a;\n        let internalRoom = rooms.get(roomId);\n        if (internalRoom) return internalRoom.room;\n        if (\n          ((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.o)(\n            options.defaultPresence,\n            \"Argument `defaultPresence` will be removed in @liveblocks/client 0.18. Please use `initialPresence` instead. For more info, see https://bit.ly/3Niy5aP\"\n          ),\n          (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.o)(\n            options.defaultStorageRoot,\n            \"Argument `defaultStorageRoot` will be removed in @liveblocks/client 0.18. Please use `initialStorage` instead. For more info, see https://bit.ly/3Niy5aP\"\n          ),\n          (internalRoom = createRoom(\n            {\n              initialPresence: options.initialPresence,\n              initialStorage: options.initialStorage,\n              defaultPresence: options.defaultPresence,\n              defaultStorageRoot: options.defaultStorageRoot,\n            },\n            {\n              roomId: roomId,\n              throttleDelay: throttleDelay,\n              polyfills: clientOptions.polyfills,\n              WebSocketPolyfill: clientOptions.WebSocketPolyfill,\n              fetchPolyfill: clientOptions.fetchPolyfill,\n              liveblocksServer:\n                (null == clientOptions\n                  ? void 0\n                  : clientOptions.liveblocksServer) ||\n                \"wss://liveblocks.net/v6\",\n              authentication: prepareAuthentication(clientOptions),\n            }\n          )),\n          rooms.set(roomId, internalRoom),\n          !options.DO_NOT_USE_withoutConnecting)\n        ) {\n          if (\"undefined\" == typeof atob) {\n            if (\n              null ==\n              (null === (_a = clientOptions.polyfills) || void 0 === _a\n                ? void 0\n                : _a.atob)\n            )\n              throw new Error(\n                \"You need to polyfill atob to use the client in your environment. Please follow the instructions at https://liveblocks.io/docs/errors/liveblocks-client/atob-polyfill\"\n              );\n            global.atob = clientOptions.polyfills.atob;\n          }\n          internalRoom.connect();\n        }\n        return internalRoom.room;\n      },\n      leave: function (roomId) {\n        const room = rooms.get(roomId);\n        room && (room.disconnect(), rooms.delete(roomId));\n      },\n    }\n  );\n}\nfunction prepareAuthentication(clientOptions) {\n  const { publicApiKey: publicApiKey, authEndpoint: authEndpoint } =\n    clientOptions;\n  if (void 0 !== authEndpoint && void 0 !== publicApiKey)\n    throw new Error(\n      \"You cannot use both publicApiKey and authEndpoint. Please use either publicApiKey or authEndpoint, but not both. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient\"\n    );\n  if (\"string\" == typeof publicApiKey) {\n    if (publicApiKey.startsWith(\"sk_\"))\n      throw new Error(\n        \"Invalid publicApiKey. You are using the secret key which is not supported. Please use the public key instead. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey\"\n      );\n    if (!publicApiKey.startsWith(\"pk_\"))\n      throw new Error(\n        \"Invalid key. Please use the public key format: pk_<public key>. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientPublicKey\"\n      );\n    return {\n      type: \"public\",\n      publicApiKey: publicApiKey,\n      url:\n        clientOptions.publicAuthorizeEndpoint ||\n        \"https://liveblocks.io/api/public/authorize\",\n    };\n  }\n  if (\"string\" == typeof authEndpoint)\n    return { type: \"private\", url: authEndpoint };\n  if (\"function\" == typeof authEndpoint)\n    return { type: \"custom\", callback: authEndpoint };\n  if (void 0 !== authEndpoint)\n    throw new Error(\n      \"authEndpoint must be a string or a function. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientAuthEndpoint\"\n    );\n  throw new Error(\n    \"Invalid Liveblocks client options. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClient\"\n  );\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGxpdmVibG9ja3MvY2xpZW50L2luZGV4Lm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQXlCc0I7QUFDc0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDhDQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLDhDQUFrQjtBQUM3RCwwQkFBMEIsOENBQWM7QUFDeEM7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0EsY0FBYyw4Q0FBa0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxjQUFjLEtBQXFDO0FBQ25EO0FBQ0E7QUFDQSxtQ0FBbUMsc0JBQXNCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksOENBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxzQkFBc0IsOENBQXNCO0FBQzVDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsOENBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLGlCQUFpQix1REFBdUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlEQUF5RDtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDd0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BsaXZlYmxvY2tzL2NsaWVudC9pbmRleC5tanM/ZDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBfIGFzIF9fcmVzdCxcbiAgciBhcyByZW1vdmUsXG4gIGkgYXMgaXNMaXZlTm9kZSxcbiAgYSBhcyBpc1Jvb21FdmVudE5hbWUsXG4gIFMgYXMgU2VydmVyTXNnQ29kZSxcbiAgbSBhcyBtZXJnZVN0b3JhZ2VVcGRhdGVzLFxuICBXIGFzIFdlYnNvY2tldENsb3NlQ29kZXMsXG4gIEMgYXMgQ2xpZW50TXNnQ29kZSxcbiAgbiBhcyBubixcbiAgYiBhcyBpc1BsYWluT2JqZWN0LFxuICBwIGFzIHBhcnNlUm9vbUF1dGhUb2tlbixcbiAgYyBhcyBpc1Rva2VuRXhwaXJlZCxcbiAgZCBhcyBpc1NhbWVOb2RlT3JDaGlsZE9mLFxuICBMIGFzIExpdmVPYmplY3QsXG4gIGcgYXMgZ2V0VHJlZXNEaWZmT3BlcmF0aW9ucyxcbiAgTyBhcyBPcFNvdXJjZSxcbiAgZSBhcyBPcENvZGUsXG4gIGYgYXMgaXNMaXZlTGlzdCxcbiAgdCBhcyB0cnlQYXJzZUpzb24sXG4gIGggYXMgaXNKc29uQXJyYXksXG4gIGogYXMgY29tcGFjdCxcbiAgayBhcyBpc1Jvb3RDcmR0LFxuICBsIGFzIGlzSnNvbk9iamVjdCxcbiAgbyBhcyBlcnJvcklmLFxufSBmcm9tIFwiLi9zaGFyZWQubWpzXCI7XG5leHBvcnQgeyBxIGFzIExpdmVMaXN0LCBzIGFzIExpdmVNYXAsIEwgYXMgTGl2ZU9iamVjdCB9IGZyb20gXCIuL3NoYXJlZC5tanNcIjtcbmNvbnN0IEJBQ0tPRkZfUkVUUllfREVMQVlTID0gWzI1MCwgNTAwLCAxZTMsIDJlMywgNGUzLCA4ZTMsIDFlNF0sXG4gIEJBQ0tPRkZfUkVUUllfREVMQVlTX1NMT1cgPSBbMmUzLCAzZTQsIDZlNCwgM2U1XTtcbmZ1bmN0aW9uIG1ha2VPdGhlcnModXNlck1hcCkge1xuICBjb25zdCB1c2VycyA9IE9iamVjdC52YWx1ZXModXNlck1hcCkubWFwKCh1c2VyKSA9PlxuICAgIF9fcmVzdCh1c2VyLCBbXCJfaGFzUmVjZWl2ZWRJbml0aWFsUHJlc2VuY2VcIl0pXG4gICk7XG4gIHJldHVybiB7XG4gICAgZ2V0IGNvdW50KCkge1xuICAgICAgcmV0dXJuIHVzZXJzLmxlbmd0aDtcbiAgICB9LFxuICAgIFtTeW1ib2wuaXRlcmF0b3JdOiAoKSA9PiB1c2Vyc1tTeW1ib2wuaXRlcmF0b3JdKCksXG4gICAgbWFwOiAoY2FsbGJhY2spID0+IHVzZXJzLm1hcChjYWxsYmFjayksXG4gICAgdG9BcnJheTogKCkgPT4gdXNlcnMsXG4gIH07XG59XG5mdW5jdGlvbiBtYWtlU3RhdGVNYWNoaW5lKHN0YXRlLCBjb250ZXh0LCBtb2NrZWRFZmZlY3RzKSB7XG4gIGNvbnN0IGVmZmVjdHMgPSBtb2NrZWRFZmZlY3RzIHx8IHtcbiAgICBhdXRoZW50aWNhdGUoYXV0aCwgY3JlYXRlV2ViU29ja2V0KSB7XG4gICAgICBjb25zdCByYXdUb2tlbiA9IHN0YXRlLnRva2VuLFxuICAgICAgICBwYXJzZWRUb2tlbiA9IG51bGwgIT09IHJhd1Rva2VuICYmIHBhcnNlUm9vbUF1dGhUb2tlbihyYXdUb2tlbik7XG4gICAgICBpZiAoIXBhcnNlZFRva2VuIHx8IGlzVG9rZW5FeHBpcmVkKHBhcnNlZFRva2VuKSlcbiAgICAgICAgcmV0dXJuIGF1dGgoY29udGV4dC5yb29tSWQpXG4gICAgICAgICAgLnRoZW4oKHsgdG9rZW46IHRva2VuIH0pID0+IHtcbiAgICAgICAgICAgIGlmIChcImF1dGhlbnRpY2F0aW5nXCIgIT09IHN0YXRlLmNvbm5lY3Rpb24uc3RhdGUpIHJldHVybjtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3VjY2VzcyhcbiAgICAgICAgICAgICAgcGFyc2VSb29tQXV0aFRva2VuKHRva2VuKSxcbiAgICAgICAgICAgICAgY3JlYXRlV2ViU29ja2V0KHRva2VuKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgKHN0YXRlLnRva2VuID0gdG9rZW4pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcikgPT5cbiAgICAgICAgICAgIChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNhbGwgdG8gYXV0aGVudGljYXRpb24gZW5kcG9pbnQgZmFpbGVkXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgKHN0YXRlLnRva2VuID0gbnVsbCksXG4gICAgICAgICAgICAgICAgdXBkYXRlQ29ubmVjdGlvbih7IHN0YXRlOiBcInVuYXZhaWxhYmxlXCIgfSksXG4gICAgICAgICAgICAgICAgc3RhdGUubnVtYmVyT2ZSZXRyeSsrLFxuICAgICAgICAgICAgICAgIChzdGF0ZS50aW1lb3V0SGFuZGxlcy5yZWNvbm5lY3QgPSBlZmZlY3RzLnNjaGVkdWxlUmVjb25uZWN0KFxuICAgICAgICAgICAgICAgICAgZ2V0UmV0cnlEZWxheSgpXG4gICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICB9KShlciBpbnN0YW5jZW9mIEVycm9yID8gZXIgOiBuZXcgRXJyb3IoU3RyaW5nKGVyKSkpXG4gICAgICAgICAgKTtcbiAgICAgIGF1dGhlbnRpY2F0aW9uU3VjY2VzcyhwYXJzZWRUb2tlbiwgY3JlYXRlV2ViU29ja2V0KHJhd1Rva2VuKSk7XG4gICAgfSxcbiAgICBzZW5kKG1lc3NhZ2VPck1lc3NhZ2VzKSB7XG4gICAgICBpZiAobnVsbCA9PSBzdGF0ZS5zb2NrZXQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHNlbmQgbWVzc2FnZSBpZiBzb2NrZXQgaXMgbnVsbFwiKTtcbiAgICAgIHN0YXRlLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VPck1lc3NhZ2VzKSk7XG4gICAgfSxcbiAgICBkZWxheUZsdXNoOiAoZGVsYXkpID0+IHNldFRpbWVvdXQodHJ5Rmx1c2hpbmcsIGRlbGF5KSxcbiAgICBzdGFydEhlYXJ0YmVhdEludGVydmFsOiAoKSA9PiBzZXRJbnRlcnZhbChoZWFydGJlYXQsIDNlNCksXG4gICAgc2NoZWR1bGVQb25nVGltZW91dDogKCkgPT4gc2V0VGltZW91dChwb25nVGltZW91dCwgMmUzKSxcbiAgICBzY2hlZHVsZVJlY29ubmVjdDogKGRlbGF5KSA9PiBzZXRUaW1lb3V0KGNvbm5lY3QsIGRlbGF5KSxcbiAgfTtcbiAgZnVuY3Rpb24gZ2VuZXJpY1N1YnNjcmliZShjYWxsYmFjaykge1xuICAgIHJldHVybiAoXG4gICAgICBzdGF0ZS5saXN0ZW5lcnMuc3RvcmFnZS5wdXNoKGNhbGxiYWNrKSxcbiAgICAgICgpID0+IHJlbW92ZShzdGF0ZS5saXN0ZW5lcnMuc3RvcmFnZSwgY2FsbGJhY2spXG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZVJvb3RGcm9tTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgaWYgKDAgPT09IG1lc3NhZ2UuaXRlbXMubGVuZ3RoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW50ZXJuYWwgZXJyb3I6IGNhbm5vdCBsb2FkIHN0b3JhZ2Ugd2l0aG91dCBpdGVtc1wiKTtcbiAgICBzdGF0ZS5yb290XG4gICAgICA/IChmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICBpZiAoIXN0YXRlLnJvb3QpIHJldHVybjtcbiAgICAgICAgICBjb25zdCBjdXJyZW50SXRlbXMgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgc3RhdGUuaXRlbXMuZm9yRWFjaCgobGl2ZUNyZHQsIGlkKSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50SXRlbXMuc2V0KGlkLCBsaXZlQ3JkdC5fdG9TZXJpYWxpemVkQ3JkdCgpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zdCBvcHMgPSBnZXRUcmVlc0RpZmZPcGVyYXRpb25zKGN1cnJlbnRJdGVtcywgbmV3IE1hcChpdGVtcykpO1xuICAgICAgICAgIG5vdGlmeShhcHBseShvcHMsICExKS51cGRhdGVzKTtcbiAgICAgICAgfSkobWVzc2FnZS5pdGVtcylcbiAgICAgIDogKHN0YXRlLnJvb3QgPSAoZnVuY3Rpb24gKGl0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgW3Jvb3QsIHBhcmVudFRvQ2hpbGRyZW5dID0gKGZ1bmN0aW9uIChpdGVtcykge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50VG9DaGlsZHJlbiA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGxldCByb290ID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2lkLCBjcmR0XSBvZiBpdGVtcylcbiAgICAgICAgICAgICAgaWYgKGlzUm9vdENyZHQoY3JkdCkpIHJvb3QgPSBbaWQsIGNyZHRdO1xuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0dXBsZSA9IFtpZCwgY3JkdF0sXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHBhcmVudFRvQ2hpbGRyZW4uZ2V0KGNyZHQucGFyZW50SWQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT0gY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgID8gY2hpbGRyZW4ucHVzaCh0dXBsZSlcbiAgICAgICAgICAgICAgICAgIDogcGFyZW50VG9DaGlsZHJlbi5zZXQoY3JkdC5wYXJlbnRJZCwgW3R1cGxlXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsID09IHJvb3QpIHRocm93IG5ldyBFcnJvcihcIlJvb3QgY2FuJ3QgYmUgbnVsbFwiKTtcbiAgICAgICAgICAgIHJldHVybiBbcm9vdCwgcGFyZW50VG9DaGlsZHJlbl07XG4gICAgICAgICAgfSkoaXRlbXMpO1xuICAgICAgICAgIHJldHVybiBMaXZlT2JqZWN0Ll9kZXNlcmlhbGl6ZShyb290LCBwYXJlbnRUb0NoaWxkcmVuLCB7XG4gICAgICAgICAgICBnZXRJdGVtOiBnZXRJdGVtLFxuICAgICAgICAgICAgYWRkSXRlbTogYWRkSXRlbSxcbiAgICAgICAgICAgIGRlbGV0ZUl0ZW06IGRlbGV0ZUl0ZW0sXG4gICAgICAgICAgICBnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkLFxuICAgICAgICAgICAgZ2VuZXJhdGVPcElkOiBnZW5lcmF0ZU9wSWQsXG4gICAgICAgICAgICBkaXNwYXRjaDogc3RvcmFnZURpc3BhdGNoLFxuICAgICAgICAgICAgcm9vbUlkOiBjb250ZXh0LnJvb21JZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkobWVzc2FnZS5pdGVtcykpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIHN0YXRlLmRlZmF1bHRTdG9yYWdlUm9vdClcbiAgICAgIG51bGwgPT0gc3RhdGUucm9vdC5nZXQoa2V5KSAmJlxuICAgICAgICBzdGF0ZS5yb290LnNldChrZXksIHN0YXRlLmRlZmF1bHRTdG9yYWdlUm9vdFtrZXldKTtcbiAgfVxuICBmdW5jdGlvbiBhZGRJdGVtKGlkLCBsaXZlSXRlbSkge1xuICAgIHN0YXRlLml0ZW1zLnNldChpZCwgbGl2ZUl0ZW0pO1xuICB9XG4gIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaWQpIHtcbiAgICBzdGF0ZS5pdGVtcy5kZWxldGUoaWQpO1xuICB9XG4gIGZ1bmN0aW9uIGdldEl0ZW0oaWQpIHtcbiAgICByZXR1cm4gc3RhdGUuaXRlbXMuZ2V0KGlkKTtcbiAgfVxuICBmdW5jdGlvbiBhZGRUb1VuZG9TdGFjayhoaXN0b3J5SXRlbSkge1xuICAgIHN0YXRlLnVuZG9TdGFjay5sZW5ndGggPj0gNTAgJiYgc3RhdGUudW5kb1N0YWNrLnNoaWZ0KCksXG4gICAgICBzdGF0ZS5pc0hpc3RvcnlQYXVzZWRcbiAgICAgICAgPyBzdGF0ZS5wYXVzZWRIaXN0b3J5LnVuc2hpZnQoLi4uaGlzdG9yeUl0ZW0pXG4gICAgICAgIDogc3RhdGUudW5kb1N0YWNrLnB1c2goaGlzdG9yeUl0ZW0pO1xuICB9XG4gIGZ1bmN0aW9uIHN0b3JhZ2VEaXNwYXRjaChvcHMsIHJldmVyc2UsIHN0b3JhZ2VVcGRhdGVzKSB7XG4gICAgc3RhdGUuaXNCYXRjaGluZ1xuICAgICAgPyAoc3RhdGUuYmF0Y2gub3BzLnB1c2goLi4ub3BzKSxcbiAgICAgICAgc3RvcmFnZVVwZGF0ZXMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmJhdGNoLnVwZGF0ZXMuc3RvcmFnZVVwZGF0ZXMuc2V0KFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgbWVyZ2VTdG9yYWdlVXBkYXRlcyhcbiAgICAgICAgICAgICAgc3RhdGUuYmF0Y2gudXBkYXRlcy5zdG9yYWdlVXBkYXRlcy5nZXQoa2V5KSxcbiAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9KSxcbiAgICAgICAgc3RhdGUuYmF0Y2gucmV2ZXJzZU9wcy5wdXNoKC4uLnJldmVyc2UpKVxuICAgICAgOiAoYWRkVG9VbmRvU3RhY2socmV2ZXJzZSksXG4gICAgICAgIChzdGF0ZS5yZWRvU3RhY2sgPSBbXSksXG4gICAgICAgIGRpc3BhdGNoKG9wcyksXG4gICAgICAgIG5vdGlmeSh7IHN0b3JhZ2VVcGRhdGVzOiBzdG9yYWdlVXBkYXRlcyB9KSk7XG4gIH1cbiAgZnVuY3Rpb24gbm90aWZ5KHtcbiAgICBzdG9yYWdlVXBkYXRlczogc3RvcmFnZVVwZGF0ZXMgPSBuZXcgTWFwKCksXG4gICAgcHJlc2VuY2U6IHByZXNlbmNlID0gITEsXG4gICAgb3RoZXJzOiBvdGhlckV2ZW50cyA9IFtdLFxuICB9KSB7XG4gICAgaWYgKG90aGVyRXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHN0YXRlLm90aGVycyA9IG1ha2VPdGhlcnMoc3RhdGUudXNlcnMpO1xuICAgICAgZm9yIChjb25zdCBldmVudCBvZiBvdGhlckV2ZW50cylcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBzdGF0ZS5saXN0ZW5lcnMub3RoZXJzKVxuICAgICAgICAgIGxpc3RlbmVyKHN0YXRlLm90aGVycywgZXZlbnQpO1xuICAgIH1cbiAgICBpZiAocHJlc2VuY2UpXG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHN0YXRlLmxpc3RlbmVyc1tcIm15LXByZXNlbmNlXCJdKSBsaXN0ZW5lcihzdGF0ZS5tZSk7XG4gICAgaWYgKHN0b3JhZ2VVcGRhdGVzLnNpemUgPiAwKVxuICAgICAgZm9yIChjb25zdCBzdWJzY3JpYmVyIG9mIHN0YXRlLmxpc3RlbmVycy5zdG9yYWdlKVxuICAgICAgICBzdWJzY3JpYmVyKEFycmF5LmZyb20oc3RvcmFnZVVwZGF0ZXMudmFsdWVzKCkpKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRDb25uZWN0aW9uSWQoKSB7XG4gICAgaWYgKFxuICAgICAgXCJvcGVuXCIgPT09IHN0YXRlLmNvbm5lY3Rpb24uc3RhdGUgfHxcbiAgICAgIFwiY29ubmVjdGluZ1wiID09PSBzdGF0ZS5jb25uZWN0aW9uLnN0YXRlXG4gICAgKVxuICAgICAgcmV0dXJuIHN0YXRlLmNvbm5lY3Rpb24uaWQ7XG4gICAgaWYgKG51bGwgIT09IHN0YXRlLmxhc3RDb25uZWN0aW9uSWQpIHJldHVybiBzdGF0ZS5sYXN0Q29ubmVjdGlvbklkO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiSW50ZXJuYWwuIFRyaWVkIHRvIGdldCBjb25uZWN0aW9uIGlkIGJ1dCBjb25uZWN0aW9uIHdhcyBuZXZlciBvcGVuXCJcbiAgICApO1xuICB9XG4gIGZ1bmN0aW9uIGdlbmVyYXRlSWQoKSB7XG4gICAgcmV0dXJuIGAke2dldENvbm5lY3Rpb25JZCgpfToke3N0YXRlLmNsb2NrKyt9YDtcbiAgfVxuICBmdW5jdGlvbiBnZW5lcmF0ZU9wSWQoKSB7XG4gICAgcmV0dXJuIGAke2dldENvbm5lY3Rpb25JZCgpfToke3N0YXRlLm9wQ2xvY2srK31gO1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5KGl0ZW0sIGlzTG9jYWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHJldmVyc2U6IFtdLFxuICAgICAgICB1cGRhdGVzOiB7IHN0b3JhZ2VVcGRhdGVzOiBuZXcgTWFwKCksIHByZXNlbmNlOiAhMSB9LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWROb2RlSWRzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgb3Agb2YgaXRlbSlcbiAgICAgIGlmIChcInByZXNlbmNlXCIgPT09IG9wLnR5cGUpIHtcbiAgICAgICAgY29uc3QgcmV2ZXJzZSA9IHsgdHlwZTogXCJwcmVzZW5jZVwiLCBkYXRhOiB7fSB9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcC5kYXRhKSByZXZlcnNlLmRhdGFba2V5XSA9IHN0YXRlLm1lW2tleV07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAoKHN0YXRlLm1lID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5tZSksIG9wLmRhdGEpKSxcbiAgICAgICAgICBudWxsID09IHN0YXRlLmJ1ZmZlci5wcmVzZW5jZSlcbiAgICAgICAgKVxuICAgICAgICAgIHN0YXRlLmJ1ZmZlci5wcmVzZW5jZSA9IG9wLmRhdGE7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcC5kYXRhKSBzdGF0ZS5idWZmZXIucHJlc2VuY2Vba2V5XSA9IG9wLmRhdGFba2V5XTtcbiAgICAgICAgcmVzdWx0LnJldmVyc2UudW5zaGlmdChyZXZlcnNlKSwgKHJlc3VsdC51cGRhdGVzLnByZXNlbmNlID0gITApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNvdXJjZTtcbiAgICAgICAgaWYgKChvcC5vcElkIHx8IChvcC5vcElkID0gZ2VuZXJhdGVPcElkKCkpLCBpc0xvY2FsKSlcbiAgICAgICAgICBzb3VyY2UgPSBPcFNvdXJjZS5VTkRPUkVET19SRUNPTk5FQ1Q7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNvdXJjZSA9IHN0YXRlLm9mZmxpbmVPcGVyYXRpb25zLmRlbGV0ZShubihvcC5vcElkKSlcbiAgICAgICAgICAgID8gT3BTb3VyY2UuQUNLXG4gICAgICAgICAgICA6IE9wU291cmNlLlJFTU9URTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHBseU9wUmVzdWx0ID0gYXBwbHlPcChvcCwgc291cmNlKTtcbiAgICAgICAgaWYgKGFwcGx5T3BSZXN1bHQubW9kaWZpZWQpIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnRJZCA9XG4gICAgICAgICAgICBcIkhhc1BhcmVudFwiID09PSBhcHBseU9wUmVzdWx0Lm1vZGlmaWVkLm5vZGUucGFyZW50LnR5cGVcbiAgICAgICAgICAgICAgPyBubihcbiAgICAgICAgICAgICAgICAgIGFwcGx5T3BSZXN1bHQubW9kaWZpZWQubm9kZS5wYXJlbnQubm9kZS5faWQsXG4gICAgICAgICAgICAgICAgICBcIkV4cGVjdGVkIHBhcmVudCBub2RlIHRvIGhhdmUgYW4gSURcIlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgKHBhcmVudElkICYmIGNyZWF0ZWROb2RlSWRzLmhhcyhwYXJlbnRJZCkpIHx8XG4gICAgICAgICAgICAocmVzdWx0LnVwZGF0ZXMuc3RvcmFnZVVwZGF0ZXMuc2V0KFxuICAgICAgICAgICAgICBubihhcHBseU9wUmVzdWx0Lm1vZGlmaWVkLm5vZGUuX2lkKSxcbiAgICAgICAgICAgICAgbWVyZ2VTdG9yYWdlVXBkYXRlcyhcbiAgICAgICAgICAgICAgICByZXN1bHQudXBkYXRlcy5zdG9yYWdlVXBkYXRlcy5nZXQoXG4gICAgICAgICAgICAgICAgICBubihhcHBseU9wUmVzdWx0Lm1vZGlmaWVkLm5vZGUuX2lkKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgYXBwbHlPcFJlc3VsdC5tb2RpZmllZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgcmVzdWx0LnJldmVyc2UudW5zaGlmdCguLi5hcHBseU9wUmVzdWx0LnJldmVyc2UpKSxcbiAgICAgICAgICAgIChvcC50eXBlICE9PSBPcENvZGUuQ1JFQVRFX0xJU1QgJiZcbiAgICAgICAgICAgICAgb3AudHlwZSAhPT0gT3BDb2RlLkNSRUFURV9NQVAgJiZcbiAgICAgICAgICAgICAgb3AudHlwZSAhPT0gT3BDb2RlLkNSRUFURV9PQkpFQ1QpIHx8XG4gICAgICAgICAgICAgIGNyZWF0ZWROb2RlSWRzLmFkZChubihhcHBseU9wUmVzdWx0Lm1vZGlmaWVkLm5vZGUuX2lkKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5T3Aob3AsIHNvdXJjZSkge1xuICAgIHN3aXRjaCAob3AudHlwZSkge1xuICAgICAgY2FzZSBPcENvZGUuREVMRVRFX09CSkVDVF9LRVk6XG4gICAgICBjYXNlIE9wQ29kZS5VUERBVEVfT0JKRUNUOlxuICAgICAgY2FzZSBPcENvZGUuREVMRVRFX0NSRFQ6IHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHN0YXRlLml0ZW1zLmdldChvcC5pZCk7XG4gICAgICAgIHJldHVybiBudWxsID09IGl0ZW1cbiAgICAgICAgICA/IHsgbW9kaWZpZWQ6ICExIH1cbiAgICAgICAgICA6IGl0ZW0uX2FwcGx5KG9wLCBzb3VyY2UgPT09IE9wU291cmNlLlVORE9SRURPX1JFQ09OTkVDVCk7XG4gICAgICB9XG4gICAgICBjYXNlIE9wQ29kZS5TRVRfUEFSRU5UX0tFWToge1xuICAgICAgICBjb25zdCBpdGVtID0gc3RhdGUuaXRlbXMuZ2V0KG9wLmlkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gaXRlbVxuICAgICAgICAgID8geyBtb2RpZmllZDogITEgfVxuICAgICAgICAgIDogXCJIYXNQYXJlbnRcIiA9PT0gaXRlbS5wYXJlbnQudHlwZSAmJiBpc0xpdmVMaXN0KGl0ZW0ucGFyZW50Lm5vZGUpXG4gICAgICAgICAgPyBpdGVtLnBhcmVudC5ub2RlLl9zZXRDaGlsZEtleShvcC5wYXJlbnRLZXksIGl0ZW0sIHNvdXJjZSlcbiAgICAgICAgICA6IHsgbW9kaWZpZWQ6ICExIH07XG4gICAgICB9XG4gICAgICBjYXNlIE9wQ29kZS5DUkVBVEVfT0JKRUNUOlxuICAgICAgY2FzZSBPcENvZGUuQ1JFQVRFX0xJU1Q6XG4gICAgICBjYXNlIE9wQ29kZS5DUkVBVEVfTUFQOlxuICAgICAgY2FzZSBPcENvZGUuQ1JFQVRFX1JFR0lTVEVSOiB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG9wLnBhcmVudElkKSByZXR1cm4geyBtb2RpZmllZDogITEgfTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gc3RhdGUuaXRlbXMuZ2V0KG9wLnBhcmVudElkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gcGFyZW50XG4gICAgICAgICAgPyB7IG1vZGlmaWVkOiAhMSB9XG4gICAgICAgICAgOiBwYXJlbnQuX2F0dGFjaENoaWxkKG9wLCBzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBpZiAoXG4gICAgICBcImNsb3NlZFwiICE9PSBzdGF0ZS5jb25uZWN0aW9uLnN0YXRlICYmXG4gICAgICBcInVuYXZhaWxhYmxlXCIgIT09IHN0YXRlLmNvbm5lY3Rpb24uc3RhdGVcbiAgICApXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBhdXRoID0gKGZ1bmN0aW9uIChhdXRoZW50aWNhdGlvbiwgZmV0Y2hQb2x5ZmlsbCkge1xuICAgICAgICBpZiAoXCJwdWJsaWNcIiA9PT0gYXV0aGVudGljYXRpb24udHlwZSkge1xuICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiB3aW5kb3cgJiYgbnVsbCA9PSBmZXRjaFBvbHlmaWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIlRvIHVzZSBMaXZlYmxvY2tzIGNsaWVudCBpbiBhIG5vbi1kb20gZW52aXJvbm1lbnQgd2l0aCBhIHB1YmxpY0FwaUtleSwgeW91IG5lZWQgdG8gcHJvdmlkZSBhIGZldGNoIHBvbHlmaWxsLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiAocm9vbSkgPT5cbiAgICAgICAgICAgIGZldGNoQXV0aEVuZHBvaW50KGZldGNoUG9seWZpbGwgfHwgZmV0Y2gsIGF1dGhlbnRpY2F0aW9uLnVybCwge1xuICAgICAgICAgICAgICByb29tOiByb29tLFxuICAgICAgICAgICAgICBwdWJsaWNBcGlLZXk6IGF1dGhlbnRpY2F0aW9uLnB1YmxpY0FwaUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcInByaXZhdGVcIiA9PT0gYXV0aGVudGljYXRpb24udHlwZSkge1xuICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiB3aW5kb3cgJiYgbnVsbCA9PSBmZXRjaFBvbHlmaWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBcIlRvIHVzZSBMaXZlYmxvY2tzIGNsaWVudCBpbiBhIG5vbi1kb20gZW52aXJvbm1lbnQgd2l0aCBhIHVybCBhcyBhdXRoIGVuZHBvaW50LCB5b3UgbmVlZCB0byBwcm92aWRlIGEgZmV0Y2ggcG9seWZpbGwuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIChyb29tKSA9PlxuICAgICAgICAgICAgZmV0Y2hBdXRoRW5kcG9pbnQoZmV0Y2hQb2x5ZmlsbCB8fCBmZXRjaCwgYXV0aGVudGljYXRpb24udXJsLCB7XG4gICAgICAgICAgICAgIHJvb206IHJvb20sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJjdXN0b21cIiA9PT0gYXV0aGVudGljYXRpb24udHlwZSkge1xuICAgICAgICAgIHJldHVybiAocm9vbSkgPT5cbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uLmNhbGxiYWNrKHJvb20pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLnRva2VuKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICdBdXRoZW50aWNhdGlvbiBlcnJvci4gV2UgZXhwZWN0IHRoZSBhdXRoZW50aWNhdGlvbiBjYWxsYmFjayB0byByZXR1cm4gYSB0b2tlbiwgYnV0IGl0IGRvZXMgbm90LiBIaW50OiB0aGUgcmV0dXJuIHZhbHVlIHNob3VsZCBsb29rIGxpa2U6IHsgdG9rZW46IFwiLi4uXCIgfSdcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm5hbCBlcnJvci4gVW5leHBlY3RlZCBhdXRoZW50aWNhdGlvbiB0eXBlXCIpO1xuICAgICAgfSkoXG4gICAgICAgIGNvbnRleHQuYXV0aGVudGljYXRpb24sXG4gICAgICAgIG51bGwgIT09XG4gICAgICAgICAgKF9iID1cbiAgICAgICAgICAgIG51bGwgPT09IChfYSA9IGNvbnRleHQucG9seWZpbGxzKSB8fCB2b2lkIDAgPT09IF9hXG4gICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgIDogX2EuZmV0Y2gpICYmIHZvaWQgMCAhPT0gX2JcbiAgICAgICAgICA/IF9iXG4gICAgICAgICAgOiBjb250ZXh0LmZldGNoUG9seWZpbGxcbiAgICAgICksXG4gICAgICBjcmVhdGVXZWJTb2NrZXQgPSAoZnVuY3Rpb24gKGxpdmVibG9ja3NTZXJ2ZXIsIFdlYlNvY2tldFBvbHlmaWxsKSB7XG4gICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiB3aW5kb3cgJiYgbnVsbCA9PSBXZWJTb2NrZXRQb2x5ZmlsbClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIlRvIHVzZSBMaXZlYmxvY2tzIGNsaWVudCBpbiBhIG5vbi1kb20gZW52aXJvbm1lbnQsIHlvdSBuZWVkIHRvIHByb3ZpZGUgYSBXZWJTb2NrZXQgcG9seWZpbGwuXCJcbiAgICAgICAgICApO1xuICAgICAgICBjb25zdCB3cyA9IFdlYlNvY2tldFBvbHlmaWxsIHx8IFdlYlNvY2tldDtcbiAgICAgICAgcmV0dXJuICh0b2tlbikgPT5cbiAgICAgICAgICBuZXcgd3MoYCR7bGl2ZWJsb2Nrc1NlcnZlcn0vP3Rva2VuPSR7dG9rZW59JnZlcnNpb249MC4xNy42YCk7XG4gICAgICB9KShcbiAgICAgICAgY29udGV4dC5saXZlYmxvY2tzU2VydmVyLFxuICAgICAgICBudWxsICE9PVxuICAgICAgICAgIChfZCA9XG4gICAgICAgICAgICBudWxsID09PSAoX2MgPSBjb250ZXh0LnBvbHlmaWxscykgfHwgdm9pZCAwID09PSBfY1xuICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICA6IF9jLldlYlNvY2tldCkgJiYgdm9pZCAwICE9PSBfZFxuICAgICAgICAgID8gX2RcbiAgICAgICAgICA6IGNvbnRleHQuV2ViU29ja2V0UG9seWZpbGxcbiAgICAgICk7XG4gICAgdXBkYXRlQ29ubmVjdGlvbih7IHN0YXRlOiBcImF1dGhlbnRpY2F0aW5nXCIgfSksXG4gICAgICBlZmZlY3RzLmF1dGhlbnRpY2F0ZShhdXRoLCBjcmVhdGVXZWJTb2NrZXQpO1xuICB9XG4gIGZ1bmN0aW9uIGF1dGhlbnRpY2F0aW9uU3VjY2Vzcyh0b2tlbiwgc29ja2V0KSB7XG4gICAgc29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uTWVzc2FnZSksXG4gICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgb25PcGVuKSxcbiAgICAgIHNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgb25DbG9zZSksXG4gICAgICBzb2NrZXQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uRXJyb3IpLFxuICAgICAgdXBkYXRlQ29ubmVjdGlvbih7XG4gICAgICAgIHN0YXRlOiBcImNvbm5lY3RpbmdcIixcbiAgICAgICAgaWQ6IHRva2VuLmFjdG9yLFxuICAgICAgICB1c2VySW5mbzogdG9rZW4uaW5mbyxcbiAgICAgICAgdXNlcklkOiB0b2tlbi5pZCxcbiAgICAgIH0pLFxuICAgICAgKHN0YXRlLmlkRmFjdG9yeSA9IChmdW5jdGlvbiAoY29ubmVjdGlvbklkKSB7XG4gICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgIHJldHVybiAoKSA9PiBgJHtjb25uZWN0aW9uSWR9OiR7Y291bnQrK31gO1xuICAgICAgfSkodG9rZW4uYWN0b3IpKSxcbiAgICAgIChzdGF0ZS5zb2NrZXQgPSBzb2NrZXQpO1xuICB9XG4gIGZ1bmN0aW9uIG9uVXBkYXRlUHJlc2VuY2VNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCB1c2VyID0gc3RhdGUudXNlcnNbbWVzc2FnZS5hY3Rvcl07XG4gICAgaWYgKFxuICAgICAgdm9pZCAwICE9PSBtZXNzYWdlLnRhcmdldEFjdG9yIHx8XG4gICAgICBudWxsID09IHVzZXIgfHxcbiAgICAgIHVzZXIuX2hhc1JlY2VpdmVkSW5pdGlhbFByZXNlbmNlXG4gICAgKVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgKHN0YXRlLnVzZXJzW21lc3NhZ2UuYWN0b3JdID1cbiAgICAgICAgICBudWxsID09IHVzZXJcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25JZDogbWVzc2FnZS5hY3RvcixcbiAgICAgICAgICAgICAgICBwcmVzZW5jZTogbWVzc2FnZS5kYXRhLFxuICAgICAgICAgICAgICAgIGlkOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgaW5mbzogdm9pZCAwLFxuICAgICAgICAgICAgICAgIF9oYXNSZWNlaXZlZEluaXRpYWxQcmVzZW5jZTogITAsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgICAgICAgIGluZm86IHVzZXIuaW5mbyxcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uSWQ6IG1lc3NhZ2UuYWN0b3IsXG4gICAgICAgICAgICAgICAgcHJlc2VuY2U6IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB1c2VyLnByZXNlbmNlKSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGF0YVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgX2hhc1JlY2VpdmVkSW5pdGlhbFByZXNlbmNlOiAhMCxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcInVwZGF0ZVwiLFxuICAgICAgICAgIHVwZGF0ZXM6IG1lc3NhZ2UuZGF0YSxcbiAgICAgICAgICB1c2VyOiBzdGF0ZS51c2Vyc1ttZXNzYWdlLmFjdG9yXSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgfVxuICBmdW5jdGlvbiBvblVzZXJMZWZ0TWVzc2FnZShtZXNzYWdlKSB7XG4gICAgY29uc3QgdXNlckxlZnRNZXNzYWdlID0gbWVzc2FnZSxcbiAgICAgIHVzZXIgPSBzdGF0ZS51c2Vyc1t1c2VyTGVmdE1lc3NhZ2UuYWN0b3JdO1xuICAgIHJldHVybiB1c2VyXG4gICAgICA/IChkZWxldGUgc3RhdGUudXNlcnNbdXNlckxlZnRNZXNzYWdlLmFjdG9yXSxcbiAgICAgICAgeyB0eXBlOiBcImxlYXZlXCIsIHVzZXI6IHVzZXIgfSlcbiAgICAgIDogbnVsbDtcbiAgfVxuICBmdW5jdGlvbiBvblJvb21TdGF0ZU1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGNvbnN0IG5ld1VzZXJzID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gbWVzc2FnZS51c2Vycykge1xuICAgICAgY29uc3QgY29ubmVjdGlvbklkID0gTnVtYmVyLnBhcnNlSW50KGtleSksXG4gICAgICAgIHVzZXIgPSBtZXNzYWdlLnVzZXJzW2tleV07XG4gICAgICBuZXdVc2Vyc1tjb25uZWN0aW9uSWRdID0ge1xuICAgICAgICBjb25uZWN0aW9uSWQ6IGNvbm5lY3Rpb25JZCxcbiAgICAgICAgaW5mbzogdXNlci5pbmZvLFxuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiAoc3RhdGUudXNlcnMgPSBuZXdVc2VycyksIHsgdHlwZTogXCJyZXNldFwiIH07XG4gIH1cbiAgZnVuY3Rpb24gb25FdmVudChtZXNzYWdlKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBzdGF0ZS5saXN0ZW5lcnMuZXZlbnQpXG4gICAgICBsaXN0ZW5lcih7IGNvbm5lY3Rpb25JZDogbWVzc2FnZS5hY3RvciwgZXZlbnQ6IG1lc3NhZ2UuZXZlbnQgfSk7XG4gIH1cbiAgZnVuY3Rpb24gb25Vc2VySm9pbmVkTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIChzdGF0ZS51c2Vyc1ttZXNzYWdlLmFjdG9yXSA9IHtcbiAgICAgICAgY29ubmVjdGlvbklkOiBtZXNzYWdlLmFjdG9yLFxuICAgICAgICBpbmZvOiBtZXNzYWdlLmluZm8sXG4gICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICBfaGFzUmVjZWl2ZWRJbml0aWFsUHJlc2VuY2U6ICEwLFxuICAgICAgfSksXG4gICAgICBzdGF0ZS5tZSAmJlxuICAgICAgICAoc3RhdGUuYnVmZmVyLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IENsaWVudE1zZ0NvZGUuVVBEQVRFX1BSRVNFTkNFLFxuICAgICAgICAgIGRhdGE6IHN0YXRlLm1lLFxuICAgICAgICAgIHRhcmdldEFjdG9yOiBtZXNzYWdlLmFjdG9yLFxuICAgICAgICB9KSxcbiAgICAgICAgdHJ5Rmx1c2hpbmcoKSksXG4gICAgICB7IHR5cGU6IFwiZW50ZXJcIiwgdXNlcjogc3RhdGUudXNlcnNbbWVzc2FnZS5hY3Rvcl0gfVxuICAgICk7XG4gIH1cbiAgZnVuY3Rpb24gcGFyc2VTZXJ2ZXJNZXNzYWdlKGRhdGEpIHtcbiAgICByZXR1cm4gaXNKc29uT2JqZWN0KGRhdGEpID8gZGF0YSA6IG51bGw7XG4gIH1cbiAgZnVuY3Rpb24gb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgaWYgKFwicG9uZ1wiID09PSBldmVudC5kYXRhKVxuICAgICAgcmV0dXJuIHZvaWQgY2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXRIYW5kbGVzLnBvbmdUaW1lb3V0KTtcbiAgICBjb25zdCBtZXNzYWdlcyA9IChmdW5jdGlvbiAodGV4dCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRyeVBhcnNlSnNvbih0ZXh0KTtcbiAgICAgIHJldHVybiB2b2lkIDAgPT09IGRhdGFcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogaXNKc29uQXJyYXkoZGF0YSlcbiAgICAgICAgPyBjb21wYWN0KGRhdGEubWFwKChpdGVtKSA9PiBwYXJzZVNlcnZlck1lc3NhZ2UoaXRlbSkpKVxuICAgICAgICA6IGNvbXBhY3QoW3BhcnNlU2VydmVyTWVzc2FnZShkYXRhKV0pO1xuICAgIH0pKGV2ZW50LmRhdGEpO1xuICAgIGlmIChudWxsID09PSBtZXNzYWdlcyB8fCAwID09PSBtZXNzYWdlcy5sZW5ndGgpIHJldHVybjtcbiAgICBjb25zdCB1cGRhdGVzID0geyBzdG9yYWdlVXBkYXRlczogbmV3IE1hcCgpLCBvdGhlcnM6IFtdIH07XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKVxuICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBTZXJ2ZXJNc2dDb2RlLlVTRVJfSk9JTkVEOlxuICAgICAgICAgIHVwZGF0ZXMub3RoZXJzLnB1c2gob25Vc2VySm9pbmVkTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU2VydmVyTXNnQ29kZS5VUERBVEVfUFJFU0VOQ0U6IHtcbiAgICAgICAgICBjb25zdCBvdGhlcnNQcmVzZW5jZVVwZGF0ZSA9IG9uVXBkYXRlUHJlc2VuY2VNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgIG90aGVyc1ByZXNlbmNlVXBkYXRlICYmIHVwZGF0ZXMub3RoZXJzLnB1c2gob3RoZXJzUHJlc2VuY2VVcGRhdGUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgU2VydmVyTXNnQ29kZS5CUk9BRENBU1RFRF9FVkVOVDpcbiAgICAgICAgICBvbkV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFNlcnZlck1zZ0NvZGUuVVNFUl9MRUZUOiB7XG4gICAgICAgICAgY29uc3QgZXZlbnQgPSBvblVzZXJMZWZ0TWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICBldmVudCAmJiB1cGRhdGVzLm90aGVycy5wdXNoKGV2ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFNlcnZlck1zZ0NvZGUuUk9PTV9TVEFURTpcbiAgICAgICAgICB1cGRhdGVzLm90aGVycy5wdXNoKG9uUm9vbVN0YXRlTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU2VydmVyTXNnQ29kZS5JTklUSUFMX1NUT1JBR0VfU1RBVEU6IHtcbiAgICAgICAgICBjb25zdCBvZmZsaW5lT3BzID0gbmV3IE1hcChzdGF0ZS5vZmZsaW5lT3BlcmF0aW9ucyk7XG4gICAgICAgICAgY3JlYXRlT3JVcGRhdGVSb290RnJvbU1lc3NhZ2UobWVzc2FnZSksXG4gICAgICAgICAgICBhcHBseUFuZFNlbmRPZmZsaW5lT3BzKG9mZmxpbmVPcHMpLFxuICAgICAgICAgICAgbnVsbCA9PSBfZ2V0SW5pdGlhbFN0YXRlUmVzb2x2ZXIgfHwgX2dldEluaXRpYWxTdGF0ZVJlc29sdmVyKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBTZXJ2ZXJNc2dDb2RlLlVQREFURV9TVE9SQUdFOlxuICAgICAgICAgIGFwcGx5KG1lc3NhZ2Uub3BzLCAhMSkudXBkYXRlcy5zdG9yYWdlVXBkYXRlcy5mb3JFYWNoKFxuICAgICAgICAgICAgKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgdXBkYXRlcy5zdG9yYWdlVXBkYXRlcy5zZXQoXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIG1lcmdlU3RvcmFnZVVwZGF0ZXModXBkYXRlcy5zdG9yYWdlVXBkYXRlcy5nZXQoa2V5KSwgdmFsdWUpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICBub3RpZnkodXBkYXRlcyk7XG4gIH1cbiAgZnVuY3Rpb24gb25DbG9zZShldmVudCkge1xuICAgIGlmIChcbiAgICAgICgoc3RhdGUuc29ja2V0ID0gbnVsbCksXG4gICAgICBjbGVhclRpbWVvdXQoc3RhdGUudGltZW91dEhhbmRsZXMucG9uZ1RpbWVvdXQpLFxuICAgICAgY2xlYXJJbnRlcnZhbChzdGF0ZS5pbnRlcnZhbEhhbmRsZXMuaGVhcnRiZWF0KSxcbiAgICAgIHN0YXRlLnRpbWVvdXRIYW5kbGVzLmZsdXNoICYmIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SGFuZGxlcy5mbHVzaCksXG4gICAgICBjbGVhclRpbWVvdXQoc3RhdGUudGltZW91dEhhbmRsZXMucmVjb25uZWN0KSxcbiAgICAgIChzdGF0ZS51c2VycyA9IHt9KSxcbiAgICAgIG5vdGlmeSh7IG90aGVyczogW3sgdHlwZTogXCJyZXNldFwiIH1dIH0pLFxuICAgICAgZXZlbnQuY29kZSA+PSA0ZTMgJiYgZXZlbnQuY29kZSA8PSA0MTAwKVxuICAgICkge1xuICAgICAgdXBkYXRlQ29ubmVjdGlvbih7IHN0YXRlOiBcImZhaWxlZFwiIH0pO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgTGl2ZWJsb2Nrc0Vycm9yKGV2ZW50LnJlYXNvbiwgZXZlbnQuY29kZSk7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHN0YXRlLmxpc3RlbmVycy5lcnJvcikgbGlzdGVuZXIoZXJyb3IpO1xuICAgICAgY29uc3QgZGVsYXkgPSBnZXRSZXRyeURlbGF5KCEwKTtcbiAgICAgIHN0YXRlLm51bWJlck9mUmV0cnkrKyxcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgIGBDb25uZWN0aW9uIHRvIExpdmVibG9ja3Mgd2Vic29ja2V0IHNlcnZlciBjbG9zZWQuIFJlYXNvbjogJHtlcnJvci5tZXNzYWdlfSAoY29kZTogJHtlcnJvci5jb2RlfSkuIFJldHJ5aW5nIGluICR7ZGVsYXl9bXMuYFxuICAgICAgICAgICksXG4gICAgICAgIHVwZGF0ZUNvbm5lY3Rpb24oeyBzdGF0ZTogXCJ1bmF2YWlsYWJsZVwiIH0pLFxuICAgICAgICAoc3RhdGUudGltZW91dEhhbmRsZXMucmVjb25uZWN0ID0gZWZmZWN0cy5zY2hlZHVsZVJlY29ubmVjdChkZWxheSkpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gV2Vic29ja2V0Q2xvc2VDb2Rlcy5DTE9TRV9XSVRIT1VUX1JFVFJZKVxuICAgICAgdXBkYXRlQ29ubmVjdGlvbih7IHN0YXRlOiBcImNsb3NlZFwiIH0pO1xuICAgIGVsc2Uge1xuICAgICAgY29uc3QgZGVsYXkgPSBnZXRSZXRyeURlbGF5KCk7XG4gICAgICBzdGF0ZS5udW1iZXJPZlJldHJ5KyssXG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJlxuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIGBDb25uZWN0aW9uIHRvIExpdmVibG9ja3Mgd2Vic29ja2V0IHNlcnZlciBjbG9zZWQgKGNvZGU6ICR7ZXZlbnQuY29kZX0pLiBSZXRyeWluZyBpbiAke2RlbGF5fW1zLmBcbiAgICAgICAgICApLFxuICAgICAgICB1cGRhdGVDb25uZWN0aW9uKHsgc3RhdGU6IFwidW5hdmFpbGFibGVcIiB9KSxcbiAgICAgICAgKHN0YXRlLnRpbWVvdXRIYW5kbGVzLnJlY29ubmVjdCA9IGVmZmVjdHMuc2NoZWR1bGVSZWNvbm5lY3QoZGVsYXkpKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gdXBkYXRlQ29ubmVjdGlvbihjb25uZWN0aW9uKSB7XG4gICAgc3RhdGUuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBzdGF0ZS5saXN0ZW5lcnMuY29ubmVjdGlvbilcbiAgICAgIGxpc3RlbmVyKGNvbm5lY3Rpb24uc3RhdGUpO1xuICB9XG4gIGZ1bmN0aW9uIGdldFJldHJ5RGVsYXkoc2xvdyA9ICExKSB7XG4gICAgcmV0dXJuIHNsb3dcbiAgICAgID8gQkFDS09GRl9SRVRSWV9ERUxBWVNfU0xPV1tcbiAgICAgICAgICBzdGF0ZS5udW1iZXJPZlJldHJ5IDwgQkFDS09GRl9SRVRSWV9ERUxBWVNfU0xPVy5sZW5ndGhcbiAgICAgICAgICAgID8gc3RhdGUubnVtYmVyT2ZSZXRyeVxuICAgICAgICAgICAgOiBCQUNLT0ZGX1JFVFJZX0RFTEFZU19TTE9XLmxlbmd0aCAtIDFcbiAgICAgICAgXVxuICAgICAgOiBCQUNLT0ZGX1JFVFJZX0RFTEFZU1tcbiAgICAgICAgICBzdGF0ZS5udW1iZXJPZlJldHJ5IDwgQkFDS09GRl9SRVRSWV9ERUxBWVMubGVuZ3RoXG4gICAgICAgICAgICA/IHN0YXRlLm51bWJlck9mUmV0cnlcbiAgICAgICAgICAgIDogQkFDS09GRl9SRVRSWV9ERUxBWVMubGVuZ3RoIC0gMVxuICAgICAgICBdO1xuICB9XG4gIGZ1bmN0aW9uIG9uRXJyb3IoKSB7fVxuICBmdW5jdGlvbiBvbk9wZW4oKSB7XG4gICAgY2xlYXJJbnRlcnZhbChzdGF0ZS5pbnRlcnZhbEhhbmRsZXMuaGVhcnRiZWF0KSxcbiAgICAgIChzdGF0ZS5pbnRlcnZhbEhhbmRsZXMuaGVhcnRiZWF0ID0gZWZmZWN0cy5zdGFydEhlYXJ0YmVhdEludGVydmFsKCkpLFxuICAgICAgXCJjb25uZWN0aW5nXCIgPT09IHN0YXRlLmNvbm5lY3Rpb24uc3RhdGUgJiZcbiAgICAgICAgKHVwZGF0ZUNvbm5lY3Rpb24oXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzdGF0ZS5jb25uZWN0aW9uKSwgeyBzdGF0ZTogXCJvcGVuXCIgfSlcbiAgICAgICAgKSxcbiAgICAgICAgKHN0YXRlLm51bWJlck9mUmV0cnkgPSAwKSxcbiAgICAgICAgdm9pZCAwICE9PSBzdGF0ZS5sYXN0Q29ubmVjdGlvbklkICYmXG4gICAgICAgICAgKChzdGF0ZS5idWZmZXIucHJlc2VuY2UgPSBzdGF0ZS5tZSksIHRyeUZsdXNoaW5nKCkpLFxuICAgICAgICAoc3RhdGUubGFzdENvbm5lY3Rpb25JZCA9IHN0YXRlLmNvbm5lY3Rpb24uaWQpLFxuICAgICAgICBzdGF0ZS5yb290ICYmXG4gICAgICAgICAgc3RhdGUuYnVmZmVyLm1lc3NhZ2VzLnB1c2goeyB0eXBlOiBDbGllbnRNc2dDb2RlLkZFVENIX1NUT1JBR0UgfSksXG4gICAgICAgIHRyeUZsdXNoaW5nKCkpO1xuICB9XG4gIGZ1bmN0aW9uIGhlYXJ0YmVhdCgpIHtcbiAgICBudWxsICE9IHN0YXRlLnNvY2tldCAmJlxuICAgICAgKGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SGFuZGxlcy5wb25nVGltZW91dCksXG4gICAgICAoc3RhdGUudGltZW91dEhhbmRsZXMucG9uZ1RpbWVvdXQgPSBlZmZlY3RzLnNjaGVkdWxlUG9uZ1RpbWVvdXQoKSksXG4gICAgICBzdGF0ZS5zb2NrZXQucmVhZHlTdGF0ZSA9PT0gc3RhdGUuc29ja2V0Lk9QRU4gJiZcbiAgICAgICAgc3RhdGUuc29ja2V0LnNlbmQoXCJwaW5nXCIpKTtcbiAgfVxuICBmdW5jdGlvbiBwb25nVGltZW91dCgpIHtcbiAgICByZWNvbm5lY3QoKTtcbiAgfVxuICBmdW5jdGlvbiByZWNvbm5lY3QoKSB7XG4gICAgc3RhdGUuc29ja2V0ICYmXG4gICAgICAoc3RhdGUuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsIG9uT3BlbiksXG4gICAgICBzdGF0ZS5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25NZXNzYWdlKSxcbiAgICAgIHN0YXRlLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgb25DbG9zZSksXG4gICAgICBzdGF0ZS5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIG9uRXJyb3IpLFxuICAgICAgc3RhdGUuc29ja2V0LmNsb3NlKCksXG4gICAgICAoc3RhdGUuc29ja2V0ID0gbnVsbCkpLFxuICAgICAgdXBkYXRlQ29ubmVjdGlvbih7IHN0YXRlOiBcInVuYXZhaWxhYmxlXCIgfSksXG4gICAgICBjbGVhclRpbWVvdXQoc3RhdGUudGltZW91dEhhbmRsZXMucG9uZ1RpbWVvdXQpLFxuICAgICAgc3RhdGUudGltZW91dEhhbmRsZXMuZmx1c2ggJiYgY2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXRIYW5kbGVzLmZsdXNoKSxcbiAgICAgIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SGFuZGxlcy5yZWNvbm5lY3QpLFxuICAgICAgY2xlYXJJbnRlcnZhbChzdGF0ZS5pbnRlcnZhbEhhbmRsZXMuaGVhcnRiZWF0KSxcbiAgICAgIGNvbm5lY3QoKTtcbiAgfVxuICBmdW5jdGlvbiBhcHBseUFuZFNlbmRPZmZsaW5lT3BzKG9mZmxpbmVPcHMpIHtcbiAgICBpZiAoMCA9PT0gb2ZmbGluZU9wcy5zaXplKSByZXR1cm47XG4gICAgY29uc3QgbWVzc2FnZXMgPSBbXSxcbiAgICAgIG9wcyA9IEFycmF5LmZyb20ob2ZmbGluZU9wcy52YWx1ZXMoKSksXG4gICAgICByZXN1bHQgPSBhcHBseShvcHMsICEwKTtcbiAgICBtZXNzYWdlcy5wdXNoKHsgdHlwZTogQ2xpZW50TXNnQ29kZS5VUERBVEVfU1RPUkFHRSwgb3BzOiBvcHMgfSksXG4gICAgICBub3RpZnkocmVzdWx0LnVwZGF0ZXMpLFxuICAgICAgZWZmZWN0cy5zZW5kKG1lc3NhZ2VzKTtcbiAgfVxuICBmdW5jdGlvbiB0cnlGbHVzaGluZygpIHtcbiAgICBjb25zdCBzdG9yYWdlT3BzID0gc3RhdGUuYnVmZmVyLnN0b3JhZ2VPcGVyYXRpb25zO1xuICAgIGlmIChcbiAgICAgIChzdG9yYWdlT3BzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgc3RvcmFnZU9wcy5mb3JFYWNoKChvcCkgPT4ge1xuICAgICAgICAgIHN0YXRlLm9mZmxpbmVPcGVyYXRpb25zLnNldChubihvcC5vcElkKSwgb3ApO1xuICAgICAgICB9KSxcbiAgICAgIG51bGwgPT0gc3RhdGUuc29ja2V0IHx8IHN0YXRlLnNvY2tldC5yZWFkeVN0YXRlICE9PSBzdGF0ZS5zb2NrZXQuT1BFTilcbiAgICApXG4gICAgICByZXR1cm4gdm9pZCAoc3RhdGUuYnVmZmVyLnN0b3JhZ2VPcGVyYXRpb25zID0gW10pO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHN0YXRlLmxhc3RGbHVzaFRpbWUgPiBjb250ZXh0LnRocm90dGxlRGVsYXkpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzID0gKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtdO1xuICAgICAgICBzdGF0ZS5idWZmZXIucHJlc2VuY2UgJiZcbiAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IENsaWVudE1zZ0NvZGUuVVBEQVRFX1BSRVNFTkNFLFxuICAgICAgICAgICAgZGF0YTogc3RhdGUuYnVmZmVyLnByZXNlbmNlLFxuICAgICAgICAgIH0pO1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIHN0YXRlLmJ1ZmZlci5tZXNzYWdlcykgbWVzc2FnZXMucHVzaChldmVudCk7XG4gICAgICAgIHN0YXRlLmJ1ZmZlci5zdG9yYWdlT3BlcmF0aW9ucy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgbWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBDbGllbnRNc2dDb2RlLlVQREFURV9TVE9SQUdFLFxuICAgICAgICAgICAgb3BzOiBzdGF0ZS5idWZmZXIuc3RvcmFnZU9wZXJhdGlvbnMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICAgIH0pKHN0YXRlKTtcbiAgICAgIGlmICgwID09PSBtZXNzYWdlcy5sZW5ndGgpIHJldHVybjtcbiAgICAgIGVmZmVjdHMuc2VuZChtZXNzYWdlcyksXG4gICAgICAgIChzdGF0ZS5idWZmZXIgPSB7XG4gICAgICAgICAgbWVzc2FnZXM6IFtdLFxuICAgICAgICAgIHN0b3JhZ2VPcGVyYXRpb25zOiBbXSxcbiAgICAgICAgICBwcmVzZW5jZTogbnVsbCxcbiAgICAgICAgfSksXG4gICAgICAgIChzdGF0ZS5sYXN0Rmx1c2hUaW1lID0gbm93KTtcbiAgICB9IGVsc2VcbiAgICAgIG51bGwgIT0gc3RhdGUudGltZW91dEhhbmRsZXMuZmx1c2ggJiZcbiAgICAgICAgY2xlYXJUaW1lb3V0KHN0YXRlLnRpbWVvdXRIYW5kbGVzLmZsdXNoKSxcbiAgICAgICAgKHN0YXRlLnRpbWVvdXRIYW5kbGVzLmZsdXNoID0gZWZmZWN0cy5kZWxheUZsdXNoKFxuICAgICAgICAgIGNvbnRleHQudGhyb3R0bGVEZWxheSAtIChub3cgLSBzdGF0ZS5sYXN0Rmx1c2hUaW1lKVxuICAgICAgICApKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRQcmVzZW5jZSgpIHtcbiAgICByZXR1cm4gc3RhdGUubWU7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGF0Y2gob3BzKSB7XG4gICAgc3RhdGUuYnVmZmVyLnN0b3JhZ2VPcGVyYXRpb25zLnB1c2goLi4ub3BzKSwgdHJ5Rmx1c2hpbmcoKTtcbiAgfVxuICBsZXQgX2dldEluaXRpYWxTdGF0ZVByb21pc2UgPSBudWxsLFxuICAgIF9nZXRJbml0aWFsU3RhdGVSZXNvbHZlciA9IG51bGw7XG4gIHJldHVybiB7XG4gICAgb25DbG9zZTogb25DbG9zZSxcbiAgICBvbk1lc3NhZ2U6IG9uTWVzc2FnZSxcbiAgICBhdXRoZW50aWNhdGlvblN1Y2Nlc3M6IGF1dGhlbnRpY2F0aW9uU3VjY2VzcyxcbiAgICBoZWFydGJlYXQ6IGhlYXJ0YmVhdCxcbiAgICBvbk5hdmlnYXRvck9ubGluZTogZnVuY3Rpb24gKCkge1xuICAgICAgXCJ1bmF2YWlsYWJsZVwiID09PSBzdGF0ZS5jb25uZWN0aW9uLnN0YXRlICYmIHJlY29ubmVjdCgpO1xuICAgIH0sXG4gICAgc2ltdWxhdGVTb2NrZXRDbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgc3RhdGUuc29ja2V0ICYmIChzdGF0ZS5zb2NrZXQgPSBudWxsKTtcbiAgICB9LFxuICAgIHNpbXVsYXRlU2VuZENsb3NlRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgb25DbG9zZShldmVudCk7XG4gICAgfSxcbiAgICBvblZpc2liaWxpdHlDaGFuZ2U6IGZ1bmN0aW9uICh2aXNpYmlsaXR5U3RhdGUpIHtcbiAgICAgIFwidmlzaWJsZVwiID09PSB2aXNpYmlsaXR5U3RhdGUgJiZcbiAgICAgICAgXCJvcGVuXCIgPT09IHN0YXRlLmNvbm5lY3Rpb24uc3RhdGUgJiZcbiAgICAgICAgaGVhcnRiZWF0KCk7XG4gICAgfSxcbiAgICBnZXRVbmRvU3RhY2s6ICgpID0+IHN0YXRlLnVuZG9TdGFjayxcbiAgICBnZXRJdGVtc0NvdW50OiAoKSA9PiBzdGF0ZS5pdGVtcy5zaXplLFxuICAgIGNvbm5lY3Q6IGNvbm5lY3QsXG4gICAgZGlzY29ubmVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgc3RhdGUuc29ja2V0ICYmXG4gICAgICAgIChzdGF0ZS5zb2NrZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9wZW5cIiwgb25PcGVuKSxcbiAgICAgICAgc3RhdGUuc29ja2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uTWVzc2FnZSksXG4gICAgICAgIHN0YXRlLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xvc2VcIiwgb25DbG9zZSksXG4gICAgICAgIHN0YXRlLnNvY2tldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgb25FcnJvciksXG4gICAgICAgIHN0YXRlLnNvY2tldC5jbG9zZSgpLFxuICAgICAgICAoc3RhdGUuc29ja2V0ID0gbnVsbCkpLFxuICAgICAgICB1cGRhdGVDb25uZWN0aW9uKHsgc3RhdGU6IFwiY2xvc2VkXCIgfSksXG4gICAgICAgIHN0YXRlLnRpbWVvdXRIYW5kbGVzLmZsdXNoICYmIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SGFuZGxlcy5mbHVzaCksXG4gICAgICAgIGNsZWFyVGltZW91dChzdGF0ZS50aW1lb3V0SGFuZGxlcy5yZWNvbm5lY3QpLFxuICAgICAgICBjbGVhclRpbWVvdXQoc3RhdGUudGltZW91dEhhbmRsZXMucG9uZ1RpbWVvdXQpLFxuICAgICAgICBjbGVhckludGVydmFsKHN0YXRlLmludGVydmFsSGFuZGxlcy5oZWFydGJlYXQpLFxuICAgICAgICAoc3RhdGUudXNlcnMgPSB7fSksXG4gICAgICAgIG5vdGlmeSh7IG90aGVyczogW3sgdHlwZTogXCJyZXNldFwiIH1dIH0pLFxuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHN0YXRlLmxpc3RlbmVycykgc3RhdGUubGlzdGVuZXJzW2tleV0gPSBbXTtcbiAgICAgICAgfSkoKTtcbiAgICB9LFxuICAgIHN1YnNjcmliZTogZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IHNlY29uZCB8fCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGZpcnN0KSB7XG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGZpcnN0KSB7XG4gICAgICAgICAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoZmlyc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzcGVjaWZ5IGEgbGlzdGVuZXIgY2FsbGJhY2tcIik7XG4gICAgICB9XG4gICAgICBpZiAoaXNMaXZlTm9kZShmaXJzdCkpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGZpcnN0O1xuICAgICAgICBpZiAobnVsbCA9PSBvcHRpb25zID8gdm9pZCAwIDogb3B0aW9ucy5pc0RlZXApIHtcbiAgICAgICAgICByZXR1cm4gKGZ1bmN0aW9uIChub2RlLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIGdlbmVyaWNTdWJzY3JpYmUoKHVwZGF0ZXMpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgcmVsYXRlZFVwZGF0ZXMgPSB1cGRhdGVzLmZpbHRlcigodXBkYXRlKSA9PlxuICAgICAgICAgICAgICAgIGlzU2FtZU5vZGVPckNoaWxkT2YodXBkYXRlLm5vZGUsIG5vZGUpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIHJlbGF0ZWRVcGRhdGVzLmxlbmd0aCA+IDAgJiYgY2FsbGJhY2socmVsYXRlZFVwZGF0ZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkobm9kZSwgc2Vjb25kKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGZ1bmN0aW9uIChub2RlLCBjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiBnZW5lcmljU3Vic2NyaWJlKCh1cGRhdGVzKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKVxuICAgICAgICAgICAgICB1cGRhdGUubm9kZS5faWQgPT09IG5vZGUuX2lkICYmIGNhbGxiYWNrKHVwZGF0ZS5ub2RlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkobm9kZSwgc2Vjb25kKTtcbiAgICAgIH1cbiAgICAgIGlmICghaXNSb29tRXZlbnROYW1lKGZpcnN0KSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcIiR7Zmlyc3R9XCIgaXMgbm90IGEgdmFsaWQgZXZlbnQgbmFtZWApO1xuICAgICAgY29uc3QgZXZlbnROYW1lID0gZmlyc3QsXG4gICAgICAgIGV2ZW50TGlzdGVuZXIgPSBzZWNvbmQ7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBzdGF0ZS5saXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKGV2ZW50TGlzdGVuZXIpLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gc3RhdGUubGlzdGVuZXJzW2V2ZW50TmFtZV07XG4gICAgICAgICAgcmVtb3ZlKGNhbGxiYWNrcywgZXZlbnRMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSxcbiAgICB1cGRhdGVQcmVzZW5jZTogZnVuY3Rpb24gKG92ZXJyaWRlcywgb3B0aW9ucykge1xuICAgICAgY29uc3Qgb2xkVmFsdWVzID0ge307XG4gICAgICBudWxsID09IHN0YXRlLmJ1ZmZlci5wcmVzZW5jZSAmJiAoc3RhdGUuYnVmZmVyLnByZXNlbmNlID0ge30pO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3ZlcnJpZGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlVmFsdWUgPSBvdmVycmlkZXNba2V5XTtcbiAgICAgICAgdm9pZCAwICE9PSBvdmVycmlkZVZhbHVlICYmXG4gICAgICAgICAgKChzdGF0ZS5idWZmZXIucHJlc2VuY2Vba2V5XSA9IG92ZXJyaWRlVmFsdWUpLFxuICAgICAgICAgIChvbGRWYWx1ZXNba2V5XSA9IHN0YXRlLm1lW2tleV0pKTtcbiAgICAgIH1cbiAgICAgIChzdGF0ZS5tZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc3RhdGUubWUpLCBvdmVycmlkZXMpKSxcbiAgICAgICAgc3RhdGUuaXNCYXRjaGluZ1xuICAgICAgICAgID8gKChudWxsID09IG9wdGlvbnMgPyB2b2lkIDAgOiBvcHRpb25zLmFkZFRvSGlzdG9yeSkgJiZcbiAgICAgICAgICAgICAgc3RhdGUuYmF0Y2gucmV2ZXJzZU9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcInByZXNlbmNlXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogb2xkVmFsdWVzLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIChzdGF0ZS5iYXRjaC51cGRhdGVzLnByZXNlbmNlID0gITApKVxuICAgICAgICAgIDogKHRyeUZsdXNoaW5nKCksXG4gICAgICAgICAgICAobnVsbCA9PSBvcHRpb25zID8gdm9pZCAwIDogb3B0aW9ucy5hZGRUb0hpc3RvcnkpICYmXG4gICAgICAgICAgICAgIGFkZFRvVW5kb1N0YWNrKFt7IHR5cGU6IFwicHJlc2VuY2VcIiwgZGF0YTogb2xkVmFsdWVzIH1dKSxcbiAgICAgICAgICAgIG5vdGlmeSh7IHByZXNlbmNlOiAhMCB9KSk7XG4gICAgfSxcbiAgICBicm9hZGNhc3RFdmVudDogZnVuY3Rpb24gKFxuICAgICAgZXZlbnQsXG4gICAgICBvcHRpb25zID0geyBzaG91bGRRdWV1ZUV2ZW50SWZOb3RSZWFkeTogITEgfVxuICAgICkge1xuICAgICAgKG51bGwgPT0gc3RhdGUuc29ja2V0ICYmIDAgPT0gb3B0aW9ucy5zaG91bGRRdWV1ZUV2ZW50SWZOb3RSZWFkeSkgfHxcbiAgICAgICAgKHN0YXRlLmJ1ZmZlci5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiBDbGllbnRNc2dDb2RlLkJST0FEQ0FTVF9FVkVOVCxcbiAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgIH0pLFxuICAgICAgICB0cnlGbHVzaGluZygpKTtcbiAgICB9LFxuICAgIGJhdGNoOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGlmIChzdGF0ZS5pc0JhdGNoaW5nKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJiYXRjaCBzaG91bGQgbm90IGJlIGNhbGxlZCBkdXJpbmcgYSBiYXRjaFwiKTtcbiAgICAgIHN0YXRlLmlzQmF0Y2hpbmcgPSAhMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAoc3RhdGUuaXNCYXRjaGluZyA9ICExKSxcbiAgICAgICAgICBzdGF0ZS5iYXRjaC5yZXZlcnNlT3BzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICAgIGFkZFRvVW5kb1N0YWNrKHN0YXRlLmJhdGNoLnJldmVyc2VPcHMpLFxuICAgICAgICAgIHN0YXRlLmJhdGNoLm9wcy5sZW5ndGggPiAwICYmIChzdGF0ZS5yZWRvU3RhY2sgPSBbXSksXG4gICAgICAgICAgc3RhdGUuYmF0Y2gub3BzLmxlbmd0aCA+IDAgJiYgZGlzcGF0Y2goc3RhdGUuYmF0Y2gub3BzKSxcbiAgICAgICAgICBub3RpZnkoc3RhdGUuYmF0Y2gudXBkYXRlcyksXG4gICAgICAgICAgKHN0YXRlLmJhdGNoID0ge1xuICAgICAgICAgICAgb3BzOiBbXSxcbiAgICAgICAgICAgIHJldmVyc2VPcHM6IFtdLFxuICAgICAgICAgICAgdXBkYXRlczogeyBvdGhlcnM6IFtdLCBzdG9yYWdlVXBkYXRlczogbmV3IE1hcCgpLCBwcmVzZW5jZTogITEgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0cnlGbHVzaGluZygpO1xuICAgICAgfVxuICAgIH0sXG4gICAgdW5kbzogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHN0YXRlLmlzQmF0Y2hpbmcpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInVuZG8gaXMgbm90IGFsbG93ZWQgZHVyaW5nIGEgYmF0Y2hcIik7XG4gICAgICBjb25zdCBoaXN0b3J5SXRlbSA9IHN0YXRlLnVuZG9TdGFjay5wb3AoKTtcbiAgICAgIGlmIChudWxsID09IGhpc3RvcnlJdGVtKSByZXR1cm47XG4gICAgICBzdGF0ZS5pc0hpc3RvcnlQYXVzZWQgPSAhMTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGFwcGx5KGhpc3RvcnlJdGVtLCAhMCk7XG4gICAgICBub3RpZnkocmVzdWx0LnVwZGF0ZXMpLCBzdGF0ZS5yZWRvU3RhY2sucHVzaChyZXN1bHQucmV2ZXJzZSk7XG4gICAgICBmb3IgKGNvbnN0IG9wIG9mIGhpc3RvcnlJdGVtKVxuICAgICAgICBcInByZXNlbmNlXCIgIT09IG9wLnR5cGUgJiYgc3RhdGUuYnVmZmVyLnN0b3JhZ2VPcGVyYXRpb25zLnB1c2gob3ApO1xuICAgICAgdHJ5Rmx1c2hpbmcoKTtcbiAgICB9LFxuICAgIHJlZG86IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzdGF0ZS5pc0JhdGNoaW5nKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJyZWRvIGlzIG5vdCBhbGxvd2VkIGR1cmluZyBhIGJhdGNoXCIpO1xuICAgICAgY29uc3QgaGlzdG9yeUl0ZW0gPSBzdGF0ZS5yZWRvU3RhY2sucG9wKCk7XG4gICAgICBpZiAobnVsbCA9PSBoaXN0b3J5SXRlbSkgcmV0dXJuO1xuICAgICAgc3RhdGUuaXNIaXN0b3J5UGF1c2VkID0gITE7XG4gICAgICBjb25zdCByZXN1bHQgPSBhcHBseShoaXN0b3J5SXRlbSwgITApO1xuICAgICAgbm90aWZ5KHJlc3VsdC51cGRhdGVzKSwgc3RhdGUudW5kb1N0YWNrLnB1c2gocmVzdWx0LnJldmVyc2UpO1xuICAgICAgZm9yIChjb25zdCBvcCBvZiBoaXN0b3J5SXRlbSlcbiAgICAgICAgXCJwcmVzZW5jZVwiICE9PSBvcC50eXBlICYmIHN0YXRlLmJ1ZmZlci5zdG9yYWdlT3BlcmF0aW9ucy5wdXNoKG9wKTtcbiAgICAgIHRyeUZsdXNoaW5nKCk7XG4gICAgfSxcbiAgICBwYXVzZUhpc3Rvcnk6IGZ1bmN0aW9uICgpIHtcbiAgICAgIChzdGF0ZS5wYXVzZWRIaXN0b3J5ID0gW10pLCAoc3RhdGUuaXNIaXN0b3J5UGF1c2VkID0gITApO1xuICAgIH0sXG4gICAgcmVzdW1lSGlzdG9yeTogZnVuY3Rpb24gKCkge1xuICAgICAgKHN0YXRlLmlzSGlzdG9yeVBhdXNlZCA9ICExKSxcbiAgICAgICAgc3RhdGUucGF1c2VkSGlzdG9yeS5sZW5ndGggPiAwICYmIGFkZFRvVW5kb1N0YWNrKHN0YXRlLnBhdXNlZEhpc3RvcnkpLFxuICAgICAgICAoc3RhdGUucGF1c2VkSGlzdG9yeSA9IFtdKTtcbiAgICB9LFxuICAgIGdldFN0b3JhZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBzdGF0ZS5yb290XG4gICAgICAgID8gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHJlc29sdmUoeyByb290OiBzdGF0ZS5yb290IH0pKVxuICAgICAgICA6IChudWxsID09IF9nZXRJbml0aWFsU3RhdGVQcm9taXNlICYmXG4gICAgICAgICAgICAoc3RhdGUuYnVmZmVyLm1lc3NhZ2VzLnB1c2goeyB0eXBlOiBDbGllbnRNc2dDb2RlLkZFVENIX1NUT1JBR0UgfSksXG4gICAgICAgICAgICB0cnlGbHVzaGluZygpLFxuICAgICAgICAgICAgKF9nZXRJbml0aWFsU3RhdGVQcm9taXNlID0gbmV3IFByb21pc2UoXG4gICAgICAgICAgICAgIChyZXNvbHZlKSA9PiAoX2dldEluaXRpYWxTdGF0ZVJlc29sdmVyID0gcmVzb2x2ZSlcbiAgICAgICAgICAgICkpKSxcbiAgICAgICAgICBfZ2V0SW5pdGlhbFN0YXRlUHJvbWlzZS50aGVuKCgpID0+ICh7IHJvb3Q6IG5uKHN0YXRlLnJvb3QpIH0pKSk7XG4gICAgfSxcbiAgICBzZWxlY3RvcnM6IHtcbiAgICAgIGdldENvbm5lY3Rpb25TdGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gc3RhdGUuY29ubmVjdGlvbi5zdGF0ZTtcbiAgICAgIH0sXG4gICAgICBnZXRTZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBcIm9wZW5cIiA9PT0gc3RhdGUuY29ubmVjdGlvbi5zdGF0ZSB8fFxuICAgICAgICAgIFwiY29ubmVjdGluZ1wiID09PSBzdGF0ZS5jb25uZWN0aW9uLnN0YXRlXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIGNvbm5lY3Rpb25JZDogc3RhdGUuY29ubmVjdGlvbi5pZCxcbiAgICAgICAgICAgICAgaWQ6IHN0YXRlLmNvbm5lY3Rpb24udXNlcklkLFxuICAgICAgICAgICAgICBpbmZvOiBzdGF0ZS5jb25uZWN0aW9uLnVzZXJJbmZvLFxuICAgICAgICAgICAgICBwcmVzZW5jZTogZ2V0UHJlc2VuY2UoKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IG51bGw7XG4gICAgICB9LFxuICAgICAgZ2V0UHJlc2VuY2U6IGdldFByZXNlbmNlLFxuICAgICAgZ2V0T3RoZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5vdGhlcnM7XG4gICAgICB9LFxuICAgIH0sXG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVSb29tKG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgdmFyIF9hLCBfYjtcbiAgY29uc3QgaW5pdGlhbFByZXNlbmNlID1cbiAgICAgIG51bGwgIT09IChfYSA9IG9wdGlvbnMuaW5pdGlhbFByZXNlbmNlKSAmJiB2b2lkIDAgIT09IF9hXG4gICAgICAgID8gX2FcbiAgICAgICAgOiBvcHRpb25zLmRlZmF1bHRQcmVzZW5jZSxcbiAgICBpbml0aWFsU3RvcmFnZSA9XG4gICAgICBudWxsICE9PSAoX2IgPSBvcHRpb25zLmluaXRpYWxTdG9yYWdlKSAmJiB2b2lkIDAgIT09IF9iXG4gICAgICAgID8gX2JcbiAgICAgICAgOiBvcHRpb25zLmRlZmF1bHRTdG9yYWdlUm9vdCxcbiAgICBtYWNoaW5lID0gbWFrZVN0YXRlTWFjaGluZShcbiAgICAgIChmdW5jdGlvbiAoaW5pdGlhbFByZXNlbmNlLCBpbml0aWFsU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbm5lY3Rpb246IHsgc3RhdGU6IFwiY2xvc2VkXCIgfSxcbiAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICBsYXN0Q29ubmVjdGlvbklkOiBudWxsLFxuICAgICAgICAgIHNvY2tldDogbnVsbCxcbiAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgIGV2ZW50OiBbXSxcbiAgICAgICAgICAgIG90aGVyczogW10sXG4gICAgICAgICAgICBcIm15LXByZXNlbmNlXCI6IFtdLFxuICAgICAgICAgICAgZXJyb3I6IFtdLFxuICAgICAgICAgICAgY29ubmVjdGlvbjogW10sXG4gICAgICAgICAgICBzdG9yYWdlOiBbXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG51bWJlck9mUmV0cnk6IDAsXG4gICAgICAgICAgbGFzdEZsdXNoVGltZTogMCxcbiAgICAgICAgICB0aW1lb3V0SGFuZGxlczogeyBmbHVzaDogbnVsbCwgcmVjb25uZWN0OiAwLCBwb25nVGltZW91dDogMCB9LFxuICAgICAgICAgIGJ1ZmZlcjoge1xuICAgICAgICAgICAgcHJlc2VuY2U6IG51bGwgPT0gaW5pdGlhbFByZXNlbmNlID8ge30gOiBpbml0aWFsUHJlc2VuY2UsXG4gICAgICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICAgICAgICBzdG9yYWdlT3BlcmF0aW9uczogW10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnRlcnZhbEhhbmRsZXM6IHsgaGVhcnRiZWF0OiAwIH0sXG4gICAgICAgICAgbWU6IG51bGwgPT0gaW5pdGlhbFByZXNlbmNlID8ge30gOiBpbml0aWFsUHJlc2VuY2UsXG4gICAgICAgICAgdXNlcnM6IHt9LFxuICAgICAgICAgIG90aGVyczogbWFrZU90aGVycyh7fSksXG4gICAgICAgICAgZGVmYXVsdFN0b3JhZ2VSb290OiBpbml0aWFsU3RvcmFnZSxcbiAgICAgICAgICBpZEZhY3Rvcnk6IG51bGwsXG4gICAgICAgICAgY2xvY2s6IDAsXG4gICAgICAgICAgb3BDbG9jazogMCxcbiAgICAgICAgICBpdGVtczogbmV3IE1hcCgpLFxuICAgICAgICAgIHJvb3Q6IHZvaWQgMCxcbiAgICAgICAgICB1bmRvU3RhY2s6IFtdLFxuICAgICAgICAgIHJlZG9TdGFjazogW10sXG4gICAgICAgICAgaXNIaXN0b3J5UGF1c2VkOiAhMSxcbiAgICAgICAgICBwYXVzZWRIaXN0b3J5OiBbXSxcbiAgICAgICAgICBpc0JhdGNoaW5nOiAhMSxcbiAgICAgICAgICBiYXRjaDoge1xuICAgICAgICAgICAgb3BzOiBbXSxcbiAgICAgICAgICAgIHVwZGF0ZXM6IHsgc3RvcmFnZVVwZGF0ZXM6IG5ldyBNYXAoKSwgcHJlc2VuY2U6ICExLCBvdGhlcnM6IFtdIH0sXG4gICAgICAgICAgICByZXZlcnNlT3BzOiBbXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9mZmxpbmVPcGVyYXRpb25zOiBuZXcgTWFwKCksXG4gICAgICAgIH07XG4gICAgICB9KShcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBpbml0aWFsUHJlc2VuY2VcbiAgICAgICAgICA/IGluaXRpYWxQcmVzZW5jZShjb250ZXh0LnJvb21JZClcbiAgICAgICAgICA6IGluaXRpYWxQcmVzZW5jZSxcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiBpbml0aWFsU3RvcmFnZVxuICAgICAgICAgID8gaW5pdGlhbFN0b3JhZ2UoY29udGV4dC5yb29tSWQpXG4gICAgICAgICAgOiBpbml0aWFsU3RvcmFnZVxuICAgICAgKSxcbiAgICAgIGNvbnRleHRcbiAgICApLFxuICAgIHJvb20gPSB7XG4gICAgICBpZDogY29udGV4dC5yb29tSWQsXG4gICAgICBnZXRDb25uZWN0aW9uU3RhdGU6IG1hY2hpbmUuc2VsZWN0b3JzLmdldENvbm5lY3Rpb25TdGF0ZSxcbiAgICAgIGdldFNlbGY6IG1hY2hpbmUuc2VsZWN0b3JzLmdldFNlbGYsXG4gICAgICBzdWJzY3JpYmU6IG1hY2hpbmUuc3Vic2NyaWJlLFxuICAgICAgZ2V0UHJlc2VuY2U6IG1hY2hpbmUuc2VsZWN0b3JzLmdldFByZXNlbmNlLFxuICAgICAgdXBkYXRlUHJlc2VuY2U6IG1hY2hpbmUudXBkYXRlUHJlc2VuY2UsXG4gICAgICBnZXRPdGhlcnM6IG1hY2hpbmUuc2VsZWN0b3JzLmdldE90aGVycyxcbiAgICAgIGJyb2FkY2FzdEV2ZW50OiBtYWNoaW5lLmJyb2FkY2FzdEV2ZW50LFxuICAgICAgZ2V0U3RvcmFnZTogbWFjaGluZS5nZXRTdG9yYWdlLFxuICAgICAgYmF0Y2g6IG1hY2hpbmUuYmF0Y2gsXG4gICAgICBoaXN0b3J5OiB7XG4gICAgICAgIHVuZG86IG1hY2hpbmUudW5kbyxcbiAgICAgICAgcmVkbzogbWFjaGluZS5yZWRvLFxuICAgICAgICBwYXVzZTogbWFjaGluZS5wYXVzZUhpc3RvcnksXG4gICAgICAgIHJlc3VtZTogbWFjaGluZS5yZXN1bWVIaXN0b3J5LFxuICAgICAgfSxcbiAgICAgIF9fSU5URVJOQUxfRE9fTk9UX1VTRToge1xuICAgICAgICBzaW11bGF0ZUNsb3NlV2Vic29ja2V0OiBtYWNoaW5lLnNpbXVsYXRlU29ja2V0Q2xvc2UsXG4gICAgICAgIHNpbXVsYXRlU2VuZENsb3NlRXZlbnQ6IG1hY2hpbmUuc2ltdWxhdGVTZW5kQ2xvc2VFdmVudCxcbiAgICAgIH0sXG4gICAgfTtcbiAgcmV0dXJuIHtcbiAgICBjb25uZWN0OiBtYWNoaW5lLmNvbm5lY3QsXG4gICAgZGlzY29ubmVjdDogbWFjaGluZS5kaXNjb25uZWN0LFxuICAgIG9uTmF2aWdhdG9yT25saW5lOiBtYWNoaW5lLm9uTmF2aWdhdG9yT25saW5lLFxuICAgIG9uVmlzaWJpbGl0eUNoYW5nZTogbWFjaGluZS5vblZpc2liaWxpdHlDaGFuZ2UsXG4gICAgcm9vbTogcm9vbSxcbiAgfTtcbn1cbmNsYXNzIExpdmVibG9ja3NFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpLCAodGhpcy5jb2RlID0gY29kZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGZldGNoQXV0aEVuZHBvaW50KGZldGNoLCBlbmRwb2ludCwgYm9keSkge1xuICByZXR1cm4gZmV0Y2goZW5kcG9pbnQsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgfSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAoIXJlcy5vaylcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEV4cGVjdGVkIGEgc3RhdHVzIDIwMCBidXQgZ290ICR7cmVzLnN0YXR1c30gd2hlbiBkb2luZyBhIFBPU1QgcmVxdWVzdCBvbiBcIiR7ZW5kcG9pbnR9XCJgXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKS5jYXRjaCgoZXIpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEV4cGVjdGVkIGEgSlNPTiByZXNwb25zZSB3aGVuIGRvaW5nIGEgUE9TVCByZXF1ZXN0IG9uIFwiJHtlbmRwb2ludH1cIi4gJHtlcn1gXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkgfHwgXCJzdHJpbmdcIiAhPSB0eXBlb2YgZGF0YS50b2tlbilcbiAgICAgICAgdGhyb3cgbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3IoXG4gICAgICAgICAgYEV4cGVjdGVkIGEgSlNPTiByZXNwb25zZSBvZiB0aGUgZm9ybSBcXGB7IHRva2VuOiBcIi4uLlwiIH1cXGAgd2hlbiBkb2luZyBhIFBPU1QgcmVxdWVzdCBvbiBcIiR7ZW5kcG9pbnR9XCIsIGJ1dCBnb3QgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgICApfWBcbiAgICAgICAgKTtcbiAgICAgIGNvbnN0IHsgdG9rZW46IHRva2VuIH0gPSBkYXRhO1xuICAgICAgcmV0dXJuIHsgdG9rZW46IHRva2VuIH07XG4gICAgfSk7XG59XG5jbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUNsaWVudChvcHRpb25zKSB7XG4gIGNvbnN0IGNsaWVudE9wdGlvbnMgPSBvcHRpb25zLFxuICAgIHRocm90dGxlRGVsYXkgPSAoZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMudGhyb3R0bGUpIHJldHVybiAxMDA7XG4gICAgICBpZiAoXG4gICAgICAgIFwibnVtYmVyXCIgIT0gdHlwZW9mIG9wdGlvbnMudGhyb3R0bGUgfHxcbiAgICAgICAgb3B0aW9ucy50aHJvdHRsZSA8IDgwIHx8XG4gICAgICAgIG9wdGlvbnMudGhyb3R0bGUgPiAxZTNcbiAgICAgIClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhyb3R0bGUgc2hvdWxkIGJlIGEgbnVtYmVyIGJldHdlZW4gODAgYW5kIDEwMDAuXCIpO1xuICAgICAgcmV0dXJuIG9wdGlvbnMudGhyb3R0bGU7XG4gICAgfSkob3B0aW9ucyksXG4gICAgcm9vbXMgPSBuZXcgTWFwKCk7XG4gIHJldHVybiAoXG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmXG4gICAgICB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgWywgcm9vbV0gb2Ygcm9vbXMpIHJvb20ub25OYXZpZ2F0b3JPbmxpbmUoKTtcbiAgICAgIH0pLFxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ICYmXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgWywgcm9vbV0gb2Ygcm9vbXMpXG4gICAgICAgICAgcm9vbS5vblZpc2liaWxpdHlDaGFuZ2UoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICAgIH0pLFxuICAgIHtcbiAgICAgIGdldFJvb206IGZ1bmN0aW9uIChyb29tSWQpIHtcbiAgICAgICAgY29uc3QgaW50ZXJuYWxSb29tID0gcm9vbXMuZ2V0KHJvb21JZCk7XG4gICAgICAgIHJldHVybiBpbnRlcm5hbFJvb20gPyBpbnRlcm5hbFJvb20ucm9vbSA6IG51bGw7XG4gICAgICB9LFxuICAgICAgZW50ZXI6IGZ1bmN0aW9uIChyb29tSWQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGxldCBpbnRlcm5hbFJvb20gPSByb29tcy5nZXQocm9vbUlkKTtcbiAgICAgICAgaWYgKGludGVybmFsUm9vbSkgcmV0dXJuIGludGVybmFsUm9vbS5yb29tO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgKGVycm9ySWYoXG4gICAgICAgICAgICBvcHRpb25zLmRlZmF1bHRQcmVzZW5jZSxcbiAgICAgICAgICAgIFwiQXJndW1lbnQgYGRlZmF1bHRQcmVzZW5jZWAgd2lsbCBiZSByZW1vdmVkIGluIEBsaXZlYmxvY2tzL2NsaWVudCAwLjE4LiBQbGVhc2UgdXNlIGBpbml0aWFsUHJlc2VuY2VgIGluc3RlYWQuIEZvciBtb3JlIGluZm8sIHNlZSBodHRwczovL2JpdC5seS8zTml5NWFQXCJcbiAgICAgICAgICApLFxuICAgICAgICAgIGVycm9ySWYoXG4gICAgICAgICAgICBvcHRpb25zLmRlZmF1bHRTdG9yYWdlUm9vdCxcbiAgICAgICAgICAgIFwiQXJndW1lbnQgYGRlZmF1bHRTdG9yYWdlUm9vdGAgd2lsbCBiZSByZW1vdmVkIGluIEBsaXZlYmxvY2tzL2NsaWVudCAwLjE4LiBQbGVhc2UgdXNlIGBpbml0aWFsU3RvcmFnZWAgaW5zdGVhZC4gRm9yIG1vcmUgaW5mbywgc2VlIGh0dHBzOi8vYml0Lmx5LzNOaXk1YVBcIlxuICAgICAgICAgICksXG4gICAgICAgICAgKGludGVybmFsUm9vbSA9IGNyZWF0ZVJvb20oXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGluaXRpYWxQcmVzZW5jZTogb3B0aW9ucy5pbml0aWFsUHJlc2VuY2UsXG4gICAgICAgICAgICAgIGluaXRpYWxTdG9yYWdlOiBvcHRpb25zLmluaXRpYWxTdG9yYWdlLFxuICAgICAgICAgICAgICBkZWZhdWx0UHJlc2VuY2U6IG9wdGlvbnMuZGVmYXVsdFByZXNlbmNlLFxuICAgICAgICAgICAgICBkZWZhdWx0U3RvcmFnZVJvb3Q6IG9wdGlvbnMuZGVmYXVsdFN0b3JhZ2VSb290LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcm9vbUlkOiByb29tSWQsXG4gICAgICAgICAgICAgIHRocm90dGxlRGVsYXk6IHRocm90dGxlRGVsYXksXG4gICAgICAgICAgICAgIHBvbHlmaWxsczogY2xpZW50T3B0aW9ucy5wb2x5ZmlsbHMsXG4gICAgICAgICAgICAgIFdlYlNvY2tldFBvbHlmaWxsOiBjbGllbnRPcHRpb25zLldlYlNvY2tldFBvbHlmaWxsLFxuICAgICAgICAgICAgICBmZXRjaFBvbHlmaWxsOiBjbGllbnRPcHRpb25zLmZldGNoUG9seWZpbGwsXG4gICAgICAgICAgICAgIGxpdmVibG9ja3NTZXJ2ZXI6XG4gICAgICAgICAgICAgICAgKG51bGwgPT0gY2xpZW50T3B0aW9uc1xuICAgICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICAgIDogY2xpZW50T3B0aW9ucy5saXZlYmxvY2tzU2VydmVyKSB8fFxuICAgICAgICAgICAgICAgIFwid3NzOi8vbGl2ZWJsb2Nrcy5uZXQvdjZcIixcbiAgICAgICAgICAgICAgYXV0aGVudGljYXRpb246IHByZXBhcmVBdXRoZW50aWNhdGlvbihjbGllbnRPcHRpb25zKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApKSxcbiAgICAgICAgICByb29tcy5zZXQocm9vbUlkLCBpbnRlcm5hbFJvb20pLFxuICAgICAgICAgICFvcHRpb25zLkRPX05PVF9VU0Vfd2l0aG91dENvbm5lY3RpbmcpXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiID09IHR5cGVvZiBhdG9iKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIG51bGwgPT1cbiAgICAgICAgICAgICAgKG51bGwgPT09IChfYSA9IGNsaWVudE9wdGlvbnMucG9seWZpbGxzKSB8fCB2b2lkIDAgPT09IF9hXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IF9hLmF0b2IpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIllvdSBuZWVkIHRvIHBvbHlmaWxsIGF0b2IgdG8gdXNlIHRoZSBjbGllbnQgaW4geW91ciBlbnZpcm9ubWVudC4gUGxlYXNlIGZvbGxvdyB0aGUgaW5zdHJ1Y3Rpb25zIGF0IGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2Vycm9ycy9saXZlYmxvY2tzLWNsaWVudC9hdG9iLXBvbHlmaWxsXCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGdsb2JhbC5hdG9iID0gY2xpZW50T3B0aW9ucy5wb2x5ZmlsbHMuYXRvYjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW50ZXJuYWxSb29tLmNvbm5lY3QoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW50ZXJuYWxSb29tLnJvb207XG4gICAgICB9LFxuICAgICAgbGVhdmU6IGZ1bmN0aW9uIChyb29tSWQpIHtcbiAgICAgICAgY29uc3Qgcm9vbSA9IHJvb21zLmdldChyb29tSWQpO1xuICAgICAgICByb29tICYmIChyb29tLmRpc2Nvbm5lY3QoKSwgcm9vbXMuZGVsZXRlKHJvb21JZCkpO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59XG5mdW5jdGlvbiBwcmVwYXJlQXV0aGVudGljYXRpb24oY2xpZW50T3B0aW9ucykge1xuICBjb25zdCB7IHB1YmxpY0FwaUtleTogcHVibGljQXBpS2V5LCBhdXRoRW5kcG9pbnQ6IGF1dGhFbmRwb2ludCB9ID1cbiAgICBjbGllbnRPcHRpb25zO1xuICBpZiAodm9pZCAwICE9PSBhdXRoRW5kcG9pbnQgJiYgdm9pZCAwICE9PSBwdWJsaWNBcGlLZXkpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJZb3UgY2Fubm90IHVzZSBib3RoIHB1YmxpY0FwaUtleSBhbmQgYXV0aEVuZHBvaW50LiBQbGVhc2UgdXNlIGVpdGhlciBwdWJsaWNBcGlLZXkgb3IgYXV0aEVuZHBvaW50LCBidXQgbm90IGJvdGguIEZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3MtY2xpZW50I2NyZWF0ZUNsaWVudFwiXG4gICAgKTtcbiAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHB1YmxpY0FwaUtleSkge1xuICAgIGlmIChwdWJsaWNBcGlLZXkuc3RhcnRzV2l0aChcInNrX1wiKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJbnZhbGlkIHB1YmxpY0FwaUtleS4gWW91IGFyZSB1c2luZyB0aGUgc2VjcmV0IGtleSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIHRoZSBwdWJsaWMga2V5IGluc3RlYWQuIEZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3MtY2xpZW50I2NyZWF0ZUNsaWVudFB1YmxpY0tleVwiXG4gICAgICApO1xuICAgIGlmICghcHVibGljQXBpS2V5LnN0YXJ0c1dpdGgoXCJwa19cIikpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiSW52YWxpZCBrZXkuIFBsZWFzZSB1c2UgdGhlIHB1YmxpYyBrZXkgZm9ybWF0OiBwa188cHVibGljIGtleT4uIEZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3MtY2xpZW50I2NyZWF0ZUNsaWVudFB1YmxpY0tleVwiXG4gICAgICApO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInB1YmxpY1wiLFxuICAgICAgcHVibGljQXBpS2V5OiBwdWJsaWNBcGlLZXksXG4gICAgICB1cmw6XG4gICAgICAgIGNsaWVudE9wdGlvbnMucHVibGljQXV0aG9yaXplRW5kcG9pbnQgfHxcbiAgICAgICAgXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXBpL3B1YmxpYy9hdXRob3JpemVcIixcbiAgICB9O1xuICB9XG4gIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBhdXRoRW5kcG9pbnQpXG4gICAgcmV0dXJuIHsgdHlwZTogXCJwcml2YXRlXCIsIHVybDogYXV0aEVuZHBvaW50IH07XG4gIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGF1dGhFbmRwb2ludClcbiAgICByZXR1cm4geyB0eXBlOiBcImN1c3RvbVwiLCBjYWxsYmFjazogYXV0aEVuZHBvaW50IH07XG4gIGlmICh2b2lkIDAgIT09IGF1dGhFbmRwb2ludClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcImF1dGhFbmRwb2ludCBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgZnVuY3Rpb24uIEZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3MtY2xpZW50I2NyZWF0ZUNsaWVudEF1dGhFbmRwb2ludFwiXG4gICAgKTtcbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIFwiSW52YWxpZCBMaXZlYmxvY2tzIGNsaWVudCBvcHRpb25zLiBGb3IgbW9yZSBpbmZvcm1hdGlvbjogaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvYXBpLXJlZmVyZW5jZS9saXZlYmxvY2tzLWNsaWVudCNjcmVhdGVDbGllbnRcIlxuICApO1xufVxuZXhwb3J0IHsgY3JlYXRlQ2xpZW50IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@liveblocks/client/index.mjs\n");

/***/ }),

/***/ "./node_modules/@liveblocks/client/internal.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@liveblocks/client/internal.mjs ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClientMsgCode\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.C; },\n/* harmony export */   \"CrdtType\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.I; },\n/* harmony export */   \"OpCode\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.e; },\n/* harmony export */   \"ServerMsgCode\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.S; },\n/* harmony export */   \"WebsocketCloseCodes\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.W; },\n/* harmony export */   \"assertNever\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.x; },\n/* harmony export */   \"b64decode\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.M; },\n/* harmony export */   \"comparePosition\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.G; },\n/* harmony export */   \"deprecate\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.D; },\n/* harmony export */   \"deprecateIf\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.E; },\n/* harmony export */   \"errorIf\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.o; },\n/* harmony export */   \"isAppOnlyAuthToken\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.y; },\n/* harmony export */   \"isAuthToken\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.z; },\n/* harmony export */   \"isChildCrdt\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.K; },\n/* harmony export */   \"isJsonArray\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.h; },\n/* harmony export */   \"isJsonObject\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.l; },\n/* harmony export */   \"isJsonScalar\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.J; },\n/* harmony export */   \"isPlainObject\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b; },\n/* harmony export */   \"isRoomAuthToken\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.A; },\n/* harmony export */   \"isRootCrdt\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.k; },\n/* harmony export */   \"isScope\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.B; },\n/* harmony export */   \"lsonToJson\": function() { return /* binding */ lsonToJson; },\n/* harmony export */   \"makePosition\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.H; },\n/* harmony export */   \"nn\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.n; },\n/* harmony export */   \"patchImmutableObject\": function() { return /* binding */ patchImmutableObject; },\n/* harmony export */   \"patchLiveObjectKey\": function() { return /* binding */ patchLiveObjectKey; },\n/* harmony export */   \"throwUsageError\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.F; },\n/* harmony export */   \"tryParseJson\": function() { return /* reexport safe */ _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.t; }\n/* harmony export */ });\n/* harmony import */ var _shared_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shared.mjs */ \"./node_modules/@liveblocks/client/shared.mjs\");\n\n\nfunction lsonObjectToJson(obj) {\n  const result = {};\n  for (const key in obj) {\n    const val = obj[key];\n    void 0 !== val && (result[key] = lsonToJson(val));\n  }\n  return result;\n}\nfunction lsonListToJson(value) {\n  return value.map(lsonToJson);\n}\nfunction lsonToJson(value) {\n  return value instanceof _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.L\n    ? lsonObjectToJson(value.toObject())\n    : value instanceof _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.q\n    ? (function (value) {\n        return lsonListToJson(value.toArray());\n      })(value)\n    : value instanceof _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.s\n    ? (function (map) {\n        const result = {};\n        for (const [key, value] of map.entries())\n          result[key] = lsonToJson(value);\n        return result;\n      })(value)\n    : value instanceof _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.u\n    ? value.data\n    : Array.isArray(value)\n    ? lsonListToJson(value)\n    : (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(value)\n    ? lsonObjectToJson(value)\n    : value;\n}\nfunction deepLiveify(value) {\n  if (Array.isArray(value)) return new _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.q(value.map(deepLiveify));\n  if ((0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(value)) {\n    const init = {};\n    for (const key in value) {\n      const val = value[key];\n      void 0 !== val && (init[key] = deepLiveify(val));\n    }\n    return new _shared_mjs__WEBPACK_IMPORTED_MODULE_0__.L(init);\n  }\n  return value;\n}\nfunction patchLiveObjectKey(liveObject, key, prev, next) {\n  if (true) {\n    const nonSerializableValue = (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.v)(next);\n    if (nonSerializableValue)\n      return void console.error(\n        `New state path: '${nonSerializableValue.path}' value: '${nonSerializableValue.value}' is not serializable.\\nOnly serializable value can be synced with Liveblocks.`\n      );\n  }\n  const value = liveObject.get(key);\n  if (void 0 === next) liveObject.delete(key);\n  else if (void 0 === value) liveObject.set(key, deepLiveify(next));\n  else {\n    if (prev === next) return;\n    (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(value) && Array.isArray(prev) && Array.isArray(next)\n      ? (function (liveList, prev, next) {\n          let i = 0,\n            prevEnd = prev.length - 1,\n            nextEnd = next.length - 1,\n            prevNode = prev[0],\n            nextNode = next[0];\n          outer: {\n            for (; prevNode === nextNode; ) {\n              if ((++i, i > prevEnd || i > nextEnd)) break outer;\n              (prevNode = prev[i]), (nextNode = next[i]);\n            }\n            for (\n              prevNode = prev[prevEnd], nextNode = next[nextEnd];\n              prevNode === nextNode;\n\n            ) {\n              if ((prevEnd--, nextEnd--, i > prevEnd || i > nextEnd))\n                break outer;\n              (prevNode = prev[prevEnd]), (nextNode = next[nextEnd]);\n            }\n          }\n          if (i > prevEnd) {\n            if (i <= nextEnd)\n              for (; i <= nextEnd; )\n                liveList.insert(deepLiveify(next[i]), i), i++;\n          } else if (i > nextEnd) {\n            let localI = i;\n            for (; localI <= prevEnd; ) liveList.delete(i), localI++;\n          } else {\n            for (; i <= prevEnd && i <= nextEnd; ) {\n              (prevNode = prev[i]), (nextNode = next[i]);\n              const liveListNode = liveList.get(i);\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.w)(liveListNode) &&\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(prevNode) &&\n              (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(nextNode)\n                ? patchLiveObject(liveListNode, prevNode, nextNode)\n                : liveList.set(i, deepLiveify(nextNode)),\n                i++;\n            }\n            for (; i <= nextEnd; )\n              liveList.insert(deepLiveify(next[i]), i), i++;\n            let localI = i;\n            for (; localI <= prevEnd; ) liveList.delete(i), localI++;\n          }\n        })(value, prev, next)\n      : (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.w)(value) && (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(prev) && (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.b)(next)\n      ? patchLiveObject(value, prev, next)\n      : liveObject.set(key, deepLiveify(next));\n  }\n}\nfunction patchLiveObject(root, prev, next) {\n  const updates = {};\n  for (const key in next) patchLiveObjectKey(root, key, prev[key], next[key]);\n  for (const key in prev) void 0 === next[key] && root.delete(key);\n  Object.keys(updates).length > 0 && root.update(updates);\n}\nfunction patchImmutableObject(state, updates) {\n  return updates.reduce(\n    (state, update) =>\n      (function (state, update) {\n        const path = (function (node) {\n          const path = [];\n          for (; \"HasParent\" === node.parent.type; )\n            (0,_shared_mjs__WEBPACK_IMPORTED_MODULE_0__.f)(node.parent.node)\n              ? path.push(node.parent.node._indexOfPosition(node.parent.key))\n              : path.push(node.parent.key),\n              (node = node.parent.node);\n          return path;\n        })(update.node);\n        return patchImmutableNode(state, path, update);\n      })(state, update),\n    state\n  );\n}\nfunction patchImmutableNode(state, path, update) {\n  var _a, _b, _c, _d;\n  const pathItem = path.pop();\n  if (void 0 === pathItem)\n    switch (update.type) {\n      case \"LiveObject\": {\n        if (null === state || \"object\" != typeof state || Array.isArray(state))\n          throw new Error(\n            \"Internal: received update on LiveObject but state was not an object\"\n          );\n        const newState = Object.assign({}, state);\n        for (const key in update.updates)\n          if (\n            \"update\" ===\n            (null === (_a = update.updates[key]) || void 0 === _a\n              ? void 0\n              : _a.type)\n          ) {\n            const val = update.node.get(key);\n            void 0 !== val && (newState[key] = lsonToJson(val));\n          } else\n            \"delete\" ===\n              (null === (_b = update.updates[key]) || void 0 === _b\n                ? void 0\n                : _b.type) && delete newState[key];\n        return newState;\n      }\n      case \"LiveList\": {\n        if (!Array.isArray(state))\n          throw new Error(\n            \"Internal: received update on LiveList but state was not an array\"\n          );\n        let newState = state.map((x) => x);\n        for (const listUpdate of update.updates)\n          \"set\" === listUpdate.type\n            ? (newState = newState.map((item, index) =>\n                index === listUpdate.index ? lsonToJson(listUpdate.item) : item\n              ))\n            : \"insert\" === listUpdate.type\n            ? listUpdate.index === newState.length\n              ? newState.push(lsonToJson(listUpdate.item))\n              : (newState = [\n                  ...newState.slice(0, listUpdate.index),\n                  lsonToJson(listUpdate.item),\n                  ...newState.slice(listUpdate.index),\n                ])\n            : \"delete\" === listUpdate.type\n            ? newState.splice(listUpdate.index, 1)\n            : \"move\" === listUpdate.type &&\n              (newState =\n                listUpdate.previousIndex > listUpdate.index\n                  ? [\n                      ...newState.slice(0, listUpdate.index),\n                      lsonToJson(listUpdate.item),\n                      ...newState.slice(\n                        listUpdate.index,\n                        listUpdate.previousIndex\n                      ),\n                      ...newState.slice(listUpdate.previousIndex + 1),\n                    ]\n                  : [\n                      ...newState.slice(0, listUpdate.previousIndex),\n                      ...newState.slice(\n                        listUpdate.previousIndex + 1,\n                        listUpdate.index + 1\n                      ),\n                      lsonToJson(listUpdate.item),\n                      ...newState.slice(listUpdate.index + 1),\n                    ]);\n        return newState;\n      }\n      case \"LiveMap\": {\n        if (null === state || \"object\" != typeof state || Array.isArray(state))\n          throw new Error(\n            \"Internal: received update on LiveMap but state was not an object\"\n          );\n        const newState = Object.assign({}, state);\n        for (const key in update.updates)\n          if (\n            \"update\" ===\n            (null === (_c = update.updates[key]) || void 0 === _c\n              ? void 0\n              : _c.type)\n          ) {\n            const value = update.node.get(key);\n            void 0 !== value && (newState[key] = lsonToJson(value));\n          } else\n            \"delete\" ===\n              (null === (_d = update.updates[key]) || void 0 === _d\n                ? void 0\n                : _d.type) && delete newState[key];\n        return newState;\n      }\n    }\n  if (Array.isArray(state)) {\n    const newArray = [...state];\n    return (\n      (newArray[pathItem] = patchImmutableNode(state[pathItem], path, update)),\n      newArray\n    );\n  }\n  if (null !== state && \"object\" == typeof state) {\n    const node = state[pathItem];\n    return void 0 === node\n      ? state\n      : Object.assign(Object.assign({}, state), {\n          [pathItem]: patchImmutableNode(node, path, update),\n        });\n  }\n  return state;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGxpdmVibG9ja3MvY2xpZW50L2ludGVybmFsLm1qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVNzQjtBQTJCQTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMENBQVU7QUFDcEM7QUFDQSx1QkFBdUIsMENBQVE7QUFDL0I7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsMENBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCx1QkFBdUIsMENBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsTUFBTSw4Q0FBYTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywwQ0FBUTtBQUMvQyxNQUFNLDhDQUFhO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDBDQUFVO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxJQUFxQztBQUMzQyxpQ0FBaUMsOENBQXdCO0FBQ3pEO0FBQ0E7QUFDQSw0QkFBNEIsMEJBQTBCLFlBQVksMkJBQTJCO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4Q0FBVTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVCQUF1QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0EsWUFBWTtBQUNaO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QyxZQUFZO0FBQ1osbUJBQW1CLDhCQUE4QjtBQUNqRDtBQUNBO0FBQ0EsY0FBYyw4Q0FBWTtBQUMxQixjQUFjLDhDQUFhO0FBQzNCLGNBQWMsOENBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0EsbUJBQW1CLG1CQUFtQjtBQUN0QztBQUNBLFNBQVM7QUFDVCxRQUFRLDhDQUFZLFdBQVcsOENBQWEsVUFBVSw4Q0FBYTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixrQ0FBa0M7QUFDbkQsWUFBWSw4Q0FBVTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDZ0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BsaXZlYmxvY2tzL2NsaWVudC9pbnRlcm5hbC5tanM/NzI2NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBMIGFzIExpdmVPYmplY3QsXG4gIHEgYXMgTGl2ZUxpc3QsXG4gIHMgYXMgTGl2ZU1hcCxcbiAgdSBhcyBMaXZlUmVnaXN0ZXIsXG4gIGIgYXMgaXNQbGFpbk9iamVjdCxcbiAgdiBhcyBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUsXG4gIGYgYXMgaXNMaXZlTGlzdCxcbiAgdyBhcyBpc0xpdmVPYmplY3QsXG59IGZyb20gXCIuL3NoYXJlZC5tanNcIjtcbmV4cG9ydCB7XG4gIEMgYXMgQ2xpZW50TXNnQ29kZSxcbiAgSSBhcyBDcmR0VHlwZSxcbiAgZSBhcyBPcENvZGUsXG4gIFMgYXMgU2VydmVyTXNnQ29kZSxcbiAgVyBhcyBXZWJzb2NrZXRDbG9zZUNvZGVzLFxuICB4IGFzIGFzc2VydE5ldmVyLFxuICBNIGFzIGI2NGRlY29kZSxcbiAgRyBhcyBjb21wYXJlUG9zaXRpb24sXG4gIEQgYXMgZGVwcmVjYXRlLFxuICBFIGFzIGRlcHJlY2F0ZUlmLFxuICBvIGFzIGVycm9ySWYsXG4gIHkgYXMgaXNBcHBPbmx5QXV0aFRva2VuLFxuICB6IGFzIGlzQXV0aFRva2VuLFxuICBLIGFzIGlzQ2hpbGRDcmR0LFxuICBoIGFzIGlzSnNvbkFycmF5LFxuICBsIGFzIGlzSnNvbk9iamVjdCxcbiAgSiBhcyBpc0pzb25TY2FsYXIsXG4gIGIgYXMgaXNQbGFpbk9iamVjdCxcbiAgQSBhcyBpc1Jvb21BdXRoVG9rZW4sXG4gIGsgYXMgaXNSb290Q3JkdCxcbiAgQiBhcyBpc1Njb3BlLFxuICBIIGFzIG1ha2VQb3NpdGlvbixcbiAgbiBhcyBubixcbiAgRiBhcyB0aHJvd1VzYWdlRXJyb3IsXG4gIHQgYXMgdHJ5UGFyc2VKc29uLFxufSBmcm9tIFwiLi9zaGFyZWQubWpzXCI7XG5mdW5jdGlvbiBsc29uT2JqZWN0VG9Kc29uKG9iaikge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgY29uc3QgdmFsID0gb2JqW2tleV07XG4gICAgdm9pZCAwICE9PSB2YWwgJiYgKHJlc3VsdFtrZXldID0gbHNvblRvSnNvbih2YWwpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbHNvbkxpc3RUb0pzb24odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLm1hcChsc29uVG9Kc29uKTtcbn1cbmZ1bmN0aW9uIGxzb25Ub0pzb24odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTGl2ZU9iamVjdFxuICAgID8gbHNvbk9iamVjdFRvSnNvbih2YWx1ZS50b09iamVjdCgpKVxuICAgIDogdmFsdWUgaW5zdGFuY2VvZiBMaXZlTGlzdFxuICAgID8gKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbHNvbkxpc3RUb0pzb24odmFsdWUudG9BcnJheSgpKTtcbiAgICAgIH0pKHZhbHVlKVxuICAgIDogdmFsdWUgaW5zdGFuY2VvZiBMaXZlTWFwXG4gICAgPyAoZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgbWFwLmVudHJpZXMoKSlcbiAgICAgICAgICByZXN1bHRba2V5XSA9IGxzb25Ub0pzb24odmFsdWUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSkodmFsdWUpXG4gICAgOiB2YWx1ZSBpbnN0YW5jZW9mIExpdmVSZWdpc3RlclxuICAgID8gdmFsdWUuZGF0YVxuICAgIDogQXJyYXkuaXNBcnJheSh2YWx1ZSlcbiAgICA/IGxzb25MaXN0VG9Kc29uKHZhbHVlKVxuICAgIDogaXNQbGFpbk9iamVjdCh2YWx1ZSlcbiAgICA/IGxzb25PYmplY3RUb0pzb24odmFsdWUpXG4gICAgOiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGRlZXBMaXZlaWZ5KHZhbHVlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIG5ldyBMaXZlTGlzdCh2YWx1ZS5tYXAoZGVlcExpdmVpZnkpKTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgY29uc3QgaW5pdCA9IHt9O1xuICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICBjb25zdCB2YWwgPSB2YWx1ZVtrZXldO1xuICAgICAgdm9pZCAwICE9PSB2YWwgJiYgKGluaXRba2V5XSA9IGRlZXBMaXZlaWZ5KHZhbCkpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IExpdmVPYmplY3QoaW5pdCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gcGF0Y2hMaXZlT2JqZWN0S2V5KGxpdmVPYmplY3QsIGtleSwgcHJldiwgbmV4dCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgY29uc3Qgbm9uU2VyaWFsaXphYmxlVmFsdWUgPSBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUobmV4dCk7XG4gICAgaWYgKG5vblNlcmlhbGl6YWJsZVZhbHVlKVxuICAgICAgcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcbiAgICAgICAgYE5ldyBzdGF0ZSBwYXRoOiAnJHtub25TZXJpYWxpemFibGVWYWx1ZS5wYXRofScgdmFsdWU6ICcke25vblNlcmlhbGl6YWJsZVZhbHVlLnZhbHVlfScgaXMgbm90IHNlcmlhbGl6YWJsZS5cXG5Pbmx5IHNlcmlhbGl6YWJsZSB2YWx1ZSBjYW4gYmUgc3luY2VkIHdpdGggTGl2ZWJsb2Nrcy5gXG4gICAgICApO1xuICB9XG4gIGNvbnN0IHZhbHVlID0gbGl2ZU9iamVjdC5nZXQoa2V5KTtcbiAgaWYgKHZvaWQgMCA9PT0gbmV4dCkgbGl2ZU9iamVjdC5kZWxldGUoa2V5KTtcbiAgZWxzZSBpZiAodm9pZCAwID09PSB2YWx1ZSkgbGl2ZU9iamVjdC5zZXQoa2V5LCBkZWVwTGl2ZWlmeShuZXh0KSk7XG4gIGVsc2Uge1xuICAgIGlmIChwcmV2ID09PSBuZXh0KSByZXR1cm47XG4gICAgaXNMaXZlTGlzdCh2YWx1ZSkgJiYgQXJyYXkuaXNBcnJheShwcmV2KSAmJiBBcnJheS5pc0FycmF5KG5leHQpXG4gICAgICA/IChmdW5jdGlvbiAobGl2ZUxpc3QsIHByZXYsIG5leHQpIHtcbiAgICAgICAgICBsZXQgaSA9IDAsXG4gICAgICAgICAgICBwcmV2RW5kID0gcHJldi5sZW5ndGggLSAxLFxuICAgICAgICAgICAgbmV4dEVuZCA9IG5leHQubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIHByZXZOb2RlID0gcHJldlswXSxcbiAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFswXTtcbiAgICAgICAgICBvdXRlcjoge1xuICAgICAgICAgICAgZm9yICg7IHByZXZOb2RlID09PSBuZXh0Tm9kZTsgKSB7XG4gICAgICAgICAgICAgIGlmICgoKytpLCBpID4gcHJldkVuZCB8fCBpID4gbmV4dEVuZCkpIGJyZWFrIG91dGVyO1xuICAgICAgICAgICAgICAocHJldk5vZGUgPSBwcmV2W2ldKSwgKG5leHROb2RlID0gbmV4dFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICBwcmV2Tm9kZSA9IHByZXZbcHJldkVuZF0sIG5leHROb2RlID0gbmV4dFtuZXh0RW5kXTtcbiAgICAgICAgICAgICAgcHJldk5vZGUgPT09IG5leHROb2RlO1xuXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKChwcmV2RW5kLS0sIG5leHRFbmQtLSwgaSA+IHByZXZFbmQgfHwgaSA+IG5leHRFbmQpKVxuICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyO1xuICAgICAgICAgICAgICAocHJldk5vZGUgPSBwcmV2W3ByZXZFbmRdKSwgKG5leHROb2RlID0gbmV4dFtuZXh0RW5kXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpID4gcHJldkVuZCkge1xuICAgICAgICAgICAgaWYgKGkgPD0gbmV4dEVuZClcbiAgICAgICAgICAgICAgZm9yICg7IGkgPD0gbmV4dEVuZDsgKVxuICAgICAgICAgICAgICAgIGxpdmVMaXN0Lmluc2VydChkZWVwTGl2ZWlmeShuZXh0W2ldKSwgaSksIGkrKztcbiAgICAgICAgICB9IGVsc2UgaWYgKGkgPiBuZXh0RW5kKSB7XG4gICAgICAgICAgICBsZXQgbG9jYWxJID0gaTtcbiAgICAgICAgICAgIGZvciAoOyBsb2NhbEkgPD0gcHJldkVuZDsgKSBsaXZlTGlzdC5kZWxldGUoaSksIGxvY2FsSSsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKDsgaSA8PSBwcmV2RW5kICYmIGkgPD0gbmV4dEVuZDsgKSB7XG4gICAgICAgICAgICAgIChwcmV2Tm9kZSA9IHByZXZbaV0pLCAobmV4dE5vZGUgPSBuZXh0W2ldKTtcbiAgICAgICAgICAgICAgY29uc3QgbGl2ZUxpc3ROb2RlID0gbGl2ZUxpc3QuZ2V0KGkpO1xuICAgICAgICAgICAgICBpc0xpdmVPYmplY3QobGl2ZUxpc3ROb2RlKSAmJlxuICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KHByZXZOb2RlKSAmJlxuICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG5leHROb2RlKVxuICAgICAgICAgICAgICAgID8gcGF0Y2hMaXZlT2JqZWN0KGxpdmVMaXN0Tm9kZSwgcHJldk5vZGUsIG5leHROb2RlKVxuICAgICAgICAgICAgICAgIDogbGl2ZUxpc3Quc2V0KGksIGRlZXBMaXZlaWZ5KG5leHROb2RlKSksXG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7IGkgPD0gbmV4dEVuZDsgKVxuICAgICAgICAgICAgICBsaXZlTGlzdC5pbnNlcnQoZGVlcExpdmVpZnkobmV4dFtpXSksIGkpLCBpKys7XG4gICAgICAgICAgICBsZXQgbG9jYWxJID0gaTtcbiAgICAgICAgICAgIGZvciAoOyBsb2NhbEkgPD0gcHJldkVuZDsgKSBsaXZlTGlzdC5kZWxldGUoaSksIGxvY2FsSSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkodmFsdWUsIHByZXYsIG5leHQpXG4gICAgICA6IGlzTGl2ZU9iamVjdCh2YWx1ZSkgJiYgaXNQbGFpbk9iamVjdChwcmV2KSAmJiBpc1BsYWluT2JqZWN0KG5leHQpXG4gICAgICA/IHBhdGNoTGl2ZU9iamVjdCh2YWx1ZSwgcHJldiwgbmV4dClcbiAgICAgIDogbGl2ZU9iamVjdC5zZXQoa2V5LCBkZWVwTGl2ZWlmeShuZXh0KSk7XG4gIH1cbn1cbmZ1bmN0aW9uIHBhdGNoTGl2ZU9iamVjdChyb290LCBwcmV2LCBuZXh0KSB7XG4gIGNvbnN0IHVwZGF0ZXMgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gbmV4dCkgcGF0Y2hMaXZlT2JqZWN0S2V5KHJvb3QsIGtleSwgcHJldltrZXldLCBuZXh0W2tleV0pO1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcmV2KSB2b2lkIDAgPT09IG5leHRba2V5XSAmJiByb290LmRlbGV0ZShrZXkpO1xuICBPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGggPiAwICYmIHJvb3QudXBkYXRlKHVwZGF0ZXMpO1xufVxuZnVuY3Rpb24gcGF0Y2hJbW11dGFibGVPYmplY3Qoc3RhdGUsIHVwZGF0ZXMpIHtcbiAgcmV0dXJuIHVwZGF0ZXMucmVkdWNlKFxuICAgIChzdGF0ZSwgdXBkYXRlKSA9PlxuICAgICAgKGZ1bmN0aW9uIChzdGF0ZSwgdXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSAoZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICBjb25zdCBwYXRoID0gW107XG4gICAgICAgICAgZm9yICg7IFwiSGFzUGFyZW50XCIgPT09IG5vZGUucGFyZW50LnR5cGU7IClcbiAgICAgICAgICAgIGlzTGl2ZUxpc3Qobm9kZS5wYXJlbnQubm9kZSlcbiAgICAgICAgICAgICAgPyBwYXRoLnB1c2gobm9kZS5wYXJlbnQubm9kZS5faW5kZXhPZlBvc2l0aW9uKG5vZGUucGFyZW50LmtleSkpXG4gICAgICAgICAgICAgIDogcGF0aC5wdXNoKG5vZGUucGFyZW50LmtleSksXG4gICAgICAgICAgICAgIChub2RlID0gbm9kZS5wYXJlbnQubm9kZSk7XG4gICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH0pKHVwZGF0ZS5ub2RlKTtcbiAgICAgICAgcmV0dXJuIHBhdGNoSW1tdXRhYmxlTm9kZShzdGF0ZSwgcGF0aCwgdXBkYXRlKTtcbiAgICAgIH0pKHN0YXRlLCB1cGRhdGUpLFxuICAgIHN0YXRlXG4gICk7XG59XG5mdW5jdGlvbiBwYXRjaEltbXV0YWJsZU5vZGUoc3RhdGUsIHBhdGgsIHVwZGF0ZSkge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGNvbnN0IHBhdGhJdGVtID0gcGF0aC5wb3AoKTtcbiAgaWYgKHZvaWQgMCA9PT0gcGF0aEl0ZW0pXG4gICAgc3dpdGNoICh1cGRhdGUudHlwZSkge1xuICAgICAgY2FzZSBcIkxpdmVPYmplY3RcIjoge1xuICAgICAgICBpZiAobnVsbCA9PT0gc3RhdGUgfHwgXCJvYmplY3RcIiAhPSB0eXBlb2Ygc3RhdGUgfHwgQXJyYXkuaXNBcnJheShzdGF0ZSkpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJJbnRlcm5hbDogcmVjZWl2ZWQgdXBkYXRlIG9uIExpdmVPYmplY3QgYnV0IHN0YXRlIHdhcyBub3QgYW4gb2JqZWN0XCJcbiAgICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdXBkYXRlLnVwZGF0ZXMpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgXCJ1cGRhdGVcIiA9PT1cbiAgICAgICAgICAgIChudWxsID09PSAoX2EgPSB1cGRhdGUudXBkYXRlc1trZXldKSB8fCB2b2lkIDAgPT09IF9hXG4gICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgIDogX2EudHlwZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IHVwZGF0ZS5ub2RlLmdldChrZXkpO1xuICAgICAgICAgICAgdm9pZCAwICE9PSB2YWwgJiYgKG5ld1N0YXRlW2tleV0gPSBsc29uVG9Kc29uKHZhbCkpO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgXCJkZWxldGVcIiA9PT1cbiAgICAgICAgICAgICAgKG51bGwgPT09IChfYiA9IHVwZGF0ZS51cGRhdGVzW2tleV0pIHx8IHZvaWQgMCA9PT0gX2JcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogX2IudHlwZSkgJiYgZGVsZXRlIG5ld1N0YXRlW2tleV07XG4gICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJMaXZlTGlzdFwiOiB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzdGF0ZSkpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJJbnRlcm5hbDogcmVjZWl2ZWQgdXBkYXRlIG9uIExpdmVMaXN0IGJ1dCBzdGF0ZSB3YXMgbm90IGFuIGFycmF5XCJcbiAgICAgICAgICApO1xuICAgICAgICBsZXQgbmV3U3RhdGUgPSBzdGF0ZS5tYXAoKHgpID0+IHgpO1xuICAgICAgICBmb3IgKGNvbnN0IGxpc3RVcGRhdGUgb2YgdXBkYXRlLnVwZGF0ZXMpXG4gICAgICAgICAgXCJzZXRcIiA9PT0gbGlzdFVwZGF0ZS50eXBlXG4gICAgICAgICAgICA/IChuZXdTdGF0ZSA9IG5ld1N0YXRlLm1hcCgoaXRlbSwgaW5kZXgpID0+XG4gICAgICAgICAgICAgICAgaW5kZXggPT09IGxpc3RVcGRhdGUuaW5kZXggPyBsc29uVG9Kc29uKGxpc3RVcGRhdGUuaXRlbSkgOiBpdGVtXG4gICAgICAgICAgICAgICkpXG4gICAgICAgICAgICA6IFwiaW5zZXJ0XCIgPT09IGxpc3RVcGRhdGUudHlwZVxuICAgICAgICAgICAgPyBsaXN0VXBkYXRlLmluZGV4ID09PSBuZXdTdGF0ZS5sZW5ndGhcbiAgICAgICAgICAgICAgPyBuZXdTdGF0ZS5wdXNoKGxzb25Ub0pzb24obGlzdFVwZGF0ZS5pdGVtKSlcbiAgICAgICAgICAgICAgOiAobmV3U3RhdGUgPSBbXG4gICAgICAgICAgICAgICAgICAuLi5uZXdTdGF0ZS5zbGljZSgwLCBsaXN0VXBkYXRlLmluZGV4KSxcbiAgICAgICAgICAgICAgICAgIGxzb25Ub0pzb24obGlzdFVwZGF0ZS5pdGVtKSxcbiAgICAgICAgICAgICAgICAgIC4uLm5ld1N0YXRlLnNsaWNlKGxpc3RVcGRhdGUuaW5kZXgpLFxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICA6IFwiZGVsZXRlXCIgPT09IGxpc3RVcGRhdGUudHlwZVxuICAgICAgICAgICAgPyBuZXdTdGF0ZS5zcGxpY2UobGlzdFVwZGF0ZS5pbmRleCwgMSlcbiAgICAgICAgICAgIDogXCJtb3ZlXCIgPT09IGxpc3RVcGRhdGUudHlwZSAmJlxuICAgICAgICAgICAgICAobmV3U3RhdGUgPVxuICAgICAgICAgICAgICAgIGxpc3RVcGRhdGUucHJldmlvdXNJbmRleCA+IGxpc3RVcGRhdGUuaW5kZXhcbiAgICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld1N0YXRlLnNsaWNlKDAsIGxpc3RVcGRhdGUuaW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIGxzb25Ub0pzb24obGlzdFVwZGF0ZS5pdGVtKSxcbiAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdTdGF0ZS5zbGljZShcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RVcGRhdGUuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0VXBkYXRlLnByZXZpb3VzSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld1N0YXRlLnNsaWNlKGxpc3RVcGRhdGUucHJldmlvdXNJbmRleCArIDEpLFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAuLi5uZXdTdGF0ZS5zbGljZSgwLCBsaXN0VXBkYXRlLnByZXZpb3VzSW5kZXgpLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLm5ld1N0YXRlLnNsaWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdFVwZGF0ZS5wcmV2aW91c0luZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RVcGRhdGUuaW5kZXggKyAxXG4gICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICBsc29uVG9Kc29uKGxpc3RVcGRhdGUuaXRlbSksXG4gICAgICAgICAgICAgICAgICAgICAgLi4ubmV3U3RhdGUuc2xpY2UobGlzdFVwZGF0ZS5pbmRleCArIDEpLFxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgcmV0dXJuIG5ld1N0YXRlO1xuICAgICAgfVxuICAgICAgY2FzZSBcIkxpdmVNYXBcIjoge1xuICAgICAgICBpZiAobnVsbCA9PT0gc3RhdGUgfHwgXCJvYmplY3RcIiAhPSB0eXBlb2Ygc3RhdGUgfHwgQXJyYXkuaXNBcnJheShzdGF0ZSkpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgXCJJbnRlcm5hbDogcmVjZWl2ZWQgdXBkYXRlIG9uIExpdmVNYXAgYnV0IHN0YXRlIHdhcyBub3QgYW4gb2JqZWN0XCJcbiAgICAgICAgICApO1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0YXRlKTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdXBkYXRlLnVwZGF0ZXMpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgXCJ1cGRhdGVcIiA9PT1cbiAgICAgICAgICAgIChudWxsID09PSAoX2MgPSB1cGRhdGUudXBkYXRlc1trZXldKSB8fCB2b2lkIDAgPT09IF9jXG4gICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgIDogX2MudHlwZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlLm5vZGUuZ2V0KGtleSk7XG4gICAgICAgICAgICB2b2lkIDAgIT09IHZhbHVlICYmIChuZXdTdGF0ZVtrZXldID0gbHNvblRvSnNvbih2YWx1ZSkpO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgXCJkZWxldGVcIiA9PT1cbiAgICAgICAgICAgICAgKG51bGwgPT09IChfZCA9IHVwZGF0ZS51cGRhdGVzW2tleV0pIHx8IHZvaWQgMCA9PT0gX2RcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogX2QudHlwZSkgJiYgZGVsZXRlIG5ld1N0YXRlW2tleV07XG4gICAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICAgIH1cbiAgICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHN0YXRlKSkge1xuICAgIGNvbnN0IG5ld0FycmF5ID0gWy4uLnN0YXRlXTtcbiAgICByZXR1cm4gKFxuICAgICAgKG5ld0FycmF5W3BhdGhJdGVtXSA9IHBhdGNoSW1tdXRhYmxlTm9kZShzdGF0ZVtwYXRoSXRlbV0sIHBhdGgsIHVwZGF0ZSkpLFxuICAgICAgbmV3QXJyYXlcbiAgICApO1xuICB9XG4gIGlmIChudWxsICE9PSBzdGF0ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBzdGF0ZSkge1xuICAgIGNvbnN0IG5vZGUgPSBzdGF0ZVtwYXRoSXRlbV07XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gbm9kZVxuICAgICAgPyBzdGF0ZVxuICAgICAgOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHN0YXRlKSwge1xuICAgICAgICAgIFtwYXRoSXRlbV06IHBhdGNoSW1tdXRhYmxlTm9kZShub2RlLCBwYXRoLCB1cGRhdGUpLFxuICAgICAgICB9KTtcbiAgfVxuICByZXR1cm4gc3RhdGU7XG59XG5leHBvcnQgeyBsc29uVG9Kc29uLCBwYXRjaEltbXV0YWJsZU9iamVjdCwgcGF0Y2hMaXZlT2JqZWN0S2V5IH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@liveblocks/client/internal.mjs\n");

/***/ }),

/***/ "./node_modules/@liveblocks/client/shared.mjs":
/*!****************************************************!*\
  !*** ./node_modules/@liveblocks/client/shared.mjs ***!
  \****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"A\": function() { return /* binding */ isRoomAuthToken; },\n/* harmony export */   \"B\": function() { return /* binding */ isScope; },\n/* harmony export */   \"C\": function() { return /* binding */ ClientMsgCode; },\n/* harmony export */   \"D\": function() { return /* binding */ deprecate; },\n/* harmony export */   \"E\": function() { return /* binding */ deprecateIf; },\n/* harmony export */   \"F\": function() { return /* binding */ throwUsageError; },\n/* harmony export */   \"G\": function() { return /* binding */ comparePosition; },\n/* harmony export */   \"H\": function() { return /* binding */ makePosition; },\n/* harmony export */   \"I\": function() { return /* binding */ CrdtType; },\n/* harmony export */   \"J\": function() { return /* binding */ isJsonScalar; },\n/* harmony export */   \"K\": function() { return /* binding */ isChildCrdt; },\n/* harmony export */   \"L\": function() { return /* binding */ LiveObject; },\n/* harmony export */   \"M\": function() { return /* binding */ b64decode; },\n/* harmony export */   \"O\": function() { return /* binding */ OpSource; },\n/* harmony export */   \"S\": function() { return /* binding */ ServerMsgCode; },\n/* harmony export */   \"W\": function() { return /* binding */ WebsocketCloseCodes; },\n/* harmony export */   \"_\": function() { return /* binding */ __rest; },\n/* harmony export */   \"a\": function() { return /* binding */ isRoomEventName; },\n/* harmony export */   \"b\": function() { return /* binding */ isPlainObject; },\n/* harmony export */   \"c\": function() { return /* binding */ isTokenExpired; },\n/* harmony export */   \"d\": function() { return /* binding */ isSameNodeOrChildOf; },\n/* harmony export */   \"e\": function() { return /* binding */ OpCode; },\n/* harmony export */   \"f\": function() { return /* binding */ isLiveList; },\n/* harmony export */   \"g\": function() { return /* binding */ getTreesDiffOperations; },\n/* harmony export */   \"h\": function() { return /* binding */ isJsonArray; },\n/* harmony export */   \"i\": function() { return /* binding */ isLiveNode; },\n/* harmony export */   \"j\": function() { return /* binding */ compact; },\n/* harmony export */   \"k\": function() { return /* binding */ isRootCrdt; },\n/* harmony export */   \"l\": function() { return /* binding */ isJsonObject; },\n/* harmony export */   \"m\": function() { return /* binding */ mergeStorageUpdates; },\n/* harmony export */   \"n\": function() { return /* binding */ nn; },\n/* harmony export */   \"o\": function() { return /* binding */ errorIf; },\n/* harmony export */   \"p\": function() { return /* binding */ parseRoomAuthToken; },\n/* harmony export */   \"q\": function() { return /* binding */ LiveList; },\n/* harmony export */   \"r\": function() { return /* binding */ remove; },\n/* harmony export */   \"s\": function() { return /* binding */ LiveMap; },\n/* harmony export */   \"t\": function() { return /* binding */ tryParseJson; },\n/* harmony export */   \"u\": function() { return /* binding */ LiveRegister; },\n/* harmony export */   \"v\": function() { return /* binding */ findNonSerializableValue; },\n/* harmony export */   \"w\": function() { return /* binding */ isLiveObject; },\n/* harmony export */   \"x\": function() { return /* binding */ assertNever; },\n/* harmony export */   \"y\": function() { return /* binding */ isAppOnlyAuthToken; },\n/* harmony export */   \"z\": function() { return /* binding */ isAuthToken; }\n/* harmony export */ });\nconst _emittedDeprecationWarnings = new Set();\nfunction deprecate(message, key = message) {\n   true &&\n    (_emittedDeprecationWarnings.has(key) ||\n      (_emittedDeprecationWarnings.add(key),\n      console.error(`DEPRECATION WARNING: ${message}`)));\n}\nfunction deprecateIf(condition, message, key = message) {\n   true && condition && deprecate(message, key);\n}\nfunction throwUsageError(message) {\n  if (true) {\n    const usageError = new Error(message);\n    throw ((usageError.name = \"Usage error\"), usageError);\n  }\n}\nfunction errorIf(condition, message) {\n   true &&\n    condition &&\n    throwUsageError(message);\n}\nfunction __rest(s, e) {\n  var t = {};\n  for (var p in s)\n    Object.prototype.hasOwnProperty.call(s, p) &&\n      e.indexOf(p) < 0 &&\n      (t[p] = s[p]);\n  if (null != s && \"function\" == typeof Object.getOwnPropertySymbols) {\n    var i = 0;\n    for (p = Object.getOwnPropertySymbols(s); i < p.length; i++)\n      e.indexOf(p[i]) < 0 &&\n        Object.prototype.propertyIsEnumerable.call(s, p[i]) &&\n        (t[p[i]] = s[p[i]]);\n  }\n  return t;\n}\nfunction assertNever(_value, errmsg) {\n  throw new Error(errmsg);\n}\nfunction nn(value, errmsg = \"Expected value to be non-nullable\") {\n  return (\n    (function (condition, errmsg) {\n      if ( true && !condition) {\n        const err = new Error(errmsg);\n        throw ((err.name = \"Assertion failure\"), err);\n      }\n    })(null != value, errmsg),\n    value\n  );\n}\nvar ClientMsgCode,\n  OpCode,\n  CrdtType,\n  ServerMsgCode,\n  WebsocketCloseCodes,\n  OpSource;\nfunction isRootCrdt(crdt) {\n  return crdt.type === CrdtType.OBJECT && !isChildCrdt(crdt);\n}\nfunction isChildCrdt(crdt) {\n  return void 0 !== crdt.parentId && void 0 !== crdt.parentKey;\n}\nfunction isRoomEventName(value) {\n  return (\n    \"my-presence\" === value ||\n    \"others\" === value ||\n    \"event\" === value ||\n    \"error\" === value ||\n    \"connection\" === value\n  );\n}\nfunction HasParent(node, key) {\n  return Object.freeze({ type: \"HasParent\", node: node, key: key });\n}\n!(function (ClientMsgCode) {\n  (ClientMsgCode[(ClientMsgCode.UPDATE_PRESENCE = 100)] = \"UPDATE_PRESENCE\"),\n    (ClientMsgCode[(ClientMsgCode.BROADCAST_EVENT = 103)] = \"BROADCAST_EVENT\"),\n    (ClientMsgCode[(ClientMsgCode.FETCH_STORAGE = 200)] = \"FETCH_STORAGE\"),\n    (ClientMsgCode[(ClientMsgCode.UPDATE_STORAGE = 201)] = \"UPDATE_STORAGE\");\n})(ClientMsgCode || (ClientMsgCode = {})),\n  (function (OpCode) {\n    (OpCode[(OpCode.INIT = 0)] = \"INIT\"),\n      (OpCode[(OpCode.SET_PARENT_KEY = 1)] = \"SET_PARENT_KEY\"),\n      (OpCode[(OpCode.CREATE_LIST = 2)] = \"CREATE_LIST\"),\n      (OpCode[(OpCode.UPDATE_OBJECT = 3)] = \"UPDATE_OBJECT\"),\n      (OpCode[(OpCode.CREATE_OBJECT = 4)] = \"CREATE_OBJECT\"),\n      (OpCode[(OpCode.DELETE_CRDT = 5)] = \"DELETE_CRDT\"),\n      (OpCode[(OpCode.DELETE_OBJECT_KEY = 6)] = \"DELETE_OBJECT_KEY\"),\n      (OpCode[(OpCode.CREATE_MAP = 7)] = \"CREATE_MAP\"),\n      (OpCode[(OpCode.CREATE_REGISTER = 8)] = \"CREATE_REGISTER\");\n  })(OpCode || (OpCode = {})),\n  (function (CrdtType) {\n    (CrdtType[(CrdtType.OBJECT = 0)] = \"OBJECT\"),\n      (CrdtType[(CrdtType.LIST = 1)] = \"LIST\"),\n      (CrdtType[(CrdtType.MAP = 2)] = \"MAP\"),\n      (CrdtType[(CrdtType.REGISTER = 3)] = \"REGISTER\");\n  })(CrdtType || (CrdtType = {})),\n  (function (ServerMsgCode) {\n    (ServerMsgCode[(ServerMsgCode.UPDATE_PRESENCE = 100)] = \"UPDATE_PRESENCE\"),\n      (ServerMsgCode[(ServerMsgCode.USER_JOINED = 101)] = \"USER_JOINED\"),\n      (ServerMsgCode[(ServerMsgCode.USER_LEFT = 102)] = \"USER_LEFT\"),\n      (ServerMsgCode[(ServerMsgCode.BROADCASTED_EVENT = 103)] =\n        \"BROADCASTED_EVENT\"),\n      (ServerMsgCode[(ServerMsgCode.ROOM_STATE = 104)] = \"ROOM_STATE\"),\n      (ServerMsgCode[(ServerMsgCode.INITIAL_STORAGE_STATE = 200)] =\n        \"INITIAL_STORAGE_STATE\"),\n      (ServerMsgCode[(ServerMsgCode.UPDATE_STORAGE = 201)] = \"UPDATE_STORAGE\");\n  })(ServerMsgCode || (ServerMsgCode = {})),\n  (function (WebsocketCloseCodes) {\n    (WebsocketCloseCodes[(WebsocketCloseCodes.CLOSE_ABNORMAL = 1006)] =\n      \"CLOSE_ABNORMAL\"),\n      (WebsocketCloseCodes[(WebsocketCloseCodes.INVALID_MESSAGE_FORMAT = 4e3)] =\n        \"INVALID_MESSAGE_FORMAT\"),\n      (WebsocketCloseCodes[(WebsocketCloseCodes.NOT_ALLOWED = 4001)] =\n        \"NOT_ALLOWED\"),\n      (WebsocketCloseCodes[\n        (WebsocketCloseCodes.MAX_NUMBER_OF_MESSAGES_PER_SECONDS = 4002)\n      ] = \"MAX_NUMBER_OF_MESSAGES_PER_SECONDS\"),\n      (WebsocketCloseCodes[\n        (WebsocketCloseCodes.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS = 4003)\n      ] = \"MAX_NUMBER_OF_CONCURRENT_CONNECTIONS\"),\n      (WebsocketCloseCodes[\n        (WebsocketCloseCodes.MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP = 4004)\n      ] = \"MAX_NUMBER_OF_MESSAGES_PER_DAY_PER_APP\"),\n      (WebsocketCloseCodes[\n        (WebsocketCloseCodes.MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM = 4005)\n      ] = \"MAX_NUMBER_OF_CONCURRENT_CONNECTIONS_PER_ROOM\"),\n      (WebsocketCloseCodes[(WebsocketCloseCodes.CLOSE_WITHOUT_RETRY = 4999)] =\n        \"CLOSE_WITHOUT_RETRY\");\n  })(WebsocketCloseCodes || (WebsocketCloseCodes = {})),\n  (function (OpSource) {\n    (OpSource[(OpSource.UNDOREDO_RECONNECT = 0)] = \"UNDOREDO_RECONNECT\"),\n      (OpSource[(OpSource.REMOTE = 1)] = \"REMOTE\"),\n      (OpSource[(OpSource.ACK = 2)] = \"ACK\");\n  })(OpSource || (OpSource = {}));\nconst NoParent = Object.freeze({ type: \"NoParent\" });\nfunction Orphaned(oldKey) {\n  return Object.freeze({ type: \"Orphaned\", oldKey: oldKey });\n}\nclass AbstractCrdt {\n  constructor() {\n    this._parent = NoParent;\n  }\n  _getParentKeyOrThrow() {\n    switch (this.parent.type) {\n      case \"HasParent\":\n        return this.parent.key;\n      case \"NoParent\":\n        throw new Error(\"Parent key is missing\");\n      case \"Orphaned\":\n        return this.parent.oldKey;\n      default:\n        return assertNever(this.parent, \"Unknown state\");\n    }\n  }\n  get _doc() {\n    return this.__doc;\n  }\n  get roomId() {\n    return this.__doc ? this.__doc.roomId : null;\n  }\n  get _id() {\n    return this.__id;\n  }\n  get parent() {\n    return this._parent;\n  }\n  get _parentNode() {\n    switch (this.parent.type) {\n      case \"HasParent\":\n        return this.parent.node;\n      case \"NoParent\":\n      case \"Orphaned\":\n        return null;\n      default:\n        return assertNever(this.parent, \"Unknown state\");\n    }\n  }\n  get _parentKey() {\n    switch (this.parent.type) {\n      case \"HasParent\":\n        return this.parent.key;\n      case \"NoParent\":\n        return null;\n      case \"Orphaned\":\n        return this.parent.oldKey;\n      default:\n        return assertNever(this.parent, \"Unknown state\");\n    }\n  }\n  _apply(op, _isLocal) {\n    return op.type === OpCode.DELETE_CRDT && \"HasParent\" === this.parent.type\n      ? this.parent.node._detachChild(this)\n      : { modified: !1 };\n  }\n  _setParentLink(newParentNode, newParentKey) {\n    switch (this.parent.type) {\n      case \"HasParent\":\n        if (this.parent.node !== newParentNode)\n          throw new Error(\"Cannot attach parent if it already exist\");\n        return void (this._parent = HasParent(newParentNode, newParentKey));\n      case \"Orphaned\":\n      case \"NoParent\":\n        return void (this._parent = HasParent(newParentNode, newParentKey));\n      default:\n        return assertNever(this.parent, \"Unknown state\");\n    }\n  }\n  _attach(id, doc) {\n    if (this.__id || this.__doc)\n      throw new Error(\"Cannot attach if CRDT is already attached\");\n    doc.addItem(id, this), (this.__id = id), (this.__doc = doc);\n  }\n  _detach() {\n    switch (\n      (this.__doc && this.__id && this.__doc.deleteItem(this.__id),\n      this.parent.type)\n    ) {\n      case \"HasParent\":\n        this._parent = Orphaned(this.parent.key);\n        break;\n      case \"NoParent\":\n        this._parent = NoParent;\n        break;\n      case \"Orphaned\":\n        this._parent = Orphaned(this.parent.oldKey);\n        break;\n      default:\n        assertNever(this.parent, \"Unknown state\");\n    }\n    this.__doc = void 0;\n  }\n}\nclass LiveRegister extends AbstractCrdt {\n  constructor(data) {\n    super(), (this._data = data);\n  }\n  get data() {\n    return this._data;\n  }\n  static _deserialize([id, item], _parentToChildren, doc) {\n    const register = new LiveRegister(item.data);\n    return register._attach(id, doc), register;\n  }\n  _serialize(parentId, parentKey, doc) {\n    if (null == this._id || null == parentId || null == parentKey)\n      throw new Error(\n        \"Cannot serialize register if parentId or parentKey is undefined\"\n      );\n    return [\n      {\n        type: OpCode.CREATE_REGISTER,\n        opId: null == doc ? void 0 : doc.generateOpId(),\n        id: this._id,\n        parentId: parentId,\n        parentKey: parentKey,\n        data: this.data,\n      },\n    ];\n  }\n  _toSerializedCrdt() {\n    if (\"HasParent\" !== this.parent.type)\n      throw new Error(\"Cannot serialize LiveRegister if parent is missing\");\n    return {\n      type: CrdtType.REGISTER,\n      parentId: nn(this.parent.node._id, \"Parent node expected to have ID\"),\n      parentKey: this.parent.key,\n      data: this.data,\n    };\n  }\n  _attachChild(_op) {\n    throw new Error(\"Method not implemented.\");\n  }\n  _detachChild(_crdt) {\n    throw new Error(\"Method not implemented.\");\n  }\n  _apply(op, isLocal) {\n    return super._apply(op, isLocal);\n  }\n}\nfunction makePosition(before, after) {\n  return null != before && null != after\n    ? pos(makePositionFromCodes(posCodes(before), posCodes(after)))\n    : null != before\n    ? (function (before) {\n        const result = [],\n          beforeCodes = posCodes(before);\n        for (let i = 0; i < beforeCodes.length; i++) {\n          const code = beforeCodes[i];\n          if (126 !== code) {\n            result.push(code + 1);\n            break;\n          }\n          if ((result.push(code), beforeCodes.length - 1 === i)) {\n            result.push(33);\n            break;\n          }\n        }\n        return pos(result);\n      })(before)\n    : null != after\n    ? (function (after) {\n        const result = [],\n          afterCodes = posCodes(after);\n        for (let i = 0; i < afterCodes.length; i++) {\n          const code = afterCodes[i];\n          if (!(code <= 33)) {\n            result.push(code - 1);\n            break;\n          }\n          if ((result.push(32), afterCodes.length - 1 === i)) {\n            result.push(126);\n            break;\n          }\n        }\n        return pos(result);\n      })(after)\n    : pos([33]);\n}\nfunction makePositionFromCodes(before, after) {\n  let index = 0;\n  const result = [];\n  for (;;) {\n    const beforeDigit = before[index] || 32,\n      afterDigit = after[index] || 126;\n    if (beforeDigit > afterDigit)\n      throw new Error(\n        `Impossible to generate position between ${before} and ${after}`\n      );\n    if (beforeDigit === afterDigit) {\n      result.push(beforeDigit), index++;\n      continue;\n    }\n    if (afterDigit - beforeDigit == 1) {\n      result.push(beforeDigit),\n        result.push(...makePositionFromCodes(before.slice(index + 1), []));\n      break;\n    }\n    const mid = (afterDigit + beforeDigit) >> 1;\n    result.push(mid);\n    break;\n  }\n  return result;\n}\nfunction posCodes(str) {\n  const codes = [];\n  for (let i = 0; i < str.length; i++) codes.push(str.charCodeAt(i));\n  return codes;\n}\nfunction pos(codes) {\n  return String.fromCharCode(...codes);\n}\nfunction comparePosition(posA, posB) {\n  const aCodes = posCodes(posA),\n    bCodes = posCodes(posB),\n    maxLength = Math.max(aCodes.length, bCodes.length);\n  for (let i = 0; i < maxLength; i++) {\n    const a = null == aCodes[i] ? 32 : aCodes[i],\n      b = null == bCodes[i] ? 32 : bCodes[i];\n    if (a !== b) return a - b;\n  }\n  throw new Error(\n    `Impossible to compare similar position \"${posA}\" and \"${posB}\"`\n  );\n}\nfunction compareNodePosition(itemA, itemB) {\n  return comparePosition(\n    itemA._getParentKeyOrThrow(),\n    itemB._getParentKeyOrThrow()\n  );\n}\nclass LiveList extends AbstractCrdt {\n  constructor(items = []) {\n    let position;\n    super(),\n      (this._items = []),\n      (this._implicitlyDeletedItems = new Set()),\n      (this._unacknowledgedSets = new Map());\n    for (let i = 0; i < items.length; i++) {\n      const newPosition = makePosition(position),\n        item = lsonToLiveNode(items[i]);\n      item._setParentLink(this, newPosition),\n        this._items.push(item),\n        (position = newPosition);\n    }\n  }\n  static _deserialize([id], parentToChildren, doc) {\n    const list = new LiveList();\n    list._attach(id, doc);\n    const children = parentToChildren.get(id);\n    if (null == children) return list;\n    for (const [id, crdt] of children) {\n      const child = deserialize([id, crdt], parentToChildren, doc);\n      child._setParentLink(list, crdt.parentKey), list._insertAndSort(child);\n    }\n    return list;\n  }\n  _serialize(parentId, parentKey, doc) {\n    if (null == this._id)\n      throw new Error(\"Cannot serialize item is not attached\");\n    const ops = [],\n      op = {\n        id: this._id,\n        opId: null == doc ? void 0 : doc.generateOpId(),\n        type: OpCode.CREATE_LIST,\n        parentId: parentId,\n        parentKey: parentKey,\n      };\n    ops.push(op);\n    for (const item of this._items)\n      ops.push(...item._serialize(this._id, item._getParentKeyOrThrow(), doc));\n    return ops;\n  }\n  _insertAndSort(item) {\n    this._items.push(item), this._sortItems();\n  }\n  _sortItems() {\n    this._items.sort(compareNodePosition);\n  }\n  _indexOfPosition(position) {\n    return this._items.findIndex(\n      (item) => item._getParentKeyOrThrow() === position\n    );\n  }\n  _attach(id, doc) {\n    super._attach(id, doc);\n    for (const item of this._items) item._attach(doc.generateId(), doc);\n  }\n  _detach() {\n    super._detach();\n    for (const item of this._items) item._detach();\n  }\n  _applySetRemote(op) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    const { id: id, parentKey: key } = op,\n      child = creationOpToLiveNode(op);\n    child._attach(id, this._doc), child._setParentLink(this, key);\n    const deletedId = op.deletedId,\n      indexOfItemWithSamePosition = this._indexOfPosition(key);\n    if (-1 !== indexOfItemWithSamePosition) {\n      const itemWithSamePosition = this._items[indexOfItemWithSamePosition];\n      if (itemWithSamePosition._id === deletedId)\n        return (\n          itemWithSamePosition._detach(),\n          (this._items[indexOfItemWithSamePosition] = child),\n          {\n            modified: makeUpdate(this, [\n              setDelta(indexOfItemWithSamePosition, child),\n            ]),\n            reverse: [],\n          }\n        );\n      {\n        this._implicitlyDeletedItems.add(itemWithSamePosition),\n          (this._items[indexOfItemWithSamePosition] = child);\n        const delta = [setDelta(indexOfItemWithSamePosition, child)],\n          deleteDelta = this._detachItemAssociatedToSetOperation(op.deletedId);\n        return (\n          deleteDelta && delta.push(deleteDelta),\n          { modified: makeUpdate(this, delta), reverse: [] }\n        );\n      }\n    }\n    {\n      const updates = [],\n        deleteDelta = this._detachItemAssociatedToSetOperation(op.deletedId);\n      return (\n        deleteDelta && updates.push(deleteDelta),\n        this._insertAndSort(child),\n        updates.push(insertDelta(this._indexOfPosition(key), child)),\n        { reverse: [], modified: makeUpdate(this, updates) }\n      );\n    }\n  }\n  _applySetAck(op) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    const delta = [],\n      deletedDelta = this._detachItemAssociatedToSetOperation(op.deletedId);\n    deletedDelta && delta.push(deletedDelta);\n    const unacknowledgedOpId = this._unacknowledgedSets.get(op.parentKey);\n    if (null != unacknowledgedOpId) {\n      if (unacknowledgedOpId !== op.opId)\n        return 0 === delta.length\n          ? { modified: !1 }\n          : { modified: makeUpdate(this, delta), reverse: [] };\n      this._unacknowledgedSets.delete(op.parentKey);\n    }\n    const indexOfItemWithSamePosition = this._indexOfPosition(op.parentKey),\n      existingItem = this._items.find((item) => item._id === op.id);\n    if (null != existingItem) {\n      if (existingItem._parentKey === op.parentKey)\n        return {\n          modified: delta.length > 0 && makeUpdate(this, delta),\n          reverse: [],\n        };\n      -1 !== indexOfItemWithSamePosition &&\n        (this._implicitlyDeletedItems.add(\n          this._items[indexOfItemWithSamePosition]\n        ),\n        this._items.splice(indexOfItemWithSamePosition, 1),\n        delta.push(deleteDelta(indexOfItemWithSamePosition)));\n      const previousIndex = this._items.indexOf(existingItem);\n      existingItem._setParentLink(this, op.parentKey), this._sortItems();\n      const newIndex = this._items.indexOf(existingItem);\n      return (\n        newIndex !== previousIndex &&\n          delta.push(moveDelta(previousIndex, newIndex, existingItem)),\n        { modified: delta.length > 0 && makeUpdate(this, delta), reverse: [] }\n      );\n    }\n    {\n      const orphan = this._doc.getItem(op.id);\n      if (orphan && this._implicitlyDeletedItems.has(orphan)) {\n        orphan._setParentLink(this, op.parentKey),\n          this._implicitlyDeletedItems.delete(orphan),\n          this._insertAndSort(orphan);\n        const recreatedItemIndex = this._items.indexOf(orphan);\n        return {\n          modified: makeUpdate(this, [\n            -1 === indexOfItemWithSamePosition\n              ? insertDelta(recreatedItemIndex, orphan)\n              : setDelta(recreatedItemIndex, orphan),\n            ...delta,\n          ]),\n          reverse: [],\n        };\n      }\n      {\n        -1 !== indexOfItemWithSamePosition &&\n          this._items.splice(indexOfItemWithSamePosition, 1);\n        const { newItem: newItem, newIndex: newIndex } =\n          this._createAttachItemAndSort(op, op.parentKey);\n        return {\n          modified: makeUpdate(this, [\n            -1 === indexOfItemWithSamePosition\n              ? insertDelta(newIndex, newItem)\n              : setDelta(newIndex, newItem),\n            ...delta,\n          ]),\n          reverse: [],\n        };\n      }\n    }\n  }\n  _detachItemAssociatedToSetOperation(deletedId) {\n    if (null == deletedId || null == this._doc) return null;\n    const deletedItem = this._doc.getItem(deletedId);\n    if (null == deletedItem) return null;\n    const result = this._detachChild(deletedItem);\n    return !1 === result.modified ? null : result.modified.updates[0];\n  }\n  _applyRemoteInsert(op) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    const key = op.parentKey,\n      existingItemIndex = this._indexOfPosition(key);\n    -1 !== existingItemIndex && this._shiftItemPosition(existingItemIndex, key);\n    const { newItem: newItem, newIndex: newIndex } =\n      this._createAttachItemAndSort(op, key);\n    return {\n      modified: makeUpdate(this, [insertDelta(newIndex, newItem)]),\n      reverse: [],\n    };\n  }\n  _applyInsertAck(op) {\n    const existingItem = this._items.find((item) => item._id === op.id),\n      key = op.parentKey,\n      itemIndexAtPosition = this._indexOfPosition(key);\n    if (existingItem) {\n      if (existingItem._parentKey === key) return { modified: !1 };\n      {\n        const oldPositionIndex = this._items.indexOf(existingItem);\n        -1 !== itemIndexAtPosition &&\n          this._shiftItemPosition(itemIndexAtPosition, key),\n          existingItem._setParentLink(this, key),\n          this._sortItems();\n        const newIndex = this._indexOfPosition(key);\n        return newIndex === oldPositionIndex\n          ? { modified: !1 }\n          : {\n              modified: makeUpdate(this, [\n                moveDelta(oldPositionIndex, newIndex, existingItem),\n              ]),\n              reverse: [],\n            };\n      }\n    }\n    {\n      const orphan = nn(this._doc).getItem(op.id);\n      if (orphan && this._implicitlyDeletedItems.has(orphan)) {\n        orphan._setParentLink(this, key),\n          this._implicitlyDeletedItems.delete(orphan),\n          this._insertAndSort(orphan);\n        return {\n          modified: makeUpdate(this, [\n            insertDelta(this._indexOfPosition(key), orphan),\n          ]),\n          reverse: [],\n        };\n      }\n      {\n        -1 !== itemIndexAtPosition &&\n          this._shiftItemPosition(itemIndexAtPosition, key);\n        const { newItem: newItem, newIndex: newIndex } =\n          this._createAttachItemAndSort(op, key);\n        return {\n          modified: makeUpdate(this, [insertDelta(newIndex, newItem)]),\n          reverse: [],\n        };\n      }\n    }\n  }\n  _applyInsertUndoRedo(op) {\n    var _a;\n    const { id: id, parentKey: key } = op,\n      child = creationOpToLiveNode(op);\n    if (\n      void 0 !==\n      (null === (_a = this._doc) || void 0 === _a ? void 0 : _a.getItem(id))\n    )\n      return { modified: !1 };\n    child._attach(id, nn(this._doc)), child._setParentLink(this, key);\n    const existingItemIndex = this._indexOfPosition(key);\n    let newKey = key;\n    if (-1 !== existingItemIndex) {\n      (newKey = makePosition(\n        this._items[existingItemIndex]\n          ? this._items[existingItemIndex]._getParentKeyOrThrow()\n          : void 0,\n        this._items[existingItemIndex + 1]\n          ? this._items[existingItemIndex + 1]._getParentKeyOrThrow()\n          : void 0\n      )),\n        child._setParentLink(this, newKey);\n    }\n    this._insertAndSort(child);\n    return {\n      modified: makeUpdate(this, [\n        insertDelta(this._indexOfPosition(newKey), child),\n      ]),\n      reverse: [{ type: OpCode.DELETE_CRDT, id: id }],\n    };\n  }\n  _applySetUndoRedo(op) {\n    var _a;\n    const { id: id, parentKey: key } = op,\n      child = creationOpToLiveNode(op);\n    if (\n      void 0 !==\n      (null === (_a = this._doc) || void 0 === _a ? void 0 : _a.getItem(id))\n    )\n      return { modified: !1 };\n    this._unacknowledgedSets.set(key, nn(op.opId));\n    const indexOfItemWithSameKey = this._indexOfPosition(key);\n    child._attach(id, nn(this._doc)), child._setParentLink(this, key);\n    const newKey = key;\n    if (-1 !== indexOfItemWithSameKey) {\n      const existingItem = this._items[indexOfItemWithSameKey];\n      existingItem._detach(), (this._items[indexOfItemWithSameKey] = child);\n      const reverse = existingItem._serialize(nn(this._id), key, this._doc);\n      addIntentAndDeletedIdToOperation(reverse, op.id);\n      const delta = [setDelta(indexOfItemWithSameKey, child)],\n        deletedDelta = this._detachItemAssociatedToSetOperation(op.deletedId);\n      return (\n        deletedDelta && delta.push(deletedDelta),\n        { modified: makeUpdate(this, delta), reverse: reverse }\n      );\n    }\n    {\n      this._insertAndSort(child),\n        this._detachItemAssociatedToSetOperation(op.deletedId);\n      const newIndex = this._indexOfPosition(newKey);\n      return {\n        reverse: [{ type: OpCode.DELETE_CRDT, id: id }],\n        modified: makeUpdate(this, [insertDelta(newIndex, child)]),\n      };\n    }\n  }\n  _attachChild(op, source) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    if (\"set\" === op.intent) {\n      if (source === OpSource.REMOTE) return this._applySetRemote(op);\n      if (source === OpSource.UNDOREDO_RECONNECT)\n        return this._applySetUndoRedo(op);\n      if (source === OpSource.ACK) return this._applySetAck(op);\n    }\n    return source === OpSource.REMOTE\n      ? this._applyRemoteInsert(op)\n      : source === OpSource.ACK\n      ? this._applyInsertAck(op)\n      : this._applyInsertUndoRedo(op);\n  }\n  _detachChild(child) {\n    if (child) {\n      const parentKey = nn(child._parentKey),\n        reverse = child._serialize(nn(this._id), parentKey, this._doc),\n        indexToDelete = this._items.indexOf(child);\n      return -1 === indexToDelete\n        ? { modified: !1 }\n        : (this._items.splice(indexToDelete, 1),\n          child._detach(),\n          {\n            modified: makeUpdate(this, [deleteDelta(indexToDelete)]),\n            reverse: reverse,\n          });\n    }\n    return { modified: !1 };\n  }\n  _applySetChildKeyRemote(newKey, child) {\n    var _a;\n    if (this._implicitlyDeletedItems.has(child)) {\n      this._implicitlyDeletedItems.delete(child),\n        child._setParentLink(this, newKey),\n        this._insertAndSort(child);\n      return {\n        modified: makeUpdate(this, [\n          insertDelta(this._items.indexOf(child), child),\n        ]),\n        reverse: [],\n      };\n    }\n    if (newKey === child._parentKey) return { modified: !1 };\n    const existingItemIndex = this._indexOfPosition(newKey);\n    if (-1 === existingItemIndex) {\n      const previousIndex = this._items.indexOf(child);\n      child._setParentLink(this, newKey), this._sortItems();\n      const newIndex = this._items.indexOf(child);\n      return newIndex === previousIndex\n        ? { modified: !1 }\n        : {\n            modified: makeUpdate(this, [\n              moveDelta(previousIndex, newIndex, child),\n            ]),\n            reverse: [],\n          };\n    }\n    {\n      this._items[existingItemIndex]._setParentLink(\n        this,\n        makePosition(\n          newKey,\n          null === (_a = this._items[existingItemIndex + 1]) || void 0 === _a\n            ? void 0\n            : _a._getParentKeyOrThrow()\n        )\n      );\n      const previousIndex = this._items.indexOf(child);\n      child._setParentLink(this, newKey), this._sortItems();\n      const newIndex = this._items.indexOf(child);\n      return newIndex === previousIndex\n        ? { modified: !1 }\n        : {\n            modified: makeUpdate(this, [\n              moveDelta(previousIndex, newIndex, child),\n            ]),\n            reverse: [],\n          };\n    }\n  }\n  _applySetChildKeyAck(newKey, child) {\n    var _a, _b;\n    const previousKey = nn(child._parentKey);\n    if (this._implicitlyDeletedItems.has(child)) {\n      const existingItemIndex = this._indexOfPosition(newKey);\n      return (\n        this._implicitlyDeletedItems.delete(child),\n        -1 !== existingItemIndex &&\n          this._items[existingItemIndex]._setParentLink(\n            this,\n            makePosition(\n              newKey,\n              null === (_a = this._items[existingItemIndex + 1]) ||\n                void 0 === _a\n                ? void 0\n                : _a._getParentKeyOrThrow()\n            )\n          ),\n        child._setParentLink(this, newKey),\n        this._insertAndSort(child),\n        { modified: !1 }\n      );\n    }\n    {\n      if (newKey === previousKey) return { modified: !1 };\n      const previousIndex = this._items.indexOf(child),\n        existingItemIndex = this._indexOfPosition(newKey);\n      -1 !== existingItemIndex &&\n        this._items[existingItemIndex]._setParentLink(\n          this,\n          makePosition(\n            newKey,\n            null === (_b = this._items[existingItemIndex + 1]) || void 0 === _b\n              ? void 0\n              : _b._getParentKeyOrThrow()\n          )\n        ),\n        child._setParentLink(this, newKey),\n        this._sortItems();\n      const newIndex = this._items.indexOf(child);\n      return previousIndex === newIndex\n        ? { modified: !1 }\n        : {\n            modified: makeUpdate(this, [\n              moveDelta(previousIndex, newIndex, child),\n            ]),\n            reverse: [],\n          };\n    }\n  }\n  _applySetChildKeyUndoRedo(newKey, child) {\n    var _a;\n    const previousKey = nn(child._parentKey),\n      previousIndex = this._items.indexOf(child),\n      existingItemIndex = this._indexOfPosition(newKey);\n    -1 !== existingItemIndex &&\n      this._items[existingItemIndex]._setParentLink(\n        this,\n        makePosition(\n          newKey,\n          null === (_a = this._items[existingItemIndex + 1]) || void 0 === _a\n            ? void 0\n            : _a._getParentKeyOrThrow()\n        )\n      ),\n      child._setParentLink(this, newKey),\n      this._sortItems();\n    const newIndex = this._items.indexOf(child);\n    return previousIndex === newIndex\n      ? { modified: !1 }\n      : {\n          modified: makeUpdate(this, [\n            moveDelta(previousIndex, newIndex, child),\n          ]),\n          reverse: [\n            {\n              type: OpCode.SET_PARENT_KEY,\n              id: nn(child._id),\n              parentKey: previousKey,\n            },\n          ],\n        };\n  }\n  _setChildKey(newKey, child, source) {\n    return source === OpSource.REMOTE\n      ? this._applySetChildKeyRemote(newKey, child)\n      : source === OpSource.ACK\n      ? this._applySetChildKeyAck(newKey, child)\n      : this._applySetChildKeyUndoRedo(newKey, child);\n  }\n  _apply(op, isLocal) {\n    return super._apply(op, isLocal);\n  }\n  _toSerializedCrdt() {\n    if (\"HasParent\" !== this.parent.type)\n      throw new Error(\"Cannot serialize LiveList if parent is missing\");\n    return {\n      type: CrdtType.LIST,\n      parentId: nn(this.parent.node._id, \"Parent node expected to have ID\"),\n      parentKey: this.parent.key,\n    };\n  }\n  get length() {\n    return this._items.length;\n  }\n  push(element) {\n    return this.insert(element, this.length);\n  }\n  insert(element, index) {\n    if (index < 0 || index > this._items.length)\n      throw new Error(\n        `Cannot insert list item at index \"\u001d${index}\". index should be between 0 and ${this._items.length}`\n      );\n    const position = makePosition(\n        this._items[index - 1]\n          ? this._items[index - 1]._getParentKeyOrThrow()\n          : void 0,\n        this._items[index] ? this._items[index]._getParentKeyOrThrow() : void 0\n      ),\n      value = lsonToLiveNode(element);\n    if (\n      (value._setParentLink(this, position),\n      this._insertAndSort(value),\n      this._doc && this._id)\n    ) {\n      const id = this._doc.generateId();\n      value._attach(id, this._doc),\n        this._doc.dispatch(\n          value._serialize(this._id, position, this._doc),\n          [{ type: OpCode.DELETE_CRDT, id: id }],\n          new Map([[this._id, makeUpdate(this, [insertDelta(index, value)])]])\n        );\n    }\n  }\n  move(index, targetIndex) {\n    if (targetIndex < 0) throw new Error(\"targetIndex cannot be less than 0\");\n    if (targetIndex >= this._items.length)\n      throw new Error(\n        \"targetIndex cannot be greater or equal than the list length\"\n      );\n    if (index < 0) throw new Error(\"index cannot be less than 0\");\n    if (index >= this._items.length)\n      throw new Error(\"index cannot be greater or equal than the list length\");\n    let beforePosition = null,\n      afterPosition = null;\n    index < targetIndex\n      ? ((afterPosition =\n          targetIndex === this._items.length - 1\n            ? void 0\n            : this._items[targetIndex + 1]._getParentKeyOrThrow()),\n        (beforePosition = this._items[targetIndex]._getParentKeyOrThrow()))\n      : ((afterPosition = this._items[targetIndex]._getParentKeyOrThrow()),\n        (beforePosition =\n          0 === targetIndex\n            ? void 0\n            : this._items[targetIndex - 1]._getParentKeyOrThrow()));\n    const position = makePosition(beforePosition, afterPosition),\n      item = this._items[index],\n      previousPosition = item._getParentKeyOrThrow();\n    if (\n      (item._setParentLink(this, position),\n      this._sortItems(),\n      this._doc && this._id)\n    ) {\n      const storageUpdates = new Map([\n        [this._id, makeUpdate(this, [moveDelta(index, targetIndex, item)])],\n      ]);\n      this._doc.dispatch(\n        [\n          {\n            type: OpCode.SET_PARENT_KEY,\n            id: nn(item._id),\n            opId: this._doc.generateOpId(),\n            parentKey: position,\n          },\n        ],\n        [\n          {\n            type: OpCode.SET_PARENT_KEY,\n            id: nn(item._id),\n            parentKey: previousPosition,\n          },\n        ],\n        storageUpdates\n      );\n    }\n  }\n  delete(index) {\n    if (index < 0 || index >= this._items.length)\n      throw new Error(\n        `Cannot delete list item at index \"\u001d${index}\". index should be between 0 and ${\n          this._items.length - 1\n        }`\n      );\n    const item = this._items[index];\n    if ((item._detach(), this._items.splice(index, 1), this._doc)) {\n      const childRecordId = item._id;\n      if (childRecordId) {\n        const storageUpdates = new Map();\n        storageUpdates.set(\n          nn(this._id),\n          makeUpdate(this, [deleteDelta(index)])\n        ),\n          this._doc.dispatch(\n            [\n              {\n                id: childRecordId,\n                opId: this._doc.generateOpId(),\n                type: OpCode.DELETE_CRDT,\n              },\n            ],\n            item._serialize(nn(this._id), item._getParentKeyOrThrow()),\n            storageUpdates\n          );\n      }\n    }\n  }\n  clear() {\n    if (this._doc) {\n      const ops = [],\n        reverseOps = [],\n        updateDelta = [];\n      for (const item of this._items) {\n        item._detach();\n        const childId = item._id;\n        childId &&\n          (ops.push({\n            type: OpCode.DELETE_CRDT,\n            id: childId,\n            opId: this._doc.generateOpId(),\n          }),\n          reverseOps.push(\n            ...item._serialize(nn(this._id), item._getParentKeyOrThrow())\n          ),\n          updateDelta.push(deleteDelta(0)));\n      }\n      this._items = [];\n      const storageUpdates = new Map();\n      storageUpdates.set(nn(this._id), makeUpdate(this, updateDelta)),\n        this._doc.dispatch(ops, reverseOps, storageUpdates);\n    } else {\n      for (const item of this._items) item._detach();\n      this._items = [];\n    }\n  }\n  set(index, item) {\n    if (index < 0 || index >= this._items.length)\n      throw new Error(\n        `Cannot set list item at index \"\u001d${index}\". index should be between 0 and ${\n          this._items.length - 1\n        }`\n      );\n    const existingItem = this._items[index],\n      position = existingItem._getParentKeyOrThrow(),\n      existingId = existingItem._id;\n    existingItem._detach();\n    const value = lsonToLiveNode(item);\n    if (\n      (value._setParentLink(this, position),\n      (this._items[index] = value),\n      this._doc && this._id)\n    ) {\n      const id = this._doc.generateId();\n      value._attach(id, this._doc);\n      const storageUpdates = new Map();\n      storageUpdates.set(this._id, makeUpdate(this, [setDelta(index, value)]));\n      const ops = value._serialize(this._id, position, this._doc);\n      addIntentAndDeletedIdToOperation(ops, existingId),\n        this._unacknowledgedSets.set(position, nn(ops[0].opId));\n      const reverseOps = existingItem._serialize(this._id, position, void 0);\n      addIntentAndDeletedIdToOperation(reverseOps, id),\n        this._doc.dispatch(ops, reverseOps, storageUpdates);\n    }\n  }\n  toArray() {\n    return this._items.map((entry) => liveNodeToLson(entry));\n  }\n  every(predicate) {\n    return this.toArray().every(predicate);\n  }\n  filter(predicate) {\n    return this.toArray().filter(predicate);\n  }\n  find(predicate) {\n    return this.toArray().find(predicate);\n  }\n  findIndex(predicate) {\n    return this.toArray().findIndex(predicate);\n  }\n  forEach(callbackfn) {\n    return this.toArray().forEach(callbackfn);\n  }\n  get(index) {\n    if (!(index < 0 || index >= this._items.length))\n      return liveNodeToLson(this._items[index]);\n  }\n  indexOf(searchElement, fromIndex) {\n    return this.toArray().indexOf(searchElement, fromIndex);\n  }\n  lastIndexOf(searchElement, fromIndex) {\n    return this.toArray().lastIndexOf(searchElement, fromIndex);\n  }\n  map(callback) {\n    return this._items.map((entry, i) => callback(liveNodeToLson(entry), i));\n  }\n  some(predicate) {\n    return this.toArray().some(predicate);\n  }\n  [Symbol.iterator]() {\n    return new LiveListIterator(this._items);\n  }\n  _createAttachItemAndSort(op, key) {\n    const newItem = creationOpToLiveNode(op);\n    newItem._attach(op.id, nn(this._doc)),\n      newItem._setParentLink(this, key),\n      this._insertAndSort(newItem);\n    return { newItem: newItem, newIndex: this._indexOfPosition(key) };\n  }\n  _shiftItemPosition(index, key) {\n    var _a;\n    const shiftedPosition = makePosition(\n      key,\n      this._items.length > index + 1\n        ? null === (_a = this._items[index + 1]) || void 0 === _a\n          ? void 0\n          : _a._getParentKeyOrThrow()\n        : void 0\n    );\n    this._items[index]._setParentLink(this, shiftedPosition);\n  }\n}\nclass LiveListIterator {\n  constructor(items) {\n    this._innerIterator = items[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return this;\n  }\n  next() {\n    const result = this._innerIterator.next();\n    if (result.done) return { done: !0, value: void 0 };\n    return { value: liveNodeToLson(result.value) };\n  }\n}\nfunction makeUpdate(liveList, deltaUpdates) {\n  return { node: liveList, type: \"LiveList\", updates: deltaUpdates };\n}\nfunction setDelta(index, item) {\n  return {\n    index: index,\n    type: \"set\",\n    item: item instanceof LiveRegister ? item.data : item,\n  };\n}\nfunction deleteDelta(index) {\n  return { index: index, type: \"delete\" };\n}\nfunction insertDelta(index, item) {\n  return {\n    index: index,\n    type: \"insert\",\n    item: item instanceof LiveRegister ? item.data : item,\n  };\n}\nfunction moveDelta(previousIndex, index, item) {\n  return {\n    index: index,\n    type: \"move\",\n    previousIndex: previousIndex,\n    item: item instanceof LiveRegister ? item.data : item,\n  };\n}\nfunction addIntentAndDeletedIdToOperation(ops, deletedId) {\n  if (0 === ops.length)\n    throw new Error(\n      \"Internal error. Serialized LiveStructure should have at least 1 operation\"\n    );\n  const firstOp = ops[0];\n  (firstOp.intent = \"set\"), (firstOp.deletedId = deletedId);\n}\nclass LiveMap extends AbstractCrdt {\n  constructor(entries) {\n    if (\n      (super(),\n      errorIf(\n        null === entries,\n        \"Support for calling `new LiveMap(null)` will be removed in @liveblocks/client 0.18. Please call as `new LiveMap()`, or `new LiveMap([])`.\"\n      ),\n      (this.unacknowledgedSet = new Map()),\n      entries)\n    ) {\n      const mappedEntries = [];\n      for (const entry of entries) {\n        const value = lsonToLiveNode(entry[1]);\n        value._setParentLink(this, entry[0]),\n          mappedEntries.push([entry[0], value]);\n      }\n      this._map = new Map(mappedEntries);\n    } else this._map = new Map();\n  }\n  _serialize(parentId, parentKey, doc) {\n    if (null == this._id)\n      throw new Error(\"Cannot serialize item is not attached\");\n    const ops = [],\n      op = {\n        id: this._id,\n        opId: null == doc ? void 0 : doc.generateOpId(),\n        type: OpCode.CREATE_MAP,\n        parentId: parentId,\n        parentKey: parentKey,\n      };\n    ops.push(op);\n    for (const [key, value] of this._map)\n      ops.push(...value._serialize(this._id, key, doc));\n    return ops;\n  }\n  static _deserialize([id, _item], parentToChildren, doc) {\n    const map = new LiveMap();\n    map._attach(id, doc);\n    const children = parentToChildren.get(id);\n    if (null == children) return map;\n    for (const [id, crdt] of children) {\n      const child = deserialize([id, crdt], parentToChildren, doc);\n      child._setParentLink(map, crdt.parentKey),\n        map._map.set(crdt.parentKey, child);\n    }\n    return map;\n  }\n  _attach(id, doc) {\n    super._attach(id, doc);\n    for (const [_key, value] of this._map)\n      isLiveNode(value) && value._attach(doc.generateId(), doc);\n  }\n  _attachChild(op, source) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    const { id: id, parentKey: parentKey, opId: opId } = op,\n      key = parentKey,\n      child = creationOpToLiveNode(op);\n    if (void 0 !== this._doc.getItem(id)) return { modified: !1 };\n    if (source === OpSource.ACK) {\n      const lastUpdateOpId = this.unacknowledgedSet.get(key);\n      if (lastUpdateOpId === opId)\n        return this.unacknowledgedSet.delete(key), { modified: !1 };\n      if (null != lastUpdateOpId) return { modified: !1 };\n    } else source === OpSource.REMOTE && this.unacknowledgedSet.delete(key);\n    const previousValue = this._map.get(key);\n    let reverse;\n    if (previousValue) {\n      const thisId = nn(this._id);\n      (reverse = previousValue._serialize(thisId, key)),\n        previousValue._detach();\n    } else reverse = [{ type: OpCode.DELETE_CRDT, id: id }];\n    return (\n      child._setParentLink(this, key),\n      child._attach(id, this._doc),\n      this._map.set(key, child),\n      {\n        modified: {\n          node: this,\n          type: \"LiveMap\",\n          updates: { [key]: { type: \"update\" } },\n        },\n        reverse: reverse,\n      }\n    );\n  }\n  _detach() {\n    super._detach();\n    for (const item of this._map.values()) item._detach();\n  }\n  _detachChild(child) {\n    const id = nn(this._id),\n      parentKey = nn(child._parentKey),\n      reverse = child._serialize(id, parentKey, this._doc);\n    for (const [key, value] of this._map)\n      value === child && this._map.delete(key);\n    child._detach();\n    return {\n      modified: {\n        node: this,\n        type: \"LiveMap\",\n        updates: { [parentKey]: { type: \"delete\" } },\n      },\n      reverse: reverse,\n    };\n  }\n  _toSerializedCrdt() {\n    if (\"HasParent\" !== this.parent.type)\n      throw new Error(\"Cannot serialize LiveMap if parent is missing\");\n    return {\n      type: CrdtType.MAP,\n      parentId: nn(this.parent.node._id, \"Parent node expected to have ID\"),\n      parentKey: this.parent.key,\n    };\n  }\n  get(key) {\n    const value = this._map.get(key);\n    if (null != value) return liveNodeToLson(value);\n  }\n  set(key, value) {\n    const oldValue = this._map.get(key);\n    oldValue && oldValue._detach();\n    const item = lsonToLiveNode(value);\n    if (\n      (item._setParentLink(this, key),\n      this._map.set(key, item),\n      this._doc && this._id)\n    ) {\n      const id = this._doc.generateId();\n      item._attach(id, this._doc);\n      const storageUpdates = new Map();\n      storageUpdates.set(this._id, {\n        node: this,\n        type: \"LiveMap\",\n        updates: { [key]: { type: \"update\" } },\n      });\n      const ops = item._serialize(this._id, key, this._doc);\n      this.unacknowledgedSet.set(key, nn(ops[0].opId)),\n        this._doc.dispatch(\n          item._serialize(this._id, key, this._doc),\n          oldValue\n            ? oldValue._serialize(this._id, key)\n            : [{ type: OpCode.DELETE_CRDT, id: id }],\n          storageUpdates\n        );\n    }\n  }\n  get size() {\n    return this._map.size;\n  }\n  has(key) {\n    return this._map.has(key);\n  }\n  delete(key) {\n    const item = this._map.get(key);\n    if (null == item) return !1;\n    if ((item._detach(), this._map.delete(key), this._doc && item._id)) {\n      const thisId = nn(this._id),\n        storageUpdates = new Map();\n      storageUpdates.set(thisId, {\n        node: this,\n        type: \"LiveMap\",\n        updates: { [key]: { type: \"delete\" } },\n      }),\n        this._doc.dispatch(\n          [\n            {\n              type: OpCode.DELETE_CRDT,\n              id: item._id,\n              opId: this._doc.generateOpId(),\n            },\n          ],\n          item._serialize(thisId, key),\n          storageUpdates\n        );\n    }\n    return !0;\n  }\n  entries() {\n    const innerIterator = this._map.entries();\n    return {\n      [Symbol.iterator]() {\n        return this;\n      },\n      next() {\n        const iteratorValue = innerIterator.next();\n        if (iteratorValue.done) return { done: !0, value: void 0 };\n        return {\n          value: [\n            iteratorValue.value[0],\n            liveNodeToLson(iteratorValue.value[1]),\n          ],\n        };\n      },\n    };\n  }\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n  keys() {\n    return this._map.keys();\n  }\n  values() {\n    const innerIterator = this._map.values();\n    return {\n      [Symbol.iterator]() {\n        return this;\n      },\n      next() {\n        const iteratorValue = innerIterator.next();\n        if (iteratorValue.done) return { done: !0, value: void 0 };\n        return { value: liveNodeToLson(iteratorValue.value) };\n      },\n    };\n  }\n  forEach(callback) {\n    for (const entry of this) callback(entry[1], entry[0], this);\n  }\n}\nclass LiveObject extends AbstractCrdt {\n  constructor(obj = {}) {\n    super(), (this._propToLastUpdate = new Map());\n    for (const key in obj) {\n      const value = obj[key];\n      void 0 !== value && isLiveNode(value) && value._setParentLink(this, key);\n    }\n    this._map = new Map(Object.entries(obj));\n  }\n  _serialize(parentId, parentKey, doc) {\n    if (null == this._id)\n      throw new Error(\"Cannot serialize item is not attached\");\n    const opId = null == doc ? void 0 : doc.generateOpId(),\n      ops = [],\n      op =\n        void 0 !== parentId && void 0 !== parentKey\n          ? {\n              type: OpCode.CREATE_OBJECT,\n              id: this._id,\n              opId: opId,\n              parentId: parentId,\n              parentKey: parentKey,\n              data: {},\n            }\n          : { type: OpCode.CREATE_OBJECT, id: this._id, opId: opId, data: {} };\n    ops.push(op);\n    for (const [key, value] of this._map)\n      isLiveNode(value)\n        ? ops.push(...value._serialize(this._id, key, doc))\n        : (op.data[key] = value);\n    return ops;\n  }\n  static _deserialize([id, item], parentToChildren, doc) {\n    const liveObj = new LiveObject(item.data);\n    return (\n      liveObj._attach(id, doc),\n      this._deserializeChildren(liveObj, parentToChildren, doc)\n    );\n  }\n  static _deserializeChildren(liveObj, parentToChildren, doc) {\n    const children = parentToChildren.get(nn(liveObj._id));\n    if (null == children) return liveObj;\n    for (const [id, crdt] of children) {\n      const child = deserializeToLson([id, crdt], parentToChildren, doc);\n      isLiveStructure(child) && child._setParentLink(liveObj, crdt.parentKey),\n        liveObj._map.set(crdt.parentKey, child);\n    }\n    return liveObj;\n  }\n  _attach(id, doc) {\n    super._attach(id, doc);\n    for (const [_key, value] of this._map)\n      isLiveNode(value) && value._attach(doc.generateId(), doc);\n  }\n  _attachChild(op, source) {\n    if (null == this._doc)\n      throw new Error(\"Can't attach child if doc is not present\");\n    const { id: id, opId: opId, parentKey: key } = op,\n      child = creationOpToLson(op);\n    if (void 0 !== this._doc.getItem(id))\n      return (\n        this._propToLastUpdate.get(key) === opId &&\n          this._propToLastUpdate.delete(key),\n        { modified: !1 }\n      );\n    if (source === OpSource.UNDOREDO_RECONNECT)\n      this._propToLastUpdate.set(key, nn(opId));\n    else if (void 0 !== this._propToLastUpdate.get(key))\n      return this._propToLastUpdate.get(key) === opId\n        ? (this._propToLastUpdate.delete(key), { modified: !1 })\n        : { modified: !1 };\n    const thisId = nn(this._id),\n      previousValue = this._map.get(key);\n    let reverse;\n    return (\n      isLiveNode(previousValue)\n        ? ((reverse = previousValue._serialize(thisId, key)),\n          previousValue._detach())\n        : (reverse =\n            void 0 === previousValue\n              ? [{ type: OpCode.DELETE_OBJECT_KEY, id: thisId, key: key }]\n              : [\n                  {\n                    type: OpCode.UPDATE_OBJECT,\n                    id: thisId,\n                    data: { [key]: previousValue },\n                  },\n                ]),\n      this._map.set(key, child),\n      isLiveStructure(child) &&\n        (child._setParentLink(this, key), child._attach(id, this._doc)),\n      {\n        reverse: reverse,\n        modified: {\n          node: this,\n          type: \"LiveObject\",\n          updates: { [key]: { type: \"update\" } },\n        },\n      }\n    );\n  }\n  _detachChild(child) {\n    if (child) {\n      const id = nn(this._id),\n        parentKey = nn(child._parentKey),\n        reverse = child._serialize(id, parentKey, this._doc);\n      for (const [key, value] of this._map)\n        value === child && this._map.delete(key);\n      child._detach();\n      return {\n        modified: {\n          node: this,\n          type: \"LiveObject\",\n          updates: { [parentKey]: { type: \"delete\" } },\n        },\n        reverse: reverse,\n      };\n    }\n    return { modified: !1 };\n  }\n  _detach() {\n    super._detach();\n    for (const value of this._map.values())\n      isLiveNode(value) && value._detach();\n  }\n  _apply(op, isLocal) {\n    return op.type === OpCode.UPDATE_OBJECT\n      ? this._applyUpdate(op, isLocal)\n      : op.type === OpCode.DELETE_OBJECT_KEY\n      ? this._applyDeleteObjectKey(op)\n      : super._apply(op, isLocal);\n  }\n  _toSerializedCrdt() {\n    const data = {};\n    for (const [key, value] of this._map)\n      isLiveNode(value) || (data[key] = value);\n    return \"HasParent\" === this.parent.type && this.parent.node._id\n      ? {\n          type: CrdtType.OBJECT,\n          parentId: this.parent.node._id,\n          parentKey: this.parent.key,\n          data: data,\n        }\n      : { type: CrdtType.OBJECT, data: data };\n  }\n  _applyUpdate(op, isLocal) {\n    let isModified = !1;\n    const id = nn(this._id),\n      reverse = [],\n      reverseUpdate = { type: OpCode.UPDATE_OBJECT, id: id, data: {} };\n    reverse.push(reverseUpdate);\n    for (const key in op.data) {\n      const oldValue = this._map.get(key);\n      isLiveNode(oldValue)\n        ? (reverse.push(...oldValue._serialize(id, key)), oldValue._detach())\n        : void 0 !== oldValue\n        ? (reverseUpdate.data[key] = oldValue)\n        : void 0 === oldValue &&\n          reverse.push({ type: OpCode.DELETE_OBJECT_KEY, id: id, key: key });\n    }\n    const updateDelta = {};\n    for (const key in op.data) {\n      const value = op.data[key];\n      if (void 0 === value) continue;\n      if (isLocal) this._propToLastUpdate.set(key, nn(op.opId));\n      else {\n        if (null != this._propToLastUpdate.get(key)) {\n          if (this._propToLastUpdate.get(key) === op.opId) {\n            this._propToLastUpdate.delete(key);\n            continue;\n          }\n          continue;\n        }\n        isModified = !0;\n      }\n      const oldValue = this._map.get(key);\n      isLiveNode(oldValue) && oldValue._detach(),\n        (isModified = !0),\n        (updateDelta[key] = { type: \"update\" }),\n        this._map.set(key, value);\n    }\n    return (\n      0 !== Object.keys(reverseUpdate.data).length &&\n        reverse.unshift(reverseUpdate),\n      isModified\n        ? {\n            modified: { node: this, type: \"LiveObject\", updates: updateDelta },\n            reverse: reverse,\n          }\n        : { modified: !1 }\n    );\n  }\n  _applyDeleteObjectKey(op) {\n    const key = op.key;\n    if (!1 === this._map.has(key)) return { modified: !1 };\n    if (void 0 !== this._propToLastUpdate.get(key)) return { modified: !1 };\n    const oldValue = this._map.get(key),\n      id = nn(this._id);\n    let reverse = [];\n    return (\n      isLiveNode(oldValue)\n        ? ((reverse = oldValue._serialize(id, op.key)), oldValue._detach())\n        : void 0 !== oldValue &&\n          (reverse = [\n            { type: OpCode.UPDATE_OBJECT, id: id, data: { [key]: oldValue } },\n          ]),\n      this._map.delete(key),\n      {\n        modified: {\n          node: this,\n          type: \"LiveObject\",\n          updates: { [op.key]: { type: \"delete\" } },\n        },\n        reverse: reverse,\n      }\n    );\n  }\n  toObject() {\n    return (function (iterable) {\n      const obj = {};\n      for (const [key, val] of iterable) obj[key] = val;\n      return obj;\n    })(this._map);\n  }\n  set(key, value) {\n    this.update({ [key]: value });\n  }\n  get(key) {\n    return this._map.get(key);\n  }\n  delete(key) {\n    const keyAsString = key,\n      oldValue = this._map.get(keyAsString);\n    if (void 0 === oldValue) return;\n    if (null == this._doc || null == this._id)\n      return (\n        isLiveNode(oldValue) && oldValue._detach(),\n        void this._map.delete(keyAsString)\n      );\n    let reverse;\n    isLiveNode(oldValue)\n      ? (oldValue._detach(),\n        (reverse = oldValue._serialize(this._id, keyAsString)))\n      : (reverse = [\n          {\n            type: OpCode.UPDATE_OBJECT,\n            data: { [keyAsString]: oldValue },\n            id: this._id,\n          },\n        ]),\n      this._map.delete(keyAsString);\n    const storageUpdates = new Map();\n    storageUpdates.set(this._id, {\n      node: this,\n      type: \"LiveObject\",\n      updates: { [key]: { type: \"delete\" } },\n    }),\n      this._doc.dispatch(\n        [\n          {\n            type: OpCode.DELETE_OBJECT_KEY,\n            key: keyAsString,\n            id: this._id,\n            opId: this._doc.generateOpId(),\n          },\n        ],\n        reverse,\n        storageUpdates\n      );\n  }\n  update(overrides) {\n    if (null == this._doc || null == this._id) {\n      for (const key in overrides) {\n        const newValue = overrides[key];\n        if (void 0 === newValue) continue;\n        const oldValue = this._map.get(key);\n        isLiveNode(oldValue) && oldValue._detach(),\n          isLiveNode(newValue) && newValue._setParentLink(this, key),\n          this._map.set(key, newValue);\n      }\n      return;\n    }\n    const ops = [],\n      reverseOps = [],\n      opId = this._doc.generateOpId(),\n      updatedProps = {},\n      reverseUpdateOp = { id: this._id, type: OpCode.UPDATE_OBJECT, data: {} },\n      updateDelta = {};\n    for (const key in overrides) {\n      const newValue = overrides[key];\n      if (void 0 === newValue) continue;\n      const oldValue = this._map.get(key);\n      if (\n        (isLiveNode(oldValue)\n          ? (reverseOps.push(...oldValue._serialize(this._id, key)),\n            oldValue._detach())\n          : void 0 === oldValue\n          ? reverseOps.push({\n              type: OpCode.DELETE_OBJECT_KEY,\n              id: this._id,\n              key: key,\n            })\n          : (reverseUpdateOp.data[key] = oldValue),\n        isLiveNode(newValue))\n      ) {\n        newValue._setParentLink(this, key),\n          newValue._attach(this._doc.generateId(), this._doc);\n        const newAttachChildOps = newValue._serialize(this._id, key, this._doc),\n          createCrdtOp = newAttachChildOps.find(\n            (op) => op.parentId === this._id\n          );\n        createCrdtOp && this._propToLastUpdate.set(key, nn(createCrdtOp.opId)),\n          ops.push(...newAttachChildOps);\n      } else\n        (updatedProps[key] = newValue), this._propToLastUpdate.set(key, opId);\n      this._map.set(key, newValue), (updateDelta[key] = { type: \"update\" });\n    }\n    0 !== Object.keys(reverseUpdateOp.data).length &&\n      reverseOps.unshift(reverseUpdateOp),\n      0 !== Object.keys(updatedProps).length &&\n        ops.unshift({\n          opId: opId,\n          id: this._id,\n          type: OpCode.UPDATE_OBJECT,\n          data: updatedProps,\n        });\n    const storageUpdates = new Map();\n    storageUpdates.set(this._id, {\n      node: this,\n      type: \"LiveObject\",\n      updates: updateDelta,\n    }),\n      this._doc.dispatch(ops, reverseOps, storageUpdates);\n  }\n}\nfunction remove(array, item) {\n  for (let i = 0; i < array.length; i++)\n    if (array[i] === item) {\n      array.splice(i, 1);\n      break;\n    }\n}\nfunction compact(items) {\n  return items.filter((item) => null != item);\n}\nfunction creationOpToLiveNode(op) {\n  return lsonToLiveNode(creationOpToLson(op));\n}\nfunction creationOpToLson(op) {\n  switch (op.type) {\n    case OpCode.CREATE_REGISTER:\n      return op.data;\n    case OpCode.CREATE_OBJECT:\n      return new LiveObject(op.data);\n    case OpCode.CREATE_MAP:\n      return new LiveMap();\n    case OpCode.CREATE_LIST:\n      return new LiveList();\n    default:\n      return assertNever(0, \"Unknown creation Op\");\n  }\n}\nfunction isSameNodeOrChildOf(node, parent) {\n  return (\n    node === parent ||\n    (\"HasParent\" === node.parent.type &&\n      isSameNodeOrChildOf(node.parent.node, parent))\n  );\n}\nfunction deserialize([id, crdt], parentToChildren, doc) {\n  switch (crdt.type) {\n    case CrdtType.OBJECT:\n      return LiveObject._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.LIST:\n      return LiveList._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.MAP:\n      return LiveMap._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.REGISTER:\n      return LiveRegister._deserialize([id, crdt], parentToChildren, doc);\n    default:\n      throw new Error(\"Unexpected CRDT type\");\n  }\n}\nfunction deserializeToLson([id, crdt], parentToChildren, doc) {\n  switch (crdt.type) {\n    case CrdtType.OBJECT:\n      return LiveObject._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.LIST:\n      return LiveList._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.MAP:\n      return LiveMap._deserialize([id, crdt], parentToChildren, doc);\n    case CrdtType.REGISTER:\n      return crdt.data;\n    default:\n      throw new Error(\"Unexpected CRDT type\");\n  }\n}\nfunction isLiveStructure(value) {\n  return (\n    isLiveList(value) ||\n    (function (value) {\n      return value instanceof LiveMap;\n    })(value) ||\n    isLiveObject(value)\n  );\n}\nfunction isLiveNode(value) {\n  return (\n    isLiveStructure(value) ||\n    (function (value) {\n      return value instanceof LiveRegister;\n    })(value)\n  );\n}\nfunction isLiveList(value) {\n  return value instanceof LiveList;\n}\nfunction isLiveObject(value) {\n  return value instanceof LiveObject;\n}\nfunction liveNodeToLson(obj) {\n  return obj instanceof LiveRegister\n    ? obj.data\n    : obj instanceof LiveList ||\n      obj instanceof LiveMap ||\n      obj instanceof LiveObject\n    ? obj\n    : assertNever(0, \"Unknown AbstractCrdt\");\n}\nfunction lsonToLiveNode(value) {\n  return value instanceof LiveObject ||\n    value instanceof LiveMap ||\n    value instanceof LiveList\n    ? value\n    : new LiveRegister(value);\n}\nfunction getTreesDiffOperations(currentItems, newItems) {\n  const ops = [];\n  return (\n    currentItems.forEach((_, id) => {\n      newItems.get(id) || ops.push({ type: OpCode.DELETE_CRDT, id: id });\n    }),\n    newItems.forEach((crdt, id) => {\n      const currentCrdt = currentItems.get(id);\n      if (currentCrdt)\n        crdt.type === CrdtType.OBJECT &&\n          ((currentCrdt.type === CrdtType.OBJECT &&\n            JSON.stringify(crdt.data) === JSON.stringify(currentCrdt.data)) ||\n            ops.push({ type: OpCode.UPDATE_OBJECT, id: id, data: crdt.data })),\n          crdt.parentKey !== currentCrdt.parentKey &&\n            ops.push({\n              type: OpCode.SET_PARENT_KEY,\n              id: id,\n              parentKey: nn(crdt.parentKey, \"Parent key must not be missing\"),\n            });\n      else\n        switch (crdt.type) {\n          case CrdtType.REGISTER:\n            ops.push({\n              type: OpCode.CREATE_REGISTER,\n              id: id,\n              parentId: crdt.parentId,\n              parentKey: crdt.parentKey,\n              data: crdt.data,\n            });\n            break;\n          case CrdtType.LIST:\n            ops.push({\n              type: OpCode.CREATE_LIST,\n              id: id,\n              parentId: crdt.parentId,\n              parentKey: crdt.parentKey,\n            });\n            break;\n          case CrdtType.OBJECT:\n            ops.push(\n              crdt.parentId\n                ? {\n                    type: OpCode.CREATE_OBJECT,\n                    id: id,\n                    parentId: crdt.parentId,\n                    parentKey: crdt.parentKey,\n                    data: crdt.data,\n                  }\n                : { type: OpCode.CREATE_OBJECT, id: id, data: crdt.data }\n            );\n            break;\n          case CrdtType.MAP:\n            ops.push({\n              type: OpCode.CREATE_MAP,\n              id: id,\n              parentId: crdt.parentId,\n              parentKey: crdt.parentKey,\n            });\n        }\n    }),\n    ops\n  );\n}\nfunction mergeStorageUpdates(first, second) {\n  return first\n    ? \"LiveObject\" === first.type && \"LiveObject\" === second.type\n      ? (function (first, second) {\n          const updates = first.updates;\n          for (const [key, value] of entries(second.updates))\n            updates[key] = value;\n          return Object.assign(Object.assign({}, second), { updates: updates });\n        })(first, second)\n      : \"LiveMap\" === first.type && \"LiveMap\" === second.type\n      ? (function (first, second) {\n          const updates = first.updates;\n          for (const [key, value] of entries(second.updates))\n            updates[key] = value;\n          return Object.assign(Object.assign({}, second), { updates: updates });\n        })(first, second)\n      : \"LiveList\" === first.type && \"LiveList\" === second.type\n      ? (function (first, second) {\n          const updates = first.updates;\n          return Object.assign(Object.assign({}, second), {\n            updates: updates.concat(second.updates),\n          });\n        })(first, second)\n      : second\n    : second;\n}\nfunction isPlain(value) {\n  const type = typeof value;\n  return (\n    null == value ||\n    \"string\" === type ||\n    \"boolean\" === type ||\n    \"number\" === type ||\n    Array.isArray(value) ||\n    isPlainObject(value)\n  );\n}\nfunction isPlainObject(blob) {\n  return (\n    null !== blob &&\n    \"object\" == typeof blob &&\n    \"[object Object]\" === Object.prototype.toString.call(blob)\n  );\n}\nfunction findNonSerializableValue(value, path = \"\") {\n  if (!isPlain) return { path: path || \"root\", value: value };\n  if (\"object\" != typeof value || null === value) return !1;\n  for (const [key, nestedValue] of Object.entries(value)) {\n    const nestedPath = path ? path + \".\" + key : key;\n    if (!isPlain(nestedValue)) return { path: nestedPath, value: nestedValue };\n    if (\"object\" == typeof nestedValue) {\n      const nonSerializableNestedValue = findNonSerializableValue(\n        nestedValue,\n        nestedPath\n      );\n      if (nonSerializableNestedValue) return nonSerializableNestedValue;\n    }\n  }\n  return !1;\n}\nfunction entries(obj) {\n  return Object.entries(obj);\n}\nfunction tryParseJson(rawMessage) {\n  try {\n    return JSON.parse(rawMessage);\n  } catch (e) {\n    return;\n  }\n}\nfunction b64decode(b64value) {\n  try {\n    const formattedValue = b64value.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    return decodeURIComponent(\n      atob(formattedValue)\n        .split(\"\")\n        .map(function (c) {\n          return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n        .join(\"\")\n    );\n  } catch (err) {\n    return atob(b64value);\n  }\n}\nconst SCOPES = [\n  \"websocket:presence\",\n  \"websocket:storage\",\n  \"room:read\",\n  \"room:write\",\n  \"rooms:read\",\n  \"rooms:write\",\n];\nfunction isTokenExpired(token) {\n  const now = Date.now() / 1e3;\n  return now > token.exp - 300 || now < token.iat + 300;\n}\nfunction isScope(value) {\n  return SCOPES.includes(value);\n}\nfunction isStringList(value) {\n  return Array.isArray(value) && value.every((i) => \"string\" == typeof i);\n}\nfunction isAppOnlyAuthToken(data) {\n  return (\n    \"string\" == typeof data.appId &&\n    void 0 === data.roomId &&\n    isStringList(data.scopes)\n  );\n}\nfunction isRoomAuthToken(data) {\n  return (\n    \"string\" == typeof data.appId &&\n    \"string\" == typeof data.roomId &&\n    \"number\" == typeof data.actor &&\n    (void 0 === data.id || \"string\" == typeof data.id) &&\n    isStringList(data.scopes) &&\n    (void 0 === data.maxConnectionsPerRoom ||\n      \"number\" == typeof data.maxConnectionsPerRoom)\n  );\n}\nfunction isAuthToken(data) {\n  return isAppOnlyAuthToken(data) || isRoomAuthToken(data);\n}\nfunction parseJwtToken(token) {\n  const tokenParts = token.split(\".\");\n  if (3 !== tokenParts.length)\n    throw new Error(\"Authentication error: invalid JWT token\");\n  const data = tryParseJson(b64decode(tokenParts[1]));\n  if (\n    data &&\n    (function (data) {\n      if (!isPlainObject(data)) return !1;\n      const { iat: iat, exp: exp } = data;\n      return \"number\" == typeof iat && \"number\" == typeof exp;\n    })(data)\n  )\n    return data;\n  throw new Error(\"Authentication error: missing JWT metadata\");\n}\nfunction parseRoomAuthToken(tokenString) {\n  const data = parseJwtToken(tokenString);\n  if (data && isRoomAuthToken(data)) {\n    return __rest(data, [\"maxConnections\"]);\n  }\n  throw new Error(\n    \"Authentication error: we expected a room token but did not get one. Hint: if you are using a callback, ensure the room is passed when creating the token. For more information: https://liveblocks.io/docs/api-reference/liveblocks-client#createClientCallback\"\n  );\n}\nfunction isJsonScalar(data) {\n  return (\n    null === data ||\n    \"string\" == typeof data ||\n    \"number\" == typeof data ||\n    \"boolean\" == typeof data\n  );\n}\nfunction isJsonArray(data) {\n  return Array.isArray(data);\n}\nfunction isJsonObject(data) {\n  return !isJsonScalar(data) && !isJsonArray(data);\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGxpdmVibG9ja3MvY2xpZW50L3NoYXJlZC5tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQSxFQUFFLEtBQXFDO0FBQ3ZDO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0EsRUFBRSxLQUFxQztBQUN2QztBQUNBO0FBQ0EsTUFBTSxJQUFxQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxLQUFxQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxLQUFxQztBQUMvQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUNBQXlDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyx3QkFBd0I7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsNEJBQTRCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxzQ0FBc0M7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxrREFBa0Q7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLDRCQUE0QjtBQUMvQixpQ0FBaUMsa0JBQWtCO0FBQ25EO0FBQ0EseUJBQXlCLGtDQUFrQztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3QkFBd0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1QkFBdUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELFFBQVEsTUFBTSxNQUFNO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGVBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxLQUFLLFNBQVMsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUF1QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1Q0FBdUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1Q0FBdUM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtDQUFrQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUJBQXlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0NBQWtDO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLE1BQU0sbUNBQW1DLG1CQUFtQjtBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrQ0FBa0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxNQUFNO0FBQ3BEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLE1BQU07QUFDakQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE2Q0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BsaXZlYmxvY2tzL2NsaWVudC9zaGFyZWQubWpzPzhiMTkiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgX2VtaXR0ZWREZXByZWNhdGlvbldhcm5pbmdzID0gbmV3IFNldCgpO1xuZnVuY3Rpb24gZGVwcmVjYXRlKG1lc3NhZ2UsIGtleSA9IG1lc3NhZ2UpIHtcbiAgXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WICYmXG4gICAgKF9lbWl0dGVkRGVwcmVjYXRpb25XYXJuaW5ncy5oYXMoa2V5KSB8fFxuICAgICAgKF9lbWl0dGVkRGVwcmVjYXRpb25XYXJuaW5ncy5hZGQoa2V5KSxcbiAgICAgIGNvbnNvbGUuZXJyb3IoYERFUFJFQ0FUSU9OIFdBUk5JTkc6ICR7bWVzc2FnZX1gKSkpO1xufVxuZnVuY3Rpb24gZGVwcmVjYXRlSWYoY29uZGl0aW9uLCBtZXNzYWdlLCBrZXkgPSBtZXNzYWdlKSB7XG4gIFwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJiBjb25kaXRpb24gJiYgZGVwcmVjYXRlKG1lc3NhZ2UsIGtleSk7XG59XG5mdW5jdGlvbiB0aHJvd1VzYWdlRXJyb3IobWVzc2FnZSkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgY29uc3QgdXNhZ2VFcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB0aHJvdyAoKHVzYWdlRXJyb3IubmFtZSA9IFwiVXNhZ2UgZXJyb3JcIiksIHVzYWdlRXJyb3IpO1xuICB9XG59XG5mdW5jdGlvbiBlcnJvcklmKGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICBcInByb2R1Y3Rpb25cIiAhPT0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgJiZcbiAgICBjb25kaXRpb24gJiZcbiAgICB0aHJvd1VzYWdlRXJyb3IobWVzc2FnZSk7XG59XG5mdW5jdGlvbiBfX3Jlc3QocywgZSkge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBwIGluIHMpXG4gICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmXG4gICAgICBlLmluZGV4T2YocCkgPCAwICYmXG4gICAgICAodFtwXSA9IHNbcF0pO1xuICBpZiAobnVsbCAhPSBzICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKylcbiAgICAgIGUuaW5kZXhPZihwW2ldKSA8IDAgJiZcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pICYmXG4gICAgICAgICh0W3BbaV1dID0gc1twW2ldXSk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBhc3NlcnROZXZlcihfdmFsdWUsIGVycm1zZykge1xuICB0aHJvdyBuZXcgRXJyb3IoZXJybXNnKTtcbn1cbmZ1bmN0aW9uIG5uKHZhbHVlLCBlcnJtc2cgPSBcIkV4cGVjdGVkIHZhbHVlIHRvIGJlIG5vbi1udWxsYWJsZVwiKSB7XG4gIHJldHVybiAoXG4gICAgKGZ1bmN0aW9uIChjb25kaXRpb24sIGVycm1zZykge1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSBwcm9jZXNzLmVudi5OT0RFX0VOViAmJiAhY29uZGl0aW9uKSB7XG4gICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihlcnJtc2cpO1xuICAgICAgICB0aHJvdyAoKGVyci5uYW1lID0gXCJBc3NlcnRpb24gZmFpbHVyZVwiKSwgZXJyKTtcbiAgICAgIH1cbiAgICB9KShudWxsICE9IHZhbHVlLCBlcnJtc2cpLFxuICAgIHZhbHVlXG4gICk7XG59XG52YXIgQ2xpZW50TXNnQ29kZSxcbiAgT3BDb2RlLFxuICBDcmR0VHlwZSxcbiAgU2VydmVyTXNnQ29kZSxcbiAgV2Vic29ja2V0Q2xvc2VDb2RlcyxcbiAgT3BTb3VyY2U7XG5mdW5jdGlvbiBpc1Jvb3RDcmR0KGNyZHQpIHtcbiAgcmV0dXJuIGNyZHQudHlwZSA9PT0gQ3JkdFR5cGUuT0JKRUNUICYmICFpc0NoaWxkQ3JkdChjcmR0KTtcbn1cbmZ1bmN0aW9uIGlzQ2hpbGRDcmR0KGNyZHQpIHtcbiAgcmV0dXJuIHZvaWQgMCAhPT0gY3JkdC5wYXJlbnRJZCAmJiB2b2lkIDAgIT09IGNyZHQucGFyZW50S2V5O1xufVxuZnVuY3Rpb24gaXNSb29tRXZlbnROYW1lKHZhbHVlKSB7XG4gIHJldHVybiAoXG4gICAgXCJteS1wcmVzZW5jZVwiID09PSB2YWx1ZSB8fFxuICAgIFwib3RoZXJzXCIgPT09IHZhbHVlIHx8XG4gICAgXCJldmVudFwiID09PSB2YWx1ZSB8fFxuICAgIFwiZXJyb3JcIiA9PT0gdmFsdWUgfHxcbiAgICBcImNvbm5lY3Rpb25cIiA9PT0gdmFsdWVcbiAgKTtcbn1cbmZ1bmN0aW9uIEhhc1BhcmVudChub2RlLCBrZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoeyB0eXBlOiBcIkhhc1BhcmVudFwiLCBub2RlOiBub2RlLCBrZXk6IGtleSB9KTtcbn1cbiEoZnVuY3Rpb24gKENsaWVudE1zZ0NvZGUpIHtcbiAgKENsaWVudE1zZ0NvZGVbKENsaWVudE1zZ0NvZGUuVVBEQVRFX1BSRVNFTkNFID0gMTAwKV0gPSBcIlVQREFURV9QUkVTRU5DRVwiKSxcbiAgICAoQ2xpZW50TXNnQ29kZVsoQ2xpZW50TXNnQ29kZS5CUk9BRENBU1RfRVZFTlQgPSAxMDMpXSA9IFwiQlJPQURDQVNUX0VWRU5UXCIpLFxuICAgIChDbGllbnRNc2dDb2RlWyhDbGllbnRNc2dDb2RlLkZFVENIX1NUT1JBR0UgPSAyMDApXSA9IFwiRkVUQ0hfU1RPUkFHRVwiKSxcbiAgICAoQ2xpZW50TXNnQ29kZVsoQ2xpZW50TXNnQ29kZS5VUERBVEVfU1RPUkFHRSA9IDIwMSldID0gXCJVUERBVEVfU1RPUkFHRVwiKTtcbn0pKENsaWVudE1zZ0NvZGUgfHwgKENsaWVudE1zZ0NvZGUgPSB7fSkpLFxuICAoZnVuY3Rpb24gKE9wQ29kZSkge1xuICAgIChPcENvZGVbKE9wQ29kZS5JTklUID0gMCldID0gXCJJTklUXCIpLFxuICAgICAgKE9wQ29kZVsoT3BDb2RlLlNFVF9QQVJFTlRfS0VZID0gMSldID0gXCJTRVRfUEFSRU5UX0tFWVwiKSxcbiAgICAgIChPcENvZGVbKE9wQ29kZS5DUkVBVEVfTElTVCA9IDIpXSA9IFwiQ1JFQVRFX0xJU1RcIiksXG4gICAgICAoT3BDb2RlWyhPcENvZGUuVVBEQVRFX09CSkVDVCA9IDMpXSA9IFwiVVBEQVRFX09CSkVDVFwiKSxcbiAgICAgIChPcENvZGVbKE9wQ29kZS5DUkVBVEVfT0JKRUNUID0gNCldID0gXCJDUkVBVEVfT0JKRUNUXCIpLFxuICAgICAgKE9wQ29kZVsoT3BDb2RlLkRFTEVURV9DUkRUID0gNSldID0gXCJERUxFVEVfQ1JEVFwiKSxcbiAgICAgIChPcENvZGVbKE9wQ29kZS5ERUxFVEVfT0JKRUNUX0tFWSA9IDYpXSA9IFwiREVMRVRFX09CSkVDVF9LRVlcIiksXG4gICAgICAoT3BDb2RlWyhPcENvZGUuQ1JFQVRFX01BUCA9IDcpXSA9IFwiQ1JFQVRFX01BUFwiKSxcbiAgICAgIChPcENvZGVbKE9wQ29kZS5DUkVBVEVfUkVHSVNURVIgPSA4KV0gPSBcIkNSRUFURV9SRUdJU1RFUlwiKTtcbiAgfSkoT3BDb2RlIHx8IChPcENvZGUgPSB7fSkpLFxuICAoZnVuY3Rpb24gKENyZHRUeXBlKSB7XG4gICAgKENyZHRUeXBlWyhDcmR0VHlwZS5PQkpFQ1QgPSAwKV0gPSBcIk9CSkVDVFwiKSxcbiAgICAgIChDcmR0VHlwZVsoQ3JkdFR5cGUuTElTVCA9IDEpXSA9IFwiTElTVFwiKSxcbiAgICAgIChDcmR0VHlwZVsoQ3JkdFR5cGUuTUFQID0gMildID0gXCJNQVBcIiksXG4gICAgICAoQ3JkdFR5cGVbKENyZHRUeXBlLlJFR0lTVEVSID0gMyldID0gXCJSRUdJU1RFUlwiKTtcbiAgfSkoQ3JkdFR5cGUgfHwgKENyZHRUeXBlID0ge30pKSxcbiAgKGZ1bmN0aW9uIChTZXJ2ZXJNc2dDb2RlKSB7XG4gICAgKFNlcnZlck1zZ0NvZGVbKFNlcnZlck1zZ0NvZGUuVVBEQVRFX1BSRVNFTkNFID0gMTAwKV0gPSBcIlVQREFURV9QUkVTRU5DRVwiKSxcbiAgICAgIChTZXJ2ZXJNc2dDb2RlWyhTZXJ2ZXJNc2dDb2RlLlVTRVJfSk9JTkVEID0gMTAxKV0gPSBcIlVTRVJfSk9JTkVEXCIpLFxuICAgICAgKFNlcnZlck1zZ0NvZGVbKFNlcnZlck1zZ0NvZGUuVVNFUl9MRUZUID0gMTAyKV0gPSBcIlVTRVJfTEVGVFwiKSxcbiAgICAgIChTZXJ2ZXJNc2dDb2RlWyhTZXJ2ZXJNc2dDb2RlLkJST0FEQ0FTVEVEX0VWRU5UID0gMTAzKV0gPVxuICAgICAgICBcIkJST0FEQ0FTVEVEX0VWRU5UXCIpLFxuICAgICAgKFNlcnZlck1zZ0NvZGVbKFNlcnZlck1zZ0NvZGUuUk9PTV9TVEFURSA9IDEwNCldID0gXCJST09NX1NUQVRFXCIpLFxuICAgICAgKFNlcnZlck1zZ0NvZGVbKFNlcnZlck1zZ0NvZGUuSU5JVElBTF9TVE9SQUdFX1NUQVRFID0gMjAwKV0gPVxuICAgICAgICBcIklOSVRJQUxfU1RPUkFHRV9TVEFURVwiKSxcbiAgICAgIChTZXJ2ZXJNc2dDb2RlWyhTZXJ2ZXJNc2dDb2RlLlVQREFURV9TVE9SQUdFID0gMjAxKV0gPSBcIlVQREFURV9TVE9SQUdFXCIpO1xuICB9KShTZXJ2ZXJNc2dDb2RlIHx8IChTZXJ2ZXJNc2dDb2RlID0ge30pKSxcbiAgKGZ1bmN0aW9uIChXZWJzb2NrZXRDbG9zZUNvZGVzKSB7XG4gICAgKFdlYnNvY2tldENsb3NlQ29kZXNbKFdlYnNvY2tldENsb3NlQ29kZXMuQ0xPU0VfQUJOT1JNQUwgPSAxMDA2KV0gPVxuICAgICAgXCJDTE9TRV9BQk5PUk1BTFwiKSxcbiAgICAgIChXZWJzb2NrZXRDbG9zZUNvZGVzWyhXZWJzb2NrZXRDbG9zZUNvZGVzLklOVkFMSURfTUVTU0FHRV9GT1JNQVQgPSA0ZTMpXSA9XG4gICAgICAgIFwiSU5WQUxJRF9NRVNTQUdFX0ZPUk1BVFwiKSxcbiAgICAgIChXZWJzb2NrZXRDbG9zZUNvZGVzWyhXZWJzb2NrZXRDbG9zZUNvZGVzLk5PVF9BTExPV0VEID0gNDAwMSldID1cbiAgICAgICAgXCJOT1RfQUxMT1dFRFwiKSxcbiAgICAgIChXZWJzb2NrZXRDbG9zZUNvZGVzW1xuICAgICAgICAoV2Vic29ja2V0Q2xvc2VDb2Rlcy5NQVhfTlVNQkVSX09GX01FU1NBR0VTX1BFUl9TRUNPTkRTID0gNDAwMilcbiAgICAgIF0gPSBcIk1BWF9OVU1CRVJfT0ZfTUVTU0FHRVNfUEVSX1NFQ09ORFNcIiksXG4gICAgICAoV2Vic29ja2V0Q2xvc2VDb2Rlc1tcbiAgICAgICAgKFdlYnNvY2tldENsb3NlQ29kZXMuTUFYX05VTUJFUl9PRl9DT05DVVJSRU5UX0NPTk5FQ1RJT05TID0gNDAwMylcbiAgICAgIF0gPSBcIk1BWF9OVU1CRVJfT0ZfQ09OQ1VSUkVOVF9DT05ORUNUSU9OU1wiKSxcbiAgICAgIChXZWJzb2NrZXRDbG9zZUNvZGVzW1xuICAgICAgICAoV2Vic29ja2V0Q2xvc2VDb2Rlcy5NQVhfTlVNQkVSX09GX01FU1NBR0VTX1BFUl9EQVlfUEVSX0FQUCA9IDQwMDQpXG4gICAgICBdID0gXCJNQVhfTlVNQkVSX09GX01FU1NBR0VTX1BFUl9EQVlfUEVSX0FQUFwiKSxcbiAgICAgIChXZWJzb2NrZXRDbG9zZUNvZGVzW1xuICAgICAgICAoV2Vic29ja2V0Q2xvc2VDb2Rlcy5NQVhfTlVNQkVSX09GX0NPTkNVUlJFTlRfQ09OTkVDVElPTlNfUEVSX1JPT00gPSA0MDA1KVxuICAgICAgXSA9IFwiTUFYX05VTUJFUl9PRl9DT05DVVJSRU5UX0NPTk5FQ1RJT05TX1BFUl9ST09NXCIpLFxuICAgICAgKFdlYnNvY2tldENsb3NlQ29kZXNbKFdlYnNvY2tldENsb3NlQ29kZXMuQ0xPU0VfV0lUSE9VVF9SRVRSWSA9IDQ5OTkpXSA9XG4gICAgICAgIFwiQ0xPU0VfV0lUSE9VVF9SRVRSWVwiKTtcbiAgfSkoV2Vic29ja2V0Q2xvc2VDb2RlcyB8fCAoV2Vic29ja2V0Q2xvc2VDb2RlcyA9IHt9KSksXG4gIChmdW5jdGlvbiAoT3BTb3VyY2UpIHtcbiAgICAoT3BTb3VyY2VbKE9wU291cmNlLlVORE9SRURPX1JFQ09OTkVDVCA9IDApXSA9IFwiVU5ET1JFRE9fUkVDT05ORUNUXCIpLFxuICAgICAgKE9wU291cmNlWyhPcFNvdXJjZS5SRU1PVEUgPSAxKV0gPSBcIlJFTU9URVwiKSxcbiAgICAgIChPcFNvdXJjZVsoT3BTb3VyY2UuQUNLID0gMildID0gXCJBQ0tcIik7XG4gIH0pKE9wU291cmNlIHx8IChPcFNvdXJjZSA9IHt9KSk7XG5jb25zdCBOb1BhcmVudCA9IE9iamVjdC5mcmVlemUoeyB0eXBlOiBcIk5vUGFyZW50XCIgfSk7XG5mdW5jdGlvbiBPcnBoYW5lZChvbGRLZXkpIHtcbiAgcmV0dXJuIE9iamVjdC5mcmVlemUoeyB0eXBlOiBcIk9ycGhhbmVkXCIsIG9sZEtleTogb2xkS2V5IH0pO1xufVxuY2xhc3MgQWJzdHJhY3RDcmR0IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fcGFyZW50ID0gTm9QYXJlbnQ7XG4gIH1cbiAgX2dldFBhcmVudEtleU9yVGhyb3coKSB7XG4gICAgc3dpdGNoICh0aGlzLnBhcmVudC50eXBlKSB7XG4gICAgICBjYXNlIFwiSGFzUGFyZW50XCI6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5rZXk7XG4gICAgICBjYXNlIFwiTm9QYXJlbnRcIjpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyZW50IGtleSBpcyBtaXNzaW5nXCIpO1xuICAgICAgY2FzZSBcIk9ycGhhbmVkXCI6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5vbGRLZXk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYXNzZXJ0TmV2ZXIodGhpcy5wYXJlbnQsIFwiVW5rbm93biBzdGF0ZVwiKTtcbiAgICB9XG4gIH1cbiAgZ2V0IF9kb2MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19kb2M7XG4gIH1cbiAgZ2V0IHJvb21JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fX2RvYyA/IHRoaXMuX19kb2Mucm9vbUlkIDogbnVsbDtcbiAgfVxuICBnZXQgX2lkKCkge1xuICAgIHJldHVybiB0aGlzLl9faWQ7XG4gIH1cbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xuICB9XG4gIGdldCBfcGFyZW50Tm9kZSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMucGFyZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJIYXNQYXJlbnRcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Lm5vZGU7XG4gICAgICBjYXNlIFwiTm9QYXJlbnRcIjpcbiAgICAgIGNhc2UgXCJPcnBoYW5lZFwiOlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBhc3NlcnROZXZlcih0aGlzLnBhcmVudCwgXCJVbmtub3duIHN0YXRlXCIpO1xuICAgIH1cbiAgfVxuICBnZXQgX3BhcmVudEtleSgpIHtcbiAgICBzd2l0Y2ggKHRoaXMucGFyZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJIYXNQYXJlbnRcIjpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmtleTtcbiAgICAgIGNhc2UgXCJOb1BhcmVudFwiOlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNhc2UgXCJPcnBoYW5lZFwiOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQub2xkS2V5O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGFzc2VydE5ldmVyKHRoaXMucGFyZW50LCBcIlVua25vd24gc3RhdGVcIik7XG4gICAgfVxuICB9XG4gIF9hcHBseShvcCwgX2lzTG9jYWwpIHtcbiAgICByZXR1cm4gb3AudHlwZSA9PT0gT3BDb2RlLkRFTEVURV9DUkRUICYmIFwiSGFzUGFyZW50XCIgPT09IHRoaXMucGFyZW50LnR5cGVcbiAgICAgID8gdGhpcy5wYXJlbnQubm9kZS5fZGV0YWNoQ2hpbGQodGhpcylcbiAgICAgIDogeyBtb2RpZmllZDogITEgfTtcbiAgfVxuICBfc2V0UGFyZW50TGluayhuZXdQYXJlbnROb2RlLCBuZXdQYXJlbnRLZXkpIHtcbiAgICBzd2l0Y2ggKHRoaXMucGFyZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgXCJIYXNQYXJlbnRcIjpcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Lm5vZGUgIT09IG5ld1BhcmVudE5vZGUpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGF0dGFjaCBwYXJlbnQgaWYgaXQgYWxyZWFkeSBleGlzdFwiKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgKHRoaXMuX3BhcmVudCA9IEhhc1BhcmVudChuZXdQYXJlbnROb2RlLCBuZXdQYXJlbnRLZXkpKTtcbiAgICAgIGNhc2UgXCJPcnBoYW5lZFwiOlxuICAgICAgY2FzZSBcIk5vUGFyZW50XCI6XG4gICAgICAgIHJldHVybiB2b2lkICh0aGlzLl9wYXJlbnQgPSBIYXNQYXJlbnQobmV3UGFyZW50Tm9kZSwgbmV3UGFyZW50S2V5KSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYXNzZXJ0TmV2ZXIodGhpcy5wYXJlbnQsIFwiVW5rbm93biBzdGF0ZVwiKTtcbiAgICB9XG4gIH1cbiAgX2F0dGFjaChpZCwgZG9jKSB7XG4gICAgaWYgKHRoaXMuX19pZCB8fCB0aGlzLl9fZG9jKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGF0dGFjaCBpZiBDUkRUIGlzIGFscmVhZHkgYXR0YWNoZWRcIik7XG4gICAgZG9jLmFkZEl0ZW0oaWQsIHRoaXMpLCAodGhpcy5fX2lkID0gaWQpLCAodGhpcy5fX2RvYyA9IGRvYyk7XG4gIH1cbiAgX2RldGFjaCgpIHtcbiAgICBzd2l0Y2ggKFxuICAgICAgKHRoaXMuX19kb2MgJiYgdGhpcy5fX2lkICYmIHRoaXMuX19kb2MuZGVsZXRlSXRlbSh0aGlzLl9faWQpLFxuICAgICAgdGhpcy5wYXJlbnQudHlwZSlcbiAgICApIHtcbiAgICAgIGNhc2UgXCJIYXNQYXJlbnRcIjpcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gT3JwaGFuZWQodGhpcy5wYXJlbnQua2V5KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiTm9QYXJlbnRcIjpcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gTm9QYXJlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIk9ycGhhbmVkXCI6XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IE9ycGhhbmVkKHRoaXMucGFyZW50Lm9sZEtleSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXNzZXJ0TmV2ZXIodGhpcy5wYXJlbnQsIFwiVW5rbm93biBzdGF0ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fX2RvYyA9IHZvaWQgMDtcbiAgfVxufVxuY2xhc3MgTGl2ZVJlZ2lzdGVyIGV4dGVuZHMgQWJzdHJhY3RDcmR0IHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHN1cGVyKCksICh0aGlzLl9kYXRhID0gZGF0YSk7XG4gIH1cbiAgZ2V0IGRhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH1cbiAgc3RhdGljIF9kZXNlcmlhbGl6ZShbaWQsIGl0ZW1dLCBfcGFyZW50VG9DaGlsZHJlbiwgZG9jKSB7XG4gICAgY29uc3QgcmVnaXN0ZXIgPSBuZXcgTGl2ZVJlZ2lzdGVyKGl0ZW0uZGF0YSk7XG4gICAgcmV0dXJuIHJlZ2lzdGVyLl9hdHRhY2goaWQsIGRvYyksIHJlZ2lzdGVyO1xuICB9XG4gIF9zZXJpYWxpemUocGFyZW50SWQsIHBhcmVudEtleSwgZG9jKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5faWQgfHwgbnVsbCA9PSBwYXJlbnRJZCB8fCBudWxsID09IHBhcmVudEtleSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJDYW5ub3Qgc2VyaWFsaXplIHJlZ2lzdGVyIGlmIHBhcmVudElkIG9yIHBhcmVudEtleSBpcyB1bmRlZmluZWRcIlxuICAgICAgKTtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICB0eXBlOiBPcENvZGUuQ1JFQVRFX1JFR0lTVEVSLFxuICAgICAgICBvcElkOiBudWxsID09IGRvYyA/IHZvaWQgMCA6IGRvYy5nZW5lcmF0ZU9wSWQoKSxcbiAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICBwYXJlbnRJZDogcGFyZW50SWQsXG4gICAgICAgIHBhcmVudEtleTogcGFyZW50S2V5LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEsXG4gICAgICB9LFxuICAgIF07XG4gIH1cbiAgX3RvU2VyaWFsaXplZENyZHQoKSB7XG4gICAgaWYgKFwiSGFzUGFyZW50XCIgIT09IHRoaXMucGFyZW50LnR5cGUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2VyaWFsaXplIExpdmVSZWdpc3RlciBpZiBwYXJlbnQgaXMgbWlzc2luZ1wiKTtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogQ3JkdFR5cGUuUkVHSVNURVIsXG4gICAgICBwYXJlbnRJZDogbm4odGhpcy5wYXJlbnQubm9kZS5faWQsIFwiUGFyZW50IG5vZGUgZXhwZWN0ZWQgdG8gaGF2ZSBJRFwiKSxcbiAgICAgIHBhcmVudEtleTogdGhpcy5wYXJlbnQua2V5LFxuICAgICAgZGF0YTogdGhpcy5kYXRhLFxuICAgIH07XG4gIH1cbiAgX2F0dGFjaENoaWxkKF9vcCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG4gIF9kZXRhY2hDaGlsZChfY3JkdCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG4gIF9hcHBseShvcCwgaXNMb2NhbCkge1xuICAgIHJldHVybiBzdXBlci5fYXBwbHkob3AsIGlzTG9jYWwpO1xuICB9XG59XG5mdW5jdGlvbiBtYWtlUG9zaXRpb24oYmVmb3JlLCBhZnRlcikge1xuICByZXR1cm4gbnVsbCAhPSBiZWZvcmUgJiYgbnVsbCAhPSBhZnRlclxuICAgID8gcG9zKG1ha2VQb3NpdGlvbkZyb21Db2Rlcyhwb3NDb2RlcyhiZWZvcmUpLCBwb3NDb2RlcyhhZnRlcikpKVxuICAgIDogbnVsbCAhPSBiZWZvcmVcbiAgICA/IChmdW5jdGlvbiAoYmVmb3JlKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdLFxuICAgICAgICAgIGJlZm9yZUNvZGVzID0gcG9zQ29kZXMoYmVmb3JlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWZvcmVDb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBiZWZvcmVDb2Rlc1tpXTtcbiAgICAgICAgICBpZiAoMTI2ICE9PSBjb2RlKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChjb2RlICsgMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChyZXN1bHQucHVzaChjb2RlKSwgYmVmb3JlQ29kZXMubGVuZ3RoIC0gMSA9PT0gaSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKDMzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcG9zKHJlc3VsdCk7XG4gICAgICB9KShiZWZvcmUpXG4gICAgOiBudWxsICE9IGFmdGVyXG4gICAgPyAoZnVuY3Rpb24gKGFmdGVyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdLFxuICAgICAgICAgIGFmdGVyQ29kZXMgPSBwb3NDb2RlcyhhZnRlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWZ0ZXJDb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGNvZGUgPSBhZnRlckNvZGVzW2ldO1xuICAgICAgICAgIGlmICghKGNvZGUgPD0gMzMpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChjb2RlIC0gMSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChyZXN1bHQucHVzaCgzMiksIGFmdGVyQ29kZXMubGVuZ3RoIC0gMSA9PT0gaSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKDEyNik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcyhyZXN1bHQpO1xuICAgICAgfSkoYWZ0ZXIpXG4gICAgOiBwb3MoWzMzXSk7XG59XG5mdW5jdGlvbiBtYWtlUG9zaXRpb25Gcm9tQ29kZXMoYmVmb3JlLCBhZnRlcikge1xuICBsZXQgaW5kZXggPSAwO1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgZm9yICg7Oykge1xuICAgIGNvbnN0IGJlZm9yZURpZ2l0ID0gYmVmb3JlW2luZGV4XSB8fCAzMixcbiAgICAgIGFmdGVyRGlnaXQgPSBhZnRlcltpbmRleF0gfHwgMTI2O1xuICAgIGlmIChiZWZvcmVEaWdpdCA+IGFmdGVyRGlnaXQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbXBvc3NpYmxlIHRvIGdlbmVyYXRlIHBvc2l0aW9uIGJldHdlZW4gJHtiZWZvcmV9IGFuZCAke2FmdGVyfWBcbiAgICAgICk7XG4gICAgaWYgKGJlZm9yZURpZ2l0ID09PSBhZnRlckRpZ2l0KSB7XG4gICAgICByZXN1bHQucHVzaChiZWZvcmVEaWdpdCksIGluZGV4Kys7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGFmdGVyRGlnaXQgLSBiZWZvcmVEaWdpdCA9PSAxKSB7XG4gICAgICByZXN1bHQucHVzaChiZWZvcmVEaWdpdCksXG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLm1ha2VQb3NpdGlvbkZyb21Db2RlcyhiZWZvcmUuc2xpY2UoaW5kZXggKyAxKSwgW10pKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb25zdCBtaWQgPSAoYWZ0ZXJEaWdpdCArIGJlZm9yZURpZ2l0KSA+PiAxO1xuICAgIHJlc3VsdC5wdXNoKG1pZCk7XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBvc0NvZGVzKHN0cikge1xuICBjb25zdCBjb2RlcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgY29kZXMucHVzaChzdHIuY2hhckNvZGVBdChpKSk7XG4gIHJldHVybiBjb2Rlcztcbn1cbmZ1bmN0aW9uIHBvcyhjb2Rlcykge1xuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5jb2Rlcyk7XG59XG5mdW5jdGlvbiBjb21wYXJlUG9zaXRpb24ocG9zQSwgcG9zQikge1xuICBjb25zdCBhQ29kZXMgPSBwb3NDb2Rlcyhwb3NBKSxcbiAgICBiQ29kZXMgPSBwb3NDb2Rlcyhwb3NCKSxcbiAgICBtYXhMZW5ndGggPSBNYXRoLm1heChhQ29kZXMubGVuZ3RoLCBiQ29kZXMubGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhMZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGEgPSBudWxsID09IGFDb2Rlc1tpXSA/IDMyIDogYUNvZGVzW2ldLFxuICAgICAgYiA9IG51bGwgPT0gYkNvZGVzW2ldID8gMzIgOiBiQ29kZXNbaV07XG4gICAgaWYgKGEgIT09IGIpIHJldHVybiBhIC0gYjtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgYEltcG9zc2libGUgdG8gY29tcGFyZSBzaW1pbGFyIHBvc2l0aW9uIFwiJHtwb3NBfVwiIGFuZCBcIiR7cG9zQn1cImBcbiAgKTtcbn1cbmZ1bmN0aW9uIGNvbXBhcmVOb2RlUG9zaXRpb24oaXRlbUEsIGl0ZW1CKSB7XG4gIHJldHVybiBjb21wYXJlUG9zaXRpb24oXG4gICAgaXRlbUEuX2dldFBhcmVudEtleU9yVGhyb3coKSxcbiAgICBpdGVtQi5fZ2V0UGFyZW50S2V5T3JUaHJvdygpXG4gICk7XG59XG5jbGFzcyBMaXZlTGlzdCBleHRlbmRzIEFic3RyYWN0Q3JkdCB7XG4gIGNvbnN0cnVjdG9yKGl0ZW1zID0gW10pIHtcbiAgICBsZXQgcG9zaXRpb247XG4gICAgc3VwZXIoKSxcbiAgICAgICh0aGlzLl9pdGVtcyA9IFtdKSxcbiAgICAgICh0aGlzLl9pbXBsaWNpdGx5RGVsZXRlZEl0ZW1zID0gbmV3IFNldCgpKSxcbiAgICAgICh0aGlzLl91bmFja25vd2xlZGdlZFNldHMgPSBuZXcgTWFwKCkpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gbWFrZVBvc2l0aW9uKHBvc2l0aW9uKSxcbiAgICAgICAgaXRlbSA9IGxzb25Ub0xpdmVOb2RlKGl0ZW1zW2ldKTtcbiAgICAgIGl0ZW0uX3NldFBhcmVudExpbmsodGhpcywgbmV3UG9zaXRpb24pLFxuICAgICAgICB0aGlzLl9pdGVtcy5wdXNoKGl0ZW0pLFxuICAgICAgICAocG9zaXRpb24gPSBuZXdQb3NpdGlvbik7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBfZGVzZXJpYWxpemUoW2lkXSwgcGFyZW50VG9DaGlsZHJlbiwgZG9jKSB7XG4gICAgY29uc3QgbGlzdCA9IG5ldyBMaXZlTGlzdCgpO1xuICAgIGxpc3QuX2F0dGFjaChpZCwgZG9jKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHBhcmVudFRvQ2hpbGRyZW4uZ2V0KGlkKTtcbiAgICBpZiAobnVsbCA9PSBjaGlsZHJlbikgcmV0dXJuIGxpc3Q7XG4gICAgZm9yIChjb25zdCBbaWQsIGNyZHRdIG9mIGNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGRlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgICBjaGlsZC5fc2V0UGFyZW50TGluayhsaXN0LCBjcmR0LnBhcmVudEtleSksIGxpc3QuX2luc2VydEFuZFNvcnQoY2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdDtcbiAgfVxuICBfc2VyaWFsaXplKHBhcmVudElkLCBwYXJlbnRLZXksIGRvYykge1xuICAgIGlmIChudWxsID09IHRoaXMuX2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNlcmlhbGl6ZSBpdGVtIGlzIG5vdCBhdHRhY2hlZFwiKTtcbiAgICBjb25zdCBvcHMgPSBbXSxcbiAgICAgIG9wID0ge1xuICAgICAgICBpZDogdGhpcy5faWQsXG4gICAgICAgIG9wSWQ6IG51bGwgPT0gZG9jID8gdm9pZCAwIDogZG9jLmdlbmVyYXRlT3BJZCgpLFxuICAgICAgICB0eXBlOiBPcENvZGUuQ1JFQVRFX0xJU1QsXG4gICAgICAgIHBhcmVudElkOiBwYXJlbnRJZCxcbiAgICAgICAgcGFyZW50S2V5OiBwYXJlbnRLZXksXG4gICAgICB9O1xuICAgIG9wcy5wdXNoKG9wKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5faXRlbXMpXG4gICAgICBvcHMucHVzaCguLi5pdGVtLl9zZXJpYWxpemUodGhpcy5faWQsIGl0ZW0uX2dldFBhcmVudEtleU9yVGhyb3coKSwgZG9jKSk7XG4gICAgcmV0dXJuIG9wcztcbiAgfVxuICBfaW5zZXJ0QW5kU29ydChpdGVtKSB7XG4gICAgdGhpcy5faXRlbXMucHVzaChpdGVtKSwgdGhpcy5fc29ydEl0ZW1zKCk7XG4gIH1cbiAgX3NvcnRJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5zb3J0KGNvbXBhcmVOb2RlUG9zaXRpb24pO1xuICB9XG4gIF9pbmRleE9mUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXMuZmluZEluZGV4KFxuICAgICAgKGl0ZW0pID0+IGl0ZW0uX2dldFBhcmVudEtleU9yVGhyb3coKSA9PT0gcG9zaXRpb25cbiAgICApO1xuICB9XG4gIF9hdHRhY2goaWQsIGRvYykge1xuICAgIHN1cGVyLl9hdHRhY2goaWQsIGRvYyk7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuX2l0ZW1zKSBpdGVtLl9hdHRhY2goZG9jLmdlbmVyYXRlSWQoKSwgZG9jKTtcbiAgfVxuICBfZGV0YWNoKCkge1xuICAgIHN1cGVyLl9kZXRhY2goKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5faXRlbXMpIGl0ZW0uX2RldGFjaCgpO1xuICB9XG4gIF9hcHBseVNldFJlbW90ZShvcCkge1xuICAgIGlmIChudWxsID09IHRoaXMuX2RvYylcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGF0dGFjaCBjaGlsZCBpZiBkb2MgaXMgbm90IHByZXNlbnRcIik7XG4gICAgY29uc3QgeyBpZDogaWQsIHBhcmVudEtleToga2V5IH0gPSBvcCxcbiAgICAgIGNoaWxkID0gY3JlYXRpb25PcFRvTGl2ZU5vZGUob3ApO1xuICAgIGNoaWxkLl9hdHRhY2goaWQsIHRoaXMuX2RvYyksIGNoaWxkLl9zZXRQYXJlbnRMaW5rKHRoaXMsIGtleSk7XG4gICAgY29uc3QgZGVsZXRlZElkID0gb3AuZGVsZXRlZElkLFxuICAgICAgaW5kZXhPZkl0ZW1XaXRoU2FtZVBvc2l0aW9uID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKGtleSk7XG4gICAgaWYgKC0xICE9PSBpbmRleE9mSXRlbVdpdGhTYW1lUG9zaXRpb24pIHtcbiAgICAgIGNvbnN0IGl0ZW1XaXRoU2FtZVBvc2l0aW9uID0gdGhpcy5faXRlbXNbaW5kZXhPZkl0ZW1XaXRoU2FtZVBvc2l0aW9uXTtcbiAgICAgIGlmIChpdGVtV2l0aFNhbWVQb3NpdGlvbi5faWQgPT09IGRlbGV0ZWRJZClcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBpdGVtV2l0aFNhbWVQb3NpdGlvbi5fZGV0YWNoKCksXG4gICAgICAgICAgKHRoaXMuX2l0ZW1zW2luZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbl0gPSBjaGlsZCksXG4gICAgICAgICAge1xuICAgICAgICAgICAgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgW1xuICAgICAgICAgICAgICBzZXREZWx0YShpbmRleE9mSXRlbVdpdGhTYW1lUG9zaXRpb24sIGNoaWxkKSxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgcmV2ZXJzZTogW10sXG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAge1xuICAgICAgICB0aGlzLl9pbXBsaWNpdGx5RGVsZXRlZEl0ZW1zLmFkZChpdGVtV2l0aFNhbWVQb3NpdGlvbiksXG4gICAgICAgICAgKHRoaXMuX2l0ZW1zW2luZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbl0gPSBjaGlsZCk7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gW3NldERlbHRhKGluZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbiwgY2hpbGQpXSxcbiAgICAgICAgICBkZWxldGVEZWx0YSA9IHRoaXMuX2RldGFjaEl0ZW1Bc3NvY2lhdGVkVG9TZXRPcGVyYXRpb24ob3AuZGVsZXRlZElkKTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBkZWxldGVEZWx0YSAmJiBkZWx0YS5wdXNoKGRlbGV0ZURlbHRhKSxcbiAgICAgICAgICB7IG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIGRlbHRhKSwgcmV2ZXJzZTogW10gfVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICB7XG4gICAgICBjb25zdCB1cGRhdGVzID0gW10sXG4gICAgICAgIGRlbGV0ZURlbHRhID0gdGhpcy5fZGV0YWNoSXRlbUFzc29jaWF0ZWRUb1NldE9wZXJhdGlvbihvcC5kZWxldGVkSWQpO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZGVsZXRlRGVsdGEgJiYgdXBkYXRlcy5wdXNoKGRlbGV0ZURlbHRhKSxcbiAgICAgICAgdGhpcy5faW5zZXJ0QW5kU29ydChjaGlsZCksXG4gICAgICAgIHVwZGF0ZXMucHVzaChpbnNlcnREZWx0YSh0aGlzLl9pbmRleE9mUG9zaXRpb24oa2V5KSwgY2hpbGQpKSxcbiAgICAgICAgeyByZXZlcnNlOiBbXSwgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgdXBkYXRlcykgfVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgX2FwcGx5U2V0QWNrKG9wKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5fZG9jKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYXR0YWNoIGNoaWxkIGlmIGRvYyBpcyBub3QgcHJlc2VudFwiKTtcbiAgICBjb25zdCBkZWx0YSA9IFtdLFxuICAgICAgZGVsZXRlZERlbHRhID0gdGhpcy5fZGV0YWNoSXRlbUFzc29jaWF0ZWRUb1NldE9wZXJhdGlvbihvcC5kZWxldGVkSWQpO1xuICAgIGRlbGV0ZWREZWx0YSAmJiBkZWx0YS5wdXNoKGRlbGV0ZWREZWx0YSk7XG4gICAgY29uc3QgdW5hY2tub3dsZWRnZWRPcElkID0gdGhpcy5fdW5hY2tub3dsZWRnZWRTZXRzLmdldChvcC5wYXJlbnRLZXkpO1xuICAgIGlmIChudWxsICE9IHVuYWNrbm93bGVkZ2VkT3BJZCkge1xuICAgICAgaWYgKHVuYWNrbm93bGVkZ2VkT3BJZCAhPT0gb3Aub3BJZClcbiAgICAgICAgcmV0dXJuIDAgPT09IGRlbHRhLmxlbmd0aFxuICAgICAgICAgID8geyBtb2RpZmllZDogITEgfVxuICAgICAgICAgIDogeyBtb2RpZmllZDogbWFrZVVwZGF0ZSh0aGlzLCBkZWx0YSksIHJldmVyc2U6IFtdIH07XG4gICAgICB0aGlzLl91bmFja25vd2xlZGdlZFNldHMuZGVsZXRlKG9wLnBhcmVudEtleSk7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbiA9IHRoaXMuX2luZGV4T2ZQb3NpdGlvbihvcC5wYXJlbnRLZXkpLFxuICAgICAgZXhpc3RpbmdJdGVtID0gdGhpcy5faXRlbXMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IG9wLmlkKTtcbiAgICBpZiAobnVsbCAhPSBleGlzdGluZ0l0ZW0pIHtcbiAgICAgIGlmIChleGlzdGluZ0l0ZW0uX3BhcmVudEtleSA9PT0gb3AucGFyZW50S2V5KVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1vZGlmaWVkOiBkZWx0YS5sZW5ndGggPiAwICYmIG1ha2VVcGRhdGUodGhpcywgZGVsdGEpLFxuICAgICAgICAgIHJldmVyc2U6IFtdLFxuICAgICAgICB9O1xuICAgICAgLTEgIT09IGluZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbiAmJlxuICAgICAgICAodGhpcy5faW1wbGljaXRseURlbGV0ZWRJdGVtcy5hZGQoXG4gICAgICAgICAgdGhpcy5faXRlbXNbaW5kZXhPZkl0ZW1XaXRoU2FtZVBvc2l0aW9uXVxuICAgICAgICApLFxuICAgICAgICB0aGlzLl9pdGVtcy5zcGxpY2UoaW5kZXhPZkl0ZW1XaXRoU2FtZVBvc2l0aW9uLCAxKSxcbiAgICAgICAgZGVsdGEucHVzaChkZWxldGVEZWx0YShpbmRleE9mSXRlbVdpdGhTYW1lUG9zaXRpb24pKSk7XG4gICAgICBjb25zdCBwcmV2aW91c0luZGV4ID0gdGhpcy5faXRlbXMuaW5kZXhPZihleGlzdGluZ0l0ZW0pO1xuICAgICAgZXhpc3RpbmdJdGVtLl9zZXRQYXJlbnRMaW5rKHRoaXMsIG9wLnBhcmVudEtleSksIHRoaXMuX3NvcnRJdGVtcygpO1xuICAgICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGV4aXN0aW5nSXRlbSk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBuZXdJbmRleCAhPT0gcHJldmlvdXNJbmRleCAmJlxuICAgICAgICAgIGRlbHRhLnB1c2gobW92ZURlbHRhKHByZXZpb3VzSW5kZXgsIG5ld0luZGV4LCBleGlzdGluZ0l0ZW0pKSxcbiAgICAgICAgeyBtb2RpZmllZDogZGVsdGEubGVuZ3RoID4gMCAmJiBtYWtlVXBkYXRlKHRoaXMsIGRlbHRhKSwgcmV2ZXJzZTogW10gfVxuICAgICAgKTtcbiAgICB9XG4gICAge1xuICAgICAgY29uc3Qgb3JwaGFuID0gdGhpcy5fZG9jLmdldEl0ZW0ob3AuaWQpO1xuICAgICAgaWYgKG9ycGhhbiAmJiB0aGlzLl9pbXBsaWNpdGx5RGVsZXRlZEl0ZW1zLmhhcyhvcnBoYW4pKSB7XG4gICAgICAgIG9ycGhhbi5fc2V0UGFyZW50TGluayh0aGlzLCBvcC5wYXJlbnRLZXkpLFxuICAgICAgICAgIHRoaXMuX2ltcGxpY2l0bHlEZWxldGVkSXRlbXMuZGVsZXRlKG9ycGhhbiksXG4gICAgICAgICAgdGhpcy5faW5zZXJ0QW5kU29ydChvcnBoYW4pO1xuICAgICAgICBjb25zdCByZWNyZWF0ZWRJdGVtSW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKG9ycGhhbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgW1xuICAgICAgICAgICAgLTEgPT09IGluZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvblxuICAgICAgICAgICAgICA/IGluc2VydERlbHRhKHJlY3JlYXRlZEl0ZW1JbmRleCwgb3JwaGFuKVxuICAgICAgICAgICAgICA6IHNldERlbHRhKHJlY3JlYXRlZEl0ZW1JbmRleCwgb3JwaGFuKSxcbiAgICAgICAgICAgIC4uLmRlbHRhLFxuICAgICAgICAgIF0pLFxuICAgICAgICAgIHJldmVyc2U6IFtdLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAge1xuICAgICAgICAtMSAhPT0gaW5kZXhPZkl0ZW1XaXRoU2FtZVBvc2l0aW9uICYmXG4gICAgICAgICAgdGhpcy5faXRlbXMuc3BsaWNlKGluZGV4T2ZJdGVtV2l0aFNhbWVQb3NpdGlvbiwgMSk7XG4gICAgICAgIGNvbnN0IHsgbmV3SXRlbTogbmV3SXRlbSwgbmV3SW5kZXg6IG5ld0luZGV4IH0gPVxuICAgICAgICAgIHRoaXMuX2NyZWF0ZUF0dGFjaEl0ZW1BbmRTb3J0KG9wLCBvcC5wYXJlbnRLZXkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgICAgIC0xID09PSBpbmRleE9mSXRlbVdpdGhTYW1lUG9zaXRpb25cbiAgICAgICAgICAgICAgPyBpbnNlcnREZWx0YShuZXdJbmRleCwgbmV3SXRlbSlcbiAgICAgICAgICAgICAgOiBzZXREZWx0YShuZXdJbmRleCwgbmV3SXRlbSksXG4gICAgICAgICAgICAuLi5kZWx0YSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgICByZXZlcnNlOiBbXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgX2RldGFjaEl0ZW1Bc3NvY2lhdGVkVG9TZXRPcGVyYXRpb24oZGVsZXRlZElkKSB7XG4gICAgaWYgKG51bGwgPT0gZGVsZXRlZElkIHx8IG51bGwgPT0gdGhpcy5fZG9jKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBkZWxldGVkSXRlbSA9IHRoaXMuX2RvYy5nZXRJdGVtKGRlbGV0ZWRJZCk7XG4gICAgaWYgKG51bGwgPT0gZGVsZXRlZEl0ZW0pIHJldHVybiBudWxsO1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RldGFjaENoaWxkKGRlbGV0ZWRJdGVtKTtcbiAgICByZXR1cm4gITEgPT09IHJlc3VsdC5tb2RpZmllZCA/IG51bGwgOiByZXN1bHQubW9kaWZpZWQudXBkYXRlc1swXTtcbiAgfVxuICBfYXBwbHlSZW1vdGVJbnNlcnQob3ApIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLl9kb2MpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBhdHRhY2ggY2hpbGQgaWYgZG9jIGlzIG5vdCBwcmVzZW50XCIpO1xuICAgIGNvbnN0IGtleSA9IG9wLnBhcmVudEtleSxcbiAgICAgIGV4aXN0aW5nSXRlbUluZGV4ID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKGtleSk7XG4gICAgLTEgIT09IGV4aXN0aW5nSXRlbUluZGV4ICYmIHRoaXMuX3NoaWZ0SXRlbVBvc2l0aW9uKGV4aXN0aW5nSXRlbUluZGV4LCBrZXkpO1xuICAgIGNvbnN0IHsgbmV3SXRlbTogbmV3SXRlbSwgbmV3SW5kZXg6IG5ld0luZGV4IH0gPVxuICAgICAgdGhpcy5fY3JlYXRlQXR0YWNoSXRlbUFuZFNvcnQob3AsIGtleSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtpbnNlcnREZWx0YShuZXdJbmRleCwgbmV3SXRlbSldKSxcbiAgICAgIHJldmVyc2U6IFtdLFxuICAgIH07XG4gIH1cbiAgX2FwcGx5SW5zZXJ0QWNrKG9wKSB7XG4gICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5faXRlbXMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IG9wLmlkKSxcbiAgICAgIGtleSA9IG9wLnBhcmVudEtleSxcbiAgICAgIGl0ZW1JbmRleEF0UG9zaXRpb24gPSB0aGlzLl9pbmRleE9mUG9zaXRpb24oa2V5KTtcbiAgICBpZiAoZXhpc3RpbmdJdGVtKSB7XG4gICAgICBpZiAoZXhpc3RpbmdJdGVtLl9wYXJlbnRLZXkgPT09IGtleSkgcmV0dXJuIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgICB7XG4gICAgICAgIGNvbnN0IG9sZFBvc2l0aW9uSW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGV4aXN0aW5nSXRlbSk7XG4gICAgICAgIC0xICE9PSBpdGVtSW5kZXhBdFBvc2l0aW9uICYmXG4gICAgICAgICAgdGhpcy5fc2hpZnRJdGVtUG9zaXRpb24oaXRlbUluZGV4QXRQb3NpdGlvbiwga2V5KSxcbiAgICAgICAgICBleGlzdGluZ0l0ZW0uX3NldFBhcmVudExpbmsodGhpcywga2V5KSxcbiAgICAgICAgICB0aGlzLl9zb3J0SXRlbXMoKTtcbiAgICAgICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLl9pbmRleE9mUG9zaXRpb24oa2V5KTtcbiAgICAgICAgcmV0dXJuIG5ld0luZGV4ID09PSBvbGRQb3NpdGlvbkluZGV4XG4gICAgICAgICAgPyB7IG1vZGlmaWVkOiAhMSB9XG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgICAgICAgICBtb3ZlRGVsdGEob2xkUG9zaXRpb25JbmRleCwgbmV3SW5kZXgsIGV4aXN0aW5nSXRlbSksXG4gICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICByZXZlcnNlOiBbXSxcbiAgICAgICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIHtcbiAgICAgIGNvbnN0IG9ycGhhbiA9IG5uKHRoaXMuX2RvYykuZ2V0SXRlbShvcC5pZCk7XG4gICAgICBpZiAob3JwaGFuICYmIHRoaXMuX2ltcGxpY2l0bHlEZWxldGVkSXRlbXMuaGFzKG9ycGhhbikpIHtcbiAgICAgICAgb3JwaGFuLl9zZXRQYXJlbnRMaW5rKHRoaXMsIGtleSksXG4gICAgICAgICAgdGhpcy5faW1wbGljaXRseURlbGV0ZWRJdGVtcy5kZWxldGUob3JwaGFuKSxcbiAgICAgICAgICB0aGlzLl9pbnNlcnRBbmRTb3J0KG9ycGhhbik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgW1xuICAgICAgICAgICAgaW5zZXJ0RGVsdGEodGhpcy5faW5kZXhPZlBvc2l0aW9uKGtleSksIG9ycGhhbiksXG4gICAgICAgICAgXSksXG4gICAgICAgICAgcmV2ZXJzZTogW10sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB7XG4gICAgICAgIC0xICE9PSBpdGVtSW5kZXhBdFBvc2l0aW9uICYmXG4gICAgICAgICAgdGhpcy5fc2hpZnRJdGVtUG9zaXRpb24oaXRlbUluZGV4QXRQb3NpdGlvbiwga2V5KTtcbiAgICAgICAgY29uc3QgeyBuZXdJdGVtOiBuZXdJdGVtLCBuZXdJbmRleDogbmV3SW5kZXggfSA9XG4gICAgICAgICAgdGhpcy5fY3JlYXRlQXR0YWNoSXRlbUFuZFNvcnQob3AsIGtleSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgW2luc2VydERlbHRhKG5ld0luZGV4LCBuZXdJdGVtKV0pLFxuICAgICAgICAgIHJldmVyc2U6IFtdLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBfYXBwbHlJbnNlcnRVbmRvUmVkbyhvcCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCB7IGlkOiBpZCwgcGFyZW50S2V5OiBrZXkgfSA9IG9wLFxuICAgICAgY2hpbGQgPSBjcmVhdGlvbk9wVG9MaXZlTm9kZShvcCk7XG4gICAgaWYgKFxuICAgICAgdm9pZCAwICE9PVxuICAgICAgKG51bGwgPT09IChfYSA9IHRoaXMuX2RvYykgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmdldEl0ZW0oaWQpKVxuICAgIClcbiAgICAgIHJldHVybiB7IG1vZGlmaWVkOiAhMSB9O1xuICAgIGNoaWxkLl9hdHRhY2goaWQsIG5uKHRoaXMuX2RvYykpLCBjaGlsZC5fc2V0UGFyZW50TGluayh0aGlzLCBrZXkpO1xuICAgIGNvbnN0IGV4aXN0aW5nSXRlbUluZGV4ID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKGtleSk7XG4gICAgbGV0IG5ld0tleSA9IGtleTtcbiAgICBpZiAoLTEgIT09IGV4aXN0aW5nSXRlbUluZGV4KSB7XG4gICAgICAobmV3S2V5ID0gbWFrZVBvc2l0aW9uKFxuICAgICAgICB0aGlzLl9pdGVtc1tleGlzdGluZ0l0ZW1JbmRleF1cbiAgICAgICAgICA/IHRoaXMuX2l0ZW1zW2V4aXN0aW5nSXRlbUluZGV4XS5fZ2V0UGFyZW50S2V5T3JUaHJvdygpXG4gICAgICAgICAgOiB2b2lkIDAsXG4gICAgICAgIHRoaXMuX2l0ZW1zW2V4aXN0aW5nSXRlbUluZGV4ICsgMV1cbiAgICAgICAgICA/IHRoaXMuX2l0ZW1zW2V4aXN0aW5nSXRlbUluZGV4ICsgMV0uX2dldFBhcmVudEtleU9yVGhyb3coKVxuICAgICAgICAgIDogdm9pZCAwXG4gICAgICApKSxcbiAgICAgICAgY2hpbGQuX3NldFBhcmVudExpbmsodGhpcywgbmV3S2V5KTtcbiAgICB9XG4gICAgdGhpcy5faW5zZXJ0QW5kU29ydChjaGlsZCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgaW5zZXJ0RGVsdGEodGhpcy5faW5kZXhPZlBvc2l0aW9uKG5ld0tleSksIGNoaWxkKSxcbiAgICAgIF0pLFxuICAgICAgcmV2ZXJzZTogW3sgdHlwZTogT3BDb2RlLkRFTEVURV9DUkRULCBpZDogaWQgfV0sXG4gICAgfTtcbiAgfVxuICBfYXBwbHlTZXRVbmRvUmVkbyhvcCkge1xuICAgIHZhciBfYTtcbiAgICBjb25zdCB7IGlkOiBpZCwgcGFyZW50S2V5OiBrZXkgfSA9IG9wLFxuICAgICAgY2hpbGQgPSBjcmVhdGlvbk9wVG9MaXZlTm9kZShvcCk7XG4gICAgaWYgKFxuICAgICAgdm9pZCAwICE9PVxuICAgICAgKG51bGwgPT09IChfYSA9IHRoaXMuX2RvYykgfHwgdm9pZCAwID09PSBfYSA/IHZvaWQgMCA6IF9hLmdldEl0ZW0oaWQpKVxuICAgIClcbiAgICAgIHJldHVybiB7IG1vZGlmaWVkOiAhMSB9O1xuICAgIHRoaXMuX3VuYWNrbm93bGVkZ2VkU2V0cy5zZXQoa2V5LCBubihvcC5vcElkKSk7XG4gICAgY29uc3QgaW5kZXhPZkl0ZW1XaXRoU2FtZUtleSA9IHRoaXMuX2luZGV4T2ZQb3NpdGlvbihrZXkpO1xuICAgIGNoaWxkLl9hdHRhY2goaWQsIG5uKHRoaXMuX2RvYykpLCBjaGlsZC5fc2V0UGFyZW50TGluayh0aGlzLCBrZXkpO1xuICAgIGNvbnN0IG5ld0tleSA9IGtleTtcbiAgICBpZiAoLTEgIT09IGluZGV4T2ZJdGVtV2l0aFNhbWVLZXkpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuX2l0ZW1zW2luZGV4T2ZJdGVtV2l0aFNhbWVLZXldO1xuICAgICAgZXhpc3RpbmdJdGVtLl9kZXRhY2goKSwgKHRoaXMuX2l0ZW1zW2luZGV4T2ZJdGVtV2l0aFNhbWVLZXldID0gY2hpbGQpO1xuICAgICAgY29uc3QgcmV2ZXJzZSA9IGV4aXN0aW5nSXRlbS5fc2VyaWFsaXplKG5uKHRoaXMuX2lkKSwga2V5LCB0aGlzLl9kb2MpO1xuICAgICAgYWRkSW50ZW50QW5kRGVsZXRlZElkVG9PcGVyYXRpb24ocmV2ZXJzZSwgb3AuaWQpO1xuICAgICAgY29uc3QgZGVsdGEgPSBbc2V0RGVsdGEoaW5kZXhPZkl0ZW1XaXRoU2FtZUtleSwgY2hpbGQpXSxcbiAgICAgICAgZGVsZXRlZERlbHRhID0gdGhpcy5fZGV0YWNoSXRlbUFzc29jaWF0ZWRUb1NldE9wZXJhdGlvbihvcC5kZWxldGVkSWQpO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZGVsZXRlZERlbHRhICYmIGRlbHRhLnB1c2goZGVsZXRlZERlbHRhKSxcbiAgICAgICAgeyBtb2RpZmllZDogbWFrZVVwZGF0ZSh0aGlzLCBkZWx0YSksIHJldmVyc2U6IHJldmVyc2UgfVxuICAgICAgKTtcbiAgICB9XG4gICAge1xuICAgICAgdGhpcy5faW5zZXJ0QW5kU29ydChjaGlsZCksXG4gICAgICAgIHRoaXMuX2RldGFjaEl0ZW1Bc3NvY2lhdGVkVG9TZXRPcGVyYXRpb24ob3AuZGVsZXRlZElkKTtcbiAgICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKG5ld0tleSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXZlcnNlOiBbeyB0eXBlOiBPcENvZGUuREVMRVRFX0NSRFQsIGlkOiBpZCB9XSxcbiAgICAgICAgbW9kaWZpZWQ6IG1ha2VVcGRhdGUodGhpcywgW2luc2VydERlbHRhKG5ld0luZGV4LCBjaGlsZCldKSxcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIF9hdHRhY2hDaGlsZChvcCwgc291cmNlKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5fZG9jKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYXR0YWNoIGNoaWxkIGlmIGRvYyBpcyBub3QgcHJlc2VudFwiKTtcbiAgICBpZiAoXCJzZXRcIiA9PT0gb3AuaW50ZW50KSB7XG4gICAgICBpZiAoc291cmNlID09PSBPcFNvdXJjZS5SRU1PVEUpIHJldHVybiB0aGlzLl9hcHBseVNldFJlbW90ZShvcCk7XG4gICAgICBpZiAoc291cmNlID09PSBPcFNvdXJjZS5VTkRPUkVET19SRUNPTk5FQ1QpXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBseVNldFVuZG9SZWRvKG9wKTtcbiAgICAgIGlmIChzb3VyY2UgPT09IE9wU291cmNlLkFDSykgcmV0dXJuIHRoaXMuX2FwcGx5U2V0QWNrKG9wKTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZSA9PT0gT3BTb3VyY2UuUkVNT1RFXG4gICAgICA/IHRoaXMuX2FwcGx5UmVtb3RlSW5zZXJ0KG9wKVxuICAgICAgOiBzb3VyY2UgPT09IE9wU291cmNlLkFDS1xuICAgICAgPyB0aGlzLl9hcHBseUluc2VydEFjayhvcClcbiAgICAgIDogdGhpcy5fYXBwbHlJbnNlcnRVbmRvUmVkbyhvcCk7XG4gIH1cbiAgX2RldGFjaENoaWxkKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBjb25zdCBwYXJlbnRLZXkgPSBubihjaGlsZC5fcGFyZW50S2V5KSxcbiAgICAgICAgcmV2ZXJzZSA9IGNoaWxkLl9zZXJpYWxpemUobm4odGhpcy5faWQpLCBwYXJlbnRLZXksIHRoaXMuX2RvYyksXG4gICAgICAgIGluZGV4VG9EZWxldGUgPSB0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKTtcbiAgICAgIHJldHVybiAtMSA9PT0gaW5kZXhUb0RlbGV0ZVxuICAgICAgICA/IHsgbW9kaWZpZWQ6ICExIH1cbiAgICAgICAgOiAodGhpcy5faXRlbXMuc3BsaWNlKGluZGV4VG9EZWxldGUsIDEpLFxuICAgICAgICAgIGNoaWxkLl9kZXRhY2goKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBtb2RpZmllZDogbWFrZVVwZGF0ZSh0aGlzLCBbZGVsZXRlRGVsdGEoaW5kZXhUb0RlbGV0ZSldKSxcbiAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXG4gICAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1vZGlmaWVkOiAhMSB9O1xuICB9XG4gIF9hcHBseVNldENoaWxkS2V5UmVtb3RlKG5ld0tleSwgY2hpbGQpIHtcbiAgICB2YXIgX2E7XG4gICAgaWYgKHRoaXMuX2ltcGxpY2l0bHlEZWxldGVkSXRlbXMuaGFzKGNoaWxkKSkge1xuICAgICAgdGhpcy5faW1wbGljaXRseURlbGV0ZWRJdGVtcy5kZWxldGUoY2hpbGQpLFxuICAgICAgICBjaGlsZC5fc2V0UGFyZW50TGluayh0aGlzLCBuZXdLZXkpLFxuICAgICAgICB0aGlzLl9pbnNlcnRBbmRTb3J0KGNoaWxkKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgICBpbnNlcnREZWx0YSh0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKSwgY2hpbGQpLFxuICAgICAgICBdKSxcbiAgICAgICAgcmV2ZXJzZTogW10sXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAobmV3S2V5ID09PSBjaGlsZC5fcGFyZW50S2V5KSByZXR1cm4geyBtb2RpZmllZDogITEgfTtcbiAgICBjb25zdCBleGlzdGluZ0l0ZW1JbmRleCA9IHRoaXMuX2luZGV4T2ZQb3NpdGlvbihuZXdLZXkpO1xuICAgIGlmICgtMSA9PT0gZXhpc3RpbmdJdGVtSW5kZXgpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKTtcbiAgICAgIGNoaWxkLl9zZXRQYXJlbnRMaW5rKHRoaXMsIG5ld0tleSksIHRoaXMuX3NvcnRJdGVtcygpO1xuICAgICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKTtcbiAgICAgIHJldHVybiBuZXdJbmRleCA9PT0gcHJldmlvdXNJbmRleFxuICAgICAgICA/IHsgbW9kaWZpZWQ6ICExIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBtb2RpZmllZDogbWFrZVVwZGF0ZSh0aGlzLCBbXG4gICAgICAgICAgICAgIG1vdmVEZWx0YShwcmV2aW91c0luZGV4LCBuZXdJbmRleCwgY2hpbGQpLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICByZXZlcnNlOiBbXSxcbiAgICAgICAgICB9O1xuICAgIH1cbiAgICB7XG4gICAgICB0aGlzLl9pdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0uX3NldFBhcmVudExpbmsoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIG1ha2VQb3NpdGlvbihcbiAgICAgICAgICBuZXdLZXksXG4gICAgICAgICAgbnVsbCA9PT0gKF9hID0gdGhpcy5faXRlbXNbZXhpc3RpbmdJdGVtSW5kZXggKyAxXSkgfHwgdm9pZCAwID09PSBfYVxuICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgIDogX2EuX2dldFBhcmVudEtleU9yVGhyb3coKVxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc3QgcHJldmlvdXNJbmRleCA9IHRoaXMuX2l0ZW1zLmluZGV4T2YoY2hpbGQpO1xuICAgICAgY2hpbGQuX3NldFBhcmVudExpbmsodGhpcywgbmV3S2V5KSwgdGhpcy5fc29ydEl0ZW1zKCk7XG4gICAgICBjb25zdCBuZXdJbmRleCA9IHRoaXMuX2l0ZW1zLmluZGV4T2YoY2hpbGQpO1xuICAgICAgcmV0dXJuIG5ld0luZGV4ID09PSBwcmV2aW91c0luZGV4XG4gICAgICAgID8geyBtb2RpZmllZDogITEgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgICAgICAgbW92ZURlbHRhKHByZXZpb3VzSW5kZXgsIG5ld0luZGV4LCBjaGlsZCksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICAgIHJldmVyc2U6IFtdLFxuICAgICAgICAgIH07XG4gICAgfVxuICB9XG4gIF9hcHBseVNldENoaWxkS2V5QWNrKG5ld0tleSwgY2hpbGQpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IHByZXZpb3VzS2V5ID0gbm4oY2hpbGQuX3BhcmVudEtleSk7XG4gICAgaWYgKHRoaXMuX2ltcGxpY2l0bHlEZWxldGVkSXRlbXMuaGFzKGNoaWxkKSkge1xuICAgICAgY29uc3QgZXhpc3RpbmdJdGVtSW5kZXggPSB0aGlzLl9pbmRleE9mUG9zaXRpb24obmV3S2V5KTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX2ltcGxpY2l0bHlEZWxldGVkSXRlbXMuZGVsZXRlKGNoaWxkKSxcbiAgICAgICAgLTEgIT09IGV4aXN0aW5nSXRlbUluZGV4ICYmXG4gICAgICAgICAgdGhpcy5faXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdLl9zZXRQYXJlbnRMaW5rKFxuICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgIG1ha2VQb3NpdGlvbihcbiAgICAgICAgICAgICAgbmV3S2V5LFxuICAgICAgICAgICAgICBudWxsID09PSAoX2EgPSB0aGlzLl9pdGVtc1tleGlzdGluZ0l0ZW1JbmRleCArIDFdKSB8fFxuICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gX2FcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogX2EuX2dldFBhcmVudEtleU9yVGhyb3coKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICksXG4gICAgICAgIGNoaWxkLl9zZXRQYXJlbnRMaW5rKHRoaXMsIG5ld0tleSksXG4gICAgICAgIHRoaXMuX2luc2VydEFuZFNvcnQoY2hpbGQpLFxuICAgICAgICB7IG1vZGlmaWVkOiAhMSB9XG4gICAgICApO1xuICAgIH1cbiAgICB7XG4gICAgICBpZiAobmV3S2V5ID09PSBwcmV2aW91c0tleSkgcmV0dXJuIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgICBjb25zdCBwcmV2aW91c0luZGV4ID0gdGhpcy5faXRlbXMuaW5kZXhPZihjaGlsZCksXG4gICAgICAgIGV4aXN0aW5nSXRlbUluZGV4ID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKG5ld0tleSk7XG4gICAgICAtMSAhPT0gZXhpc3RpbmdJdGVtSW5kZXggJiZcbiAgICAgICAgdGhpcy5faXRlbXNbZXhpc3RpbmdJdGVtSW5kZXhdLl9zZXRQYXJlbnRMaW5rKFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgbWFrZVBvc2l0aW9uKFxuICAgICAgICAgICAgbmV3S2V5LFxuICAgICAgICAgICAgbnVsbCA9PT0gKF9iID0gdGhpcy5faXRlbXNbZXhpc3RpbmdJdGVtSW5kZXggKyAxXSkgfHwgdm9pZCAwID09PSBfYlxuICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICA6IF9iLl9nZXRQYXJlbnRLZXlPclRocm93KClcbiAgICAgICAgICApXG4gICAgICAgICksXG4gICAgICAgIGNoaWxkLl9zZXRQYXJlbnRMaW5rKHRoaXMsIG5ld0tleSksXG4gICAgICAgIHRoaXMuX3NvcnRJdGVtcygpO1xuICAgICAgY29uc3QgbmV3SW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKTtcbiAgICAgIHJldHVybiBwcmV2aW91c0luZGV4ID09PSBuZXdJbmRleFxuICAgICAgICA/IHsgbW9kaWZpZWQ6ICExIH1cbiAgICAgICAgOiB7XG4gICAgICAgICAgICBtb2RpZmllZDogbWFrZVVwZGF0ZSh0aGlzLCBbXG4gICAgICAgICAgICAgIG1vdmVEZWx0YShwcmV2aW91c0luZGV4LCBuZXdJbmRleCwgY2hpbGQpLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgICByZXZlcnNlOiBbXSxcbiAgICAgICAgICB9O1xuICAgIH1cbiAgfVxuICBfYXBwbHlTZXRDaGlsZEtleVVuZG9SZWRvKG5ld0tleSwgY2hpbGQpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgcHJldmlvdXNLZXkgPSBubihjaGlsZC5fcGFyZW50S2V5KSxcbiAgICAgIHByZXZpb3VzSW5kZXggPSB0aGlzLl9pdGVtcy5pbmRleE9mKGNoaWxkKSxcbiAgICAgIGV4aXN0aW5nSXRlbUluZGV4ID0gdGhpcy5faW5kZXhPZlBvc2l0aW9uKG5ld0tleSk7XG4gICAgLTEgIT09IGV4aXN0aW5nSXRlbUluZGV4ICYmXG4gICAgICB0aGlzLl9pdGVtc1tleGlzdGluZ0l0ZW1JbmRleF0uX3NldFBhcmVudExpbmsoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIG1ha2VQb3NpdGlvbihcbiAgICAgICAgICBuZXdLZXksXG4gICAgICAgICAgbnVsbCA9PT0gKF9hID0gdGhpcy5faXRlbXNbZXhpc3RpbmdJdGVtSW5kZXggKyAxXSkgfHwgdm9pZCAwID09PSBfYVxuICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgIDogX2EuX2dldFBhcmVudEtleU9yVGhyb3coKVxuICAgICAgICApXG4gICAgICApLFxuICAgICAgY2hpbGQuX3NldFBhcmVudExpbmsodGhpcywgbmV3S2V5KSxcbiAgICAgIHRoaXMuX3NvcnRJdGVtcygpO1xuICAgIGNvbnN0IG5ld0luZGV4ID0gdGhpcy5faXRlbXMuaW5kZXhPZihjaGlsZCk7XG4gICAgcmV0dXJuIHByZXZpb3VzSW5kZXggPT09IG5ld0luZGV4XG4gICAgICA/IHsgbW9kaWZpZWQ6ICExIH1cbiAgICAgIDoge1xuICAgICAgICAgIG1vZGlmaWVkOiBtYWtlVXBkYXRlKHRoaXMsIFtcbiAgICAgICAgICAgIG1vdmVEZWx0YShwcmV2aW91c0luZGV4LCBuZXdJbmRleCwgY2hpbGQpLFxuICAgICAgICAgIF0pLFxuICAgICAgICAgIHJldmVyc2U6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogT3BDb2RlLlNFVF9QQVJFTlRfS0VZLFxuICAgICAgICAgICAgICBpZDogbm4oY2hpbGQuX2lkKSxcbiAgICAgICAgICAgICAgcGFyZW50S2V5OiBwcmV2aW91c0tleSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgfVxuICBfc2V0Q2hpbGRLZXkobmV3S2V5LCBjaGlsZCwgc291cmNlKSB7XG4gICAgcmV0dXJuIHNvdXJjZSA9PT0gT3BTb3VyY2UuUkVNT1RFXG4gICAgICA/IHRoaXMuX2FwcGx5U2V0Q2hpbGRLZXlSZW1vdGUobmV3S2V5LCBjaGlsZClcbiAgICAgIDogc291cmNlID09PSBPcFNvdXJjZS5BQ0tcbiAgICAgID8gdGhpcy5fYXBwbHlTZXRDaGlsZEtleUFjayhuZXdLZXksIGNoaWxkKVxuICAgICAgOiB0aGlzLl9hcHBseVNldENoaWxkS2V5VW5kb1JlZG8obmV3S2V5LCBjaGlsZCk7XG4gIH1cbiAgX2FwcGx5KG9wLCBpc0xvY2FsKSB7XG4gICAgcmV0dXJuIHN1cGVyLl9hcHBseShvcCwgaXNMb2NhbCk7XG4gIH1cbiAgX3RvU2VyaWFsaXplZENyZHQoKSB7XG4gICAgaWYgKFwiSGFzUGFyZW50XCIgIT09IHRoaXMucGFyZW50LnR5cGUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2VyaWFsaXplIExpdmVMaXN0IGlmIHBhcmVudCBpcyBtaXNzaW5nXCIpO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBDcmR0VHlwZS5MSVNULFxuICAgICAgcGFyZW50SWQ6IG5uKHRoaXMucGFyZW50Lm5vZGUuX2lkLCBcIlBhcmVudCBub2RlIGV4cGVjdGVkIHRvIGhhdmUgSURcIiksXG4gICAgICBwYXJlbnRLZXk6IHRoaXMucGFyZW50LmtleSxcbiAgICB9O1xuICB9XG4gIGdldCBsZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1zLmxlbmd0aDtcbiAgfVxuICBwdXNoKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnQoZWxlbWVudCwgdGhpcy5sZW5ndGgpO1xuICB9XG4gIGluc2VydChlbGVtZW50LCBpbmRleCkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aGlzLl9pdGVtcy5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDYW5ub3QgaW5zZXJ0IGxpc3QgaXRlbSBhdCBpbmRleCBcIlx1MDAxZCR7aW5kZXh9XCIuIGluZGV4IHNob3VsZCBiZSBiZXR3ZWVuIDAgYW5kICR7dGhpcy5faXRlbXMubGVuZ3RofWBcbiAgICAgICk7XG4gICAgY29uc3QgcG9zaXRpb24gPSBtYWtlUG9zaXRpb24oXG4gICAgICAgIHRoaXMuX2l0ZW1zW2luZGV4IC0gMV1cbiAgICAgICAgICA/IHRoaXMuX2l0ZW1zW2luZGV4IC0gMV0uX2dldFBhcmVudEtleU9yVGhyb3coKVxuICAgICAgICAgIDogdm9pZCAwLFxuICAgICAgICB0aGlzLl9pdGVtc1tpbmRleF0gPyB0aGlzLl9pdGVtc1tpbmRleF0uX2dldFBhcmVudEtleU9yVGhyb3coKSA6IHZvaWQgMFxuICAgICAgKSxcbiAgICAgIHZhbHVlID0gbHNvblRvTGl2ZU5vZGUoZWxlbWVudCk7XG4gICAgaWYgKFxuICAgICAgKHZhbHVlLl9zZXRQYXJlbnRMaW5rKHRoaXMsIHBvc2l0aW9uKSxcbiAgICAgIHRoaXMuX2luc2VydEFuZFNvcnQodmFsdWUpLFxuICAgICAgdGhpcy5fZG9jICYmIHRoaXMuX2lkKVxuICAgICkge1xuICAgICAgY29uc3QgaWQgPSB0aGlzLl9kb2MuZ2VuZXJhdGVJZCgpO1xuICAgICAgdmFsdWUuX2F0dGFjaChpZCwgdGhpcy5fZG9jKSxcbiAgICAgICAgdGhpcy5fZG9jLmRpc3BhdGNoKFxuICAgICAgICAgIHZhbHVlLl9zZXJpYWxpemUodGhpcy5faWQsIHBvc2l0aW9uLCB0aGlzLl9kb2MpLFxuICAgICAgICAgIFt7IHR5cGU6IE9wQ29kZS5ERUxFVEVfQ1JEVCwgaWQ6IGlkIH1dLFxuICAgICAgICAgIG5ldyBNYXAoW1t0aGlzLl9pZCwgbWFrZVVwZGF0ZSh0aGlzLCBbaW5zZXJ0RGVsdGEoaW5kZXgsIHZhbHVlKV0pXV0pXG4gICAgICAgICk7XG4gICAgfVxuICB9XG4gIG1vdmUoaW5kZXgsIHRhcmdldEluZGV4KSB7XG4gICAgaWYgKHRhcmdldEluZGV4IDwgMCkgdGhyb3cgbmV3IEVycm9yKFwidGFyZ2V0SW5kZXggY2Fubm90IGJlIGxlc3MgdGhhbiAwXCIpO1xuICAgIGlmICh0YXJnZXRJbmRleCA+PSB0aGlzLl9pdGVtcy5sZW5ndGgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwidGFyZ2V0SW5kZXggY2Fubm90IGJlIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiB0aGUgbGlzdCBsZW5ndGhcIlxuICAgICAgKTtcbiAgICBpZiAoaW5kZXggPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJpbmRleCBjYW5ub3QgYmUgbGVzcyB0aGFuIDBcIik7XG4gICAgaWYgKGluZGV4ID49IHRoaXMuX2l0ZW1zLmxlbmd0aClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImluZGV4IGNhbm5vdCBiZSBncmVhdGVyIG9yIGVxdWFsIHRoYW4gdGhlIGxpc3QgbGVuZ3RoXCIpO1xuICAgIGxldCBiZWZvcmVQb3NpdGlvbiA9IG51bGwsXG4gICAgICBhZnRlclBvc2l0aW9uID0gbnVsbDtcbiAgICBpbmRleCA8IHRhcmdldEluZGV4XG4gICAgICA/ICgoYWZ0ZXJQb3NpdGlvbiA9XG4gICAgICAgICAgdGFyZ2V0SW5kZXggPT09IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDFcbiAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICA6IHRoaXMuX2l0ZW1zW3RhcmdldEluZGV4ICsgMV0uX2dldFBhcmVudEtleU9yVGhyb3coKSksXG4gICAgICAgIChiZWZvcmVQb3NpdGlvbiA9IHRoaXMuX2l0ZW1zW3RhcmdldEluZGV4XS5fZ2V0UGFyZW50S2V5T3JUaHJvdygpKSlcbiAgICAgIDogKChhZnRlclBvc2l0aW9uID0gdGhpcy5faXRlbXNbdGFyZ2V0SW5kZXhdLl9nZXRQYXJlbnRLZXlPclRocm93KCkpLFxuICAgICAgICAoYmVmb3JlUG9zaXRpb24gPVxuICAgICAgICAgIDAgPT09IHRhcmdldEluZGV4XG4gICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgOiB0aGlzLl9pdGVtc1t0YXJnZXRJbmRleCAtIDFdLl9nZXRQYXJlbnRLZXlPclRocm93KCkpKTtcbiAgICBjb25zdCBwb3NpdGlvbiA9IG1ha2VQb3NpdGlvbihiZWZvcmVQb3NpdGlvbiwgYWZ0ZXJQb3NpdGlvbiksXG4gICAgICBpdGVtID0gdGhpcy5faXRlbXNbaW5kZXhdLFxuICAgICAgcHJldmlvdXNQb3NpdGlvbiA9IGl0ZW0uX2dldFBhcmVudEtleU9yVGhyb3coKTtcbiAgICBpZiAoXG4gICAgICAoaXRlbS5fc2V0UGFyZW50TGluayh0aGlzLCBwb3NpdGlvbiksXG4gICAgICB0aGlzLl9zb3J0SXRlbXMoKSxcbiAgICAgIHRoaXMuX2RvYyAmJiB0aGlzLl9pZClcbiAgICApIHtcbiAgICAgIGNvbnN0IHN0b3JhZ2VVcGRhdGVzID0gbmV3IE1hcChbXG4gICAgICAgIFt0aGlzLl9pZCwgbWFrZVVwZGF0ZSh0aGlzLCBbbW92ZURlbHRhKGluZGV4LCB0YXJnZXRJbmRleCwgaXRlbSldKV0sXG4gICAgICBdKTtcbiAgICAgIHRoaXMuX2RvYy5kaXNwYXRjaChcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IE9wQ29kZS5TRVRfUEFSRU5UX0tFWSxcbiAgICAgICAgICAgIGlkOiBubihpdGVtLl9pZCksXG4gICAgICAgICAgICBvcElkOiB0aGlzLl9kb2MuZ2VuZXJhdGVPcElkKCksXG4gICAgICAgICAgICBwYXJlbnRLZXk6IHBvc2l0aW9uLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBPcENvZGUuU0VUX1BBUkVOVF9LRVksXG4gICAgICAgICAgICBpZDogbm4oaXRlbS5faWQpLFxuICAgICAgICAgICAgcGFyZW50S2V5OiBwcmV2aW91c1Bvc2l0aW9uLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIHN0b3JhZ2VVcGRhdGVzXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBkZWxldGUoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuX2l0ZW1zLmxlbmd0aClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbm5vdCBkZWxldGUgbGlzdCBpdGVtIGF0IGluZGV4IFwiXHUwMDFkJHtpbmRleH1cIi4gaW5kZXggc2hvdWxkIGJlIGJldHdlZW4gMCBhbmQgJHtcbiAgICAgICAgICB0aGlzLl9pdGVtcy5sZW5ndGggLSAxXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9pdGVtc1tpbmRleF07XG4gICAgaWYgKChpdGVtLl9kZXRhY2goKSwgdGhpcy5faXRlbXMuc3BsaWNlKGluZGV4LCAxKSwgdGhpcy5fZG9jKSkge1xuICAgICAgY29uc3QgY2hpbGRSZWNvcmRJZCA9IGl0ZW0uX2lkO1xuICAgICAgaWYgKGNoaWxkUmVjb3JkSWQpIHtcbiAgICAgICAgY29uc3Qgc3RvcmFnZVVwZGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHN0b3JhZ2VVcGRhdGVzLnNldChcbiAgICAgICAgICBubih0aGlzLl9pZCksXG4gICAgICAgICAgbWFrZVVwZGF0ZSh0aGlzLCBbZGVsZXRlRGVsdGEoaW5kZXgpXSlcbiAgICAgICAgKSxcbiAgICAgICAgICB0aGlzLl9kb2MuZGlzcGF0Y2goXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogY2hpbGRSZWNvcmRJZCxcbiAgICAgICAgICAgICAgICBvcElkOiB0aGlzLl9kb2MuZ2VuZXJhdGVPcElkKCksXG4gICAgICAgICAgICAgICAgdHlwZTogT3BDb2RlLkRFTEVURV9DUkRULFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGl0ZW0uX3NlcmlhbGl6ZShubih0aGlzLl9pZCksIGl0ZW0uX2dldFBhcmVudEtleU9yVGhyb3coKSksXG4gICAgICAgICAgICBzdG9yYWdlVXBkYXRlc1xuICAgICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNsZWFyKCkge1xuICAgIGlmICh0aGlzLl9kb2MpIHtcbiAgICAgIGNvbnN0IG9wcyA9IFtdLFxuICAgICAgICByZXZlcnNlT3BzID0gW10sXG4gICAgICAgIHVwZGF0ZURlbHRhID0gW107XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5faXRlbXMpIHtcbiAgICAgICAgaXRlbS5fZGV0YWNoKCk7XG4gICAgICAgIGNvbnN0IGNoaWxkSWQgPSBpdGVtLl9pZDtcbiAgICAgICAgY2hpbGRJZCAmJlxuICAgICAgICAgIChvcHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBPcENvZGUuREVMRVRFX0NSRFQsXG4gICAgICAgICAgICBpZDogY2hpbGRJZCxcbiAgICAgICAgICAgIG9wSWQ6IHRoaXMuX2RvYy5nZW5lcmF0ZU9wSWQoKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICByZXZlcnNlT3BzLnB1c2goXG4gICAgICAgICAgICAuLi5pdGVtLl9zZXJpYWxpemUobm4odGhpcy5faWQpLCBpdGVtLl9nZXRQYXJlbnRLZXlPclRocm93KCkpXG4gICAgICAgICAgKSxcbiAgICAgICAgICB1cGRhdGVEZWx0YS5wdXNoKGRlbGV0ZURlbHRhKDApKSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9pdGVtcyA9IFtdO1xuICAgICAgY29uc3Qgc3RvcmFnZVVwZGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgICBzdG9yYWdlVXBkYXRlcy5zZXQobm4odGhpcy5faWQpLCBtYWtlVXBkYXRlKHRoaXMsIHVwZGF0ZURlbHRhKSksXG4gICAgICAgIHRoaXMuX2RvYy5kaXNwYXRjaChvcHMsIHJldmVyc2VPcHMsIHN0b3JhZ2VVcGRhdGVzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuX2l0ZW1zKSBpdGVtLl9kZXRhY2goKTtcbiAgICAgIHRoaXMuX2l0ZW1zID0gW107XG4gICAgfVxuICB9XG4gIHNldChpbmRleCwgaXRlbSkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5faXRlbXMubGVuZ3RoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHNldCBsaXN0IGl0ZW0gYXQgaW5kZXggXCJcdTAwMWQke2luZGV4fVwiLiBpbmRleCBzaG91bGQgYmUgYmV0d2VlbiAwIGFuZCAke1xuICAgICAgICAgIHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDFcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5faXRlbXNbaW5kZXhdLFxuICAgICAgcG9zaXRpb24gPSBleGlzdGluZ0l0ZW0uX2dldFBhcmVudEtleU9yVGhyb3coKSxcbiAgICAgIGV4aXN0aW5nSWQgPSBleGlzdGluZ0l0ZW0uX2lkO1xuICAgIGV4aXN0aW5nSXRlbS5fZGV0YWNoKCk7XG4gICAgY29uc3QgdmFsdWUgPSBsc29uVG9MaXZlTm9kZShpdGVtKTtcbiAgICBpZiAoXG4gICAgICAodmFsdWUuX3NldFBhcmVudExpbmsodGhpcywgcG9zaXRpb24pLFxuICAgICAgKHRoaXMuX2l0ZW1zW2luZGV4XSA9IHZhbHVlKSxcbiAgICAgIHRoaXMuX2RvYyAmJiB0aGlzLl9pZClcbiAgICApIHtcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5fZG9jLmdlbmVyYXRlSWQoKTtcbiAgICAgIHZhbHVlLl9hdHRhY2goaWQsIHRoaXMuX2RvYyk7XG4gICAgICBjb25zdCBzdG9yYWdlVXBkYXRlcyA9IG5ldyBNYXAoKTtcbiAgICAgIHN0b3JhZ2VVcGRhdGVzLnNldCh0aGlzLl9pZCwgbWFrZVVwZGF0ZSh0aGlzLCBbc2V0RGVsdGEoaW5kZXgsIHZhbHVlKV0pKTtcbiAgICAgIGNvbnN0IG9wcyA9IHZhbHVlLl9zZXJpYWxpemUodGhpcy5faWQsIHBvc2l0aW9uLCB0aGlzLl9kb2MpO1xuICAgICAgYWRkSW50ZW50QW5kRGVsZXRlZElkVG9PcGVyYXRpb24ob3BzLCBleGlzdGluZ0lkKSxcbiAgICAgICAgdGhpcy5fdW5hY2tub3dsZWRnZWRTZXRzLnNldChwb3NpdGlvbiwgbm4ob3BzWzBdLm9wSWQpKTtcbiAgICAgIGNvbnN0IHJldmVyc2VPcHMgPSBleGlzdGluZ0l0ZW0uX3NlcmlhbGl6ZSh0aGlzLl9pZCwgcG9zaXRpb24sIHZvaWQgMCk7XG4gICAgICBhZGRJbnRlbnRBbmREZWxldGVkSWRUb09wZXJhdGlvbihyZXZlcnNlT3BzLCBpZCksXG4gICAgICAgIHRoaXMuX2RvYy5kaXNwYXRjaChvcHMsIHJldmVyc2VPcHMsIHN0b3JhZ2VVcGRhdGVzKTtcbiAgICB9XG4gIH1cbiAgdG9BcnJheSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbXMubWFwKChlbnRyeSkgPT4gbGl2ZU5vZGVUb0xzb24oZW50cnkpKTtcbiAgfVxuICBldmVyeShwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuZXZlcnkocHJlZGljYXRlKTtcbiAgfVxuICBmaWx0ZXIocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmZpbHRlcihwcmVkaWNhdGUpO1xuICB9XG4gIGZpbmQocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmZpbmQocHJlZGljYXRlKTtcbiAgfVxuICBmaW5kSW5kZXgocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmZpbmRJbmRleChwcmVkaWNhdGUpO1xuICB9XG4gIGZvckVhY2goY2FsbGJhY2tmbikge1xuICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5mb3JFYWNoKGNhbGxiYWNrZm4pO1xuICB9XG4gIGdldChpbmRleCkge1xuICAgIGlmICghKGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLl9pdGVtcy5sZW5ndGgpKVxuICAgICAgcmV0dXJuIGxpdmVOb2RlVG9Mc29uKHRoaXMuX2l0ZW1zW2luZGV4XSk7XG4gIH1cbiAgaW5kZXhPZihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuaW5kZXhPZihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpO1xuICB9XG4gIGxhc3RJbmRleE9mKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5sYXN0SW5kZXhPZihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpO1xuICB9XG4gIG1hcChjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl9pdGVtcy5tYXAoKGVudHJ5LCBpKSA9PiBjYWxsYmFjayhsaXZlTm9kZVRvTHNvbihlbnRyeSksIGkpKTtcbiAgfVxuICBzb21lKHByZWRpY2F0ZSkge1xuICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5zb21lKHByZWRpY2F0ZSk7XG4gIH1cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIG5ldyBMaXZlTGlzdEl0ZXJhdG9yKHRoaXMuX2l0ZW1zKTtcbiAgfVxuICBfY3JlYXRlQXR0YWNoSXRlbUFuZFNvcnQob3AsIGtleSkge1xuICAgIGNvbnN0IG5ld0l0ZW0gPSBjcmVhdGlvbk9wVG9MaXZlTm9kZShvcCk7XG4gICAgbmV3SXRlbS5fYXR0YWNoKG9wLmlkLCBubih0aGlzLl9kb2MpKSxcbiAgICAgIG5ld0l0ZW0uX3NldFBhcmVudExpbmsodGhpcywga2V5KSxcbiAgICAgIHRoaXMuX2luc2VydEFuZFNvcnQobmV3SXRlbSk7XG4gICAgcmV0dXJuIHsgbmV3SXRlbTogbmV3SXRlbSwgbmV3SW5kZXg6IHRoaXMuX2luZGV4T2ZQb3NpdGlvbihrZXkpIH07XG4gIH1cbiAgX3NoaWZ0SXRlbVBvc2l0aW9uKGluZGV4LCBrZXkpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3Qgc2hpZnRlZFBvc2l0aW9uID0gbWFrZVBvc2l0aW9uKFxuICAgICAga2V5LFxuICAgICAgdGhpcy5faXRlbXMubGVuZ3RoID4gaW5kZXggKyAxXG4gICAgICAgID8gbnVsbCA9PT0gKF9hID0gdGhpcy5faXRlbXNbaW5kZXggKyAxXSkgfHwgdm9pZCAwID09PSBfYVxuICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgOiBfYS5fZ2V0UGFyZW50S2V5T3JUaHJvdygpXG4gICAgICAgIDogdm9pZCAwXG4gICAgKTtcbiAgICB0aGlzLl9pdGVtc1tpbmRleF0uX3NldFBhcmVudExpbmsodGhpcywgc2hpZnRlZFBvc2l0aW9uKTtcbiAgfVxufVxuY2xhc3MgTGl2ZUxpc3RJdGVyYXRvciB7XG4gIGNvbnN0cnVjdG9yKGl0ZW1zKSB7XG4gICAgdGhpcy5faW5uZXJJdGVyYXRvciA9IGl0ZW1zW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgfVxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBuZXh0KCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2lubmVySXRlcmF0b3IubmV4dCgpO1xuICAgIGlmIChyZXN1bHQuZG9uZSkgcmV0dXJuIHsgZG9uZTogITAsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICByZXR1cm4geyB2YWx1ZTogbGl2ZU5vZGVUb0xzb24ocmVzdWx0LnZhbHVlKSB9O1xuICB9XG59XG5mdW5jdGlvbiBtYWtlVXBkYXRlKGxpdmVMaXN0LCBkZWx0YVVwZGF0ZXMpIHtcbiAgcmV0dXJuIHsgbm9kZTogbGl2ZUxpc3QsIHR5cGU6IFwiTGl2ZUxpc3RcIiwgdXBkYXRlczogZGVsdGFVcGRhdGVzIH07XG59XG5mdW5jdGlvbiBzZXREZWx0YShpbmRleCwgaXRlbSkge1xuICByZXR1cm4ge1xuICAgIGluZGV4OiBpbmRleCxcbiAgICB0eXBlOiBcInNldFwiLFxuICAgIGl0ZW06IGl0ZW0gaW5zdGFuY2VvZiBMaXZlUmVnaXN0ZXIgPyBpdGVtLmRhdGEgOiBpdGVtLFxuICB9O1xufVxuZnVuY3Rpb24gZGVsZXRlRGVsdGEoaW5kZXgpIHtcbiAgcmV0dXJuIHsgaW5kZXg6IGluZGV4LCB0eXBlOiBcImRlbGV0ZVwiIH07XG59XG5mdW5jdGlvbiBpbnNlcnREZWx0YShpbmRleCwgaXRlbSkge1xuICByZXR1cm4ge1xuICAgIGluZGV4OiBpbmRleCxcbiAgICB0eXBlOiBcImluc2VydFwiLFxuICAgIGl0ZW06IGl0ZW0gaW5zdGFuY2VvZiBMaXZlUmVnaXN0ZXIgPyBpdGVtLmRhdGEgOiBpdGVtLFxuICB9O1xufVxuZnVuY3Rpb24gbW92ZURlbHRhKHByZXZpb3VzSW5kZXgsIGluZGV4LCBpdGVtKSB7XG4gIHJldHVybiB7XG4gICAgaW5kZXg6IGluZGV4LFxuICAgIHR5cGU6IFwibW92ZVwiLFxuICAgIHByZXZpb3VzSW5kZXg6IHByZXZpb3VzSW5kZXgsXG4gICAgaXRlbTogaXRlbSBpbnN0YW5jZW9mIExpdmVSZWdpc3RlciA/IGl0ZW0uZGF0YSA6IGl0ZW0sXG4gIH07XG59XG5mdW5jdGlvbiBhZGRJbnRlbnRBbmREZWxldGVkSWRUb09wZXJhdGlvbihvcHMsIGRlbGV0ZWRJZCkge1xuICBpZiAoMCA9PT0gb3BzLmxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkludGVybmFsIGVycm9yLiBTZXJpYWxpemVkIExpdmVTdHJ1Y3R1cmUgc2hvdWxkIGhhdmUgYXQgbGVhc3QgMSBvcGVyYXRpb25cIlxuICAgICk7XG4gIGNvbnN0IGZpcnN0T3AgPSBvcHNbMF07XG4gIChmaXJzdE9wLmludGVudCA9IFwic2V0XCIpLCAoZmlyc3RPcC5kZWxldGVkSWQgPSBkZWxldGVkSWQpO1xufVxuY2xhc3MgTGl2ZU1hcCBleHRlbmRzIEFic3RyYWN0Q3JkdCB7XG4gIGNvbnN0cnVjdG9yKGVudHJpZXMpIHtcbiAgICBpZiAoXG4gICAgICAoc3VwZXIoKSxcbiAgICAgIGVycm9ySWYoXG4gICAgICAgIG51bGwgPT09IGVudHJpZXMsXG4gICAgICAgIFwiU3VwcG9ydCBmb3IgY2FsbGluZyBgbmV3IExpdmVNYXAobnVsbClgIHdpbGwgYmUgcmVtb3ZlZCBpbiBAbGl2ZWJsb2Nrcy9jbGllbnQgMC4xOC4gUGxlYXNlIGNhbGwgYXMgYG5ldyBMaXZlTWFwKClgLCBvciBgbmV3IExpdmVNYXAoW10pYC5cIlxuICAgICAgKSxcbiAgICAgICh0aGlzLnVuYWNrbm93bGVkZ2VkU2V0ID0gbmV3IE1hcCgpKSxcbiAgICAgIGVudHJpZXMpXG4gICAgKSB7XG4gICAgICBjb25zdCBtYXBwZWRFbnRyaWVzID0gW107XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBsc29uVG9MaXZlTm9kZShlbnRyeVsxXSk7XG4gICAgICAgIHZhbHVlLl9zZXRQYXJlbnRMaW5rKHRoaXMsIGVudHJ5WzBdKSxcbiAgICAgICAgICBtYXBwZWRFbnRyaWVzLnB1c2goW2VudHJ5WzBdLCB2YWx1ZV0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fbWFwID0gbmV3IE1hcChtYXBwZWRFbnRyaWVzKTtcbiAgICB9IGVsc2UgdGhpcy5fbWFwID0gbmV3IE1hcCgpO1xuICB9XG4gIF9zZXJpYWxpemUocGFyZW50SWQsIHBhcmVudEtleSwgZG9jKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5faWQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2VyaWFsaXplIGl0ZW0gaXMgbm90IGF0dGFjaGVkXCIpO1xuICAgIGNvbnN0IG9wcyA9IFtdLFxuICAgICAgb3AgPSB7XG4gICAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgICAgb3BJZDogbnVsbCA9PSBkb2MgPyB2b2lkIDAgOiBkb2MuZ2VuZXJhdGVPcElkKCksXG4gICAgICAgIHR5cGU6IE9wQ29kZS5DUkVBVEVfTUFQLFxuICAgICAgICBwYXJlbnRJZDogcGFyZW50SWQsXG4gICAgICAgIHBhcmVudEtleTogcGFyZW50S2V5LFxuICAgICAgfTtcbiAgICBvcHMucHVzaChvcCk7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fbWFwKVxuICAgICAgb3BzLnB1c2goLi4udmFsdWUuX3NlcmlhbGl6ZSh0aGlzLl9pZCwga2V5LCBkb2MpKTtcbiAgICByZXR1cm4gb3BzO1xuICB9XG4gIHN0YXRpYyBfZGVzZXJpYWxpemUoW2lkLCBfaXRlbV0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYykge1xuICAgIGNvbnN0IG1hcCA9IG5ldyBMaXZlTWFwKCk7XG4gICAgbWFwLl9hdHRhY2goaWQsIGRvYyk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRUb0NoaWxkcmVuLmdldChpZCk7XG4gICAgaWYgKG51bGwgPT0gY2hpbGRyZW4pIHJldHVybiBtYXA7XG4gICAgZm9yIChjb25zdCBbaWQsIGNyZHRdIG9mIGNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGRlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgICBjaGlsZC5fc2V0UGFyZW50TGluayhtYXAsIGNyZHQucGFyZW50S2V5KSxcbiAgICAgICAgbWFwLl9tYXAuc2V0KGNyZHQucGFyZW50S2V5LCBjaGlsZCk7XG4gICAgfVxuICAgIHJldHVybiBtYXA7XG4gIH1cbiAgX2F0dGFjaChpZCwgZG9jKSB7XG4gICAgc3VwZXIuX2F0dGFjaChpZCwgZG9jKTtcbiAgICBmb3IgKGNvbnN0IFtfa2V5LCB2YWx1ZV0gb2YgdGhpcy5fbWFwKVxuICAgICAgaXNMaXZlTm9kZSh2YWx1ZSkgJiYgdmFsdWUuX2F0dGFjaChkb2MuZ2VuZXJhdGVJZCgpLCBkb2MpO1xuICB9XG4gIF9hdHRhY2hDaGlsZChvcCwgc291cmNlKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5fZG9jKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgYXR0YWNoIGNoaWxkIGlmIGRvYyBpcyBub3QgcHJlc2VudFwiKTtcbiAgICBjb25zdCB7IGlkOiBpZCwgcGFyZW50S2V5OiBwYXJlbnRLZXksIG9wSWQ6IG9wSWQgfSA9IG9wLFxuICAgICAga2V5ID0gcGFyZW50S2V5LFxuICAgICAgY2hpbGQgPSBjcmVhdGlvbk9wVG9MaXZlTm9kZShvcCk7XG4gICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5fZG9jLmdldEl0ZW0oaWQpKSByZXR1cm4geyBtb2RpZmllZDogITEgfTtcbiAgICBpZiAoc291cmNlID09PSBPcFNvdXJjZS5BQ0spIHtcbiAgICAgIGNvbnN0IGxhc3RVcGRhdGVPcElkID0gdGhpcy51bmFja25vd2xlZGdlZFNldC5nZXQoa2V5KTtcbiAgICAgIGlmIChsYXN0VXBkYXRlT3BJZCA9PT0gb3BJZClcbiAgICAgICAgcmV0dXJuIHRoaXMudW5hY2tub3dsZWRnZWRTZXQuZGVsZXRlKGtleSksIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgICBpZiAobnVsbCAhPSBsYXN0VXBkYXRlT3BJZCkgcmV0dXJuIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgfSBlbHNlIHNvdXJjZSA9PT0gT3BTb3VyY2UuUkVNT1RFICYmIHRoaXMudW5hY2tub3dsZWRnZWRTZXQuZGVsZXRlKGtleSk7XG4gICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHRoaXMuX21hcC5nZXQoa2V5KTtcbiAgICBsZXQgcmV2ZXJzZTtcbiAgICBpZiAocHJldmlvdXNWYWx1ZSkge1xuICAgICAgY29uc3QgdGhpc0lkID0gbm4odGhpcy5faWQpO1xuICAgICAgKHJldmVyc2UgPSBwcmV2aW91c1ZhbHVlLl9zZXJpYWxpemUodGhpc0lkLCBrZXkpKSxcbiAgICAgICAgcHJldmlvdXNWYWx1ZS5fZGV0YWNoKCk7XG4gICAgfSBlbHNlIHJldmVyc2UgPSBbeyB0eXBlOiBPcENvZGUuREVMRVRFX0NSRFQsIGlkOiBpZCB9XTtcbiAgICByZXR1cm4gKFxuICAgICAgY2hpbGQuX3NldFBhcmVudExpbmsodGhpcywga2V5KSxcbiAgICAgIGNoaWxkLl9hdHRhY2goaWQsIHRoaXMuX2RvYyksXG4gICAgICB0aGlzLl9tYXAuc2V0KGtleSwgY2hpbGQpLFxuICAgICAge1xuICAgICAgICBtb2RpZmllZDoge1xuICAgICAgICAgIG5vZGU6IHRoaXMsXG4gICAgICAgICAgdHlwZTogXCJMaXZlTWFwXCIsXG4gICAgICAgICAgdXBkYXRlczogeyBba2V5XTogeyB0eXBlOiBcInVwZGF0ZVwiIH0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmV2ZXJzZTogcmV2ZXJzZSxcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIF9kZXRhY2goKSB7XG4gICAgc3VwZXIuX2RldGFjaCgpO1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLl9tYXAudmFsdWVzKCkpIGl0ZW0uX2RldGFjaCgpO1xuICB9XG4gIF9kZXRhY2hDaGlsZChjaGlsZCkge1xuICAgIGNvbnN0IGlkID0gbm4odGhpcy5faWQpLFxuICAgICAgcGFyZW50S2V5ID0gbm4oY2hpbGQuX3BhcmVudEtleSksXG4gICAgICByZXZlcnNlID0gY2hpbGQuX3NlcmlhbGl6ZShpZCwgcGFyZW50S2V5LCB0aGlzLl9kb2MpO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHRoaXMuX21hcClcbiAgICAgIHZhbHVlID09PSBjaGlsZCAmJiB0aGlzLl9tYXAuZGVsZXRlKGtleSk7XG4gICAgY2hpbGQuX2RldGFjaCgpO1xuICAgIHJldHVybiB7XG4gICAgICBtb2RpZmllZDoge1xuICAgICAgICBub2RlOiB0aGlzLFxuICAgICAgICB0eXBlOiBcIkxpdmVNYXBcIixcbiAgICAgICAgdXBkYXRlczogeyBbcGFyZW50S2V5XTogeyB0eXBlOiBcImRlbGV0ZVwiIH0gfSxcbiAgICAgIH0sXG4gICAgICByZXZlcnNlOiByZXZlcnNlLFxuICAgIH07XG4gIH1cbiAgX3RvU2VyaWFsaXplZENyZHQoKSB7XG4gICAgaWYgKFwiSGFzUGFyZW50XCIgIT09IHRoaXMucGFyZW50LnR5cGUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc2VyaWFsaXplIExpdmVNYXAgaWYgcGFyZW50IGlzIG1pc3NpbmdcIik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IENyZHRUeXBlLk1BUCxcbiAgICAgIHBhcmVudElkOiBubih0aGlzLnBhcmVudC5ub2RlLl9pZCwgXCJQYXJlbnQgbm9kZSBleHBlY3RlZCB0byBoYXZlIElEXCIpLFxuICAgICAgcGFyZW50S2V5OiB0aGlzLnBhcmVudC5rZXksXG4gICAgfTtcbiAgfVxuICBnZXQoa2V5KSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGtleSk7XG4gICAgaWYgKG51bGwgIT0gdmFsdWUpIHJldHVybiBsaXZlTm9kZVRvTHNvbih2YWx1ZSk7XG4gIH1cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuX21hcC5nZXQoa2V5KTtcbiAgICBvbGRWYWx1ZSAmJiBvbGRWYWx1ZS5fZGV0YWNoKCk7XG4gICAgY29uc3QgaXRlbSA9IGxzb25Ub0xpdmVOb2RlKHZhbHVlKTtcbiAgICBpZiAoXG4gICAgICAoaXRlbS5fc2V0UGFyZW50TGluayh0aGlzLCBrZXkpLFxuICAgICAgdGhpcy5fbWFwLnNldChrZXksIGl0ZW0pLFxuICAgICAgdGhpcy5fZG9jICYmIHRoaXMuX2lkKVxuICAgICkge1xuICAgICAgY29uc3QgaWQgPSB0aGlzLl9kb2MuZ2VuZXJhdGVJZCgpO1xuICAgICAgaXRlbS5fYXR0YWNoKGlkLCB0aGlzLl9kb2MpO1xuICAgICAgY29uc3Qgc3RvcmFnZVVwZGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgICBzdG9yYWdlVXBkYXRlcy5zZXQodGhpcy5faWQsIHtcbiAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgdHlwZTogXCJMaXZlTWFwXCIsXG4gICAgICAgIHVwZGF0ZXM6IHsgW2tleV06IHsgdHlwZTogXCJ1cGRhdGVcIiB9IH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IG9wcyA9IGl0ZW0uX3NlcmlhbGl6ZSh0aGlzLl9pZCwga2V5LCB0aGlzLl9kb2MpO1xuICAgICAgdGhpcy51bmFja25vd2xlZGdlZFNldC5zZXQoa2V5LCBubihvcHNbMF0ub3BJZCkpLFxuICAgICAgICB0aGlzLl9kb2MuZGlzcGF0Y2goXG4gICAgICAgICAgaXRlbS5fc2VyaWFsaXplKHRoaXMuX2lkLCBrZXksIHRoaXMuX2RvYyksXG4gICAgICAgICAgb2xkVmFsdWVcbiAgICAgICAgICAgID8gb2xkVmFsdWUuX3NlcmlhbGl6ZSh0aGlzLl9pZCwga2V5KVxuICAgICAgICAgICAgOiBbeyB0eXBlOiBPcENvZGUuREVMRVRFX0NSRFQsIGlkOiBpZCB9XSxcbiAgICAgICAgICBzdG9yYWdlVXBkYXRlc1xuICAgICAgICApO1xuICAgIH1cbiAgfVxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFwLnNpemU7XG4gIH1cbiAgaGFzKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9tYXAuaGFzKGtleSk7XG4gIH1cbiAgZGVsZXRlKGtleSkge1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9tYXAuZ2V0KGtleSk7XG4gICAgaWYgKG51bGwgPT0gaXRlbSkgcmV0dXJuICExO1xuICAgIGlmICgoaXRlbS5fZGV0YWNoKCksIHRoaXMuX21hcC5kZWxldGUoa2V5KSwgdGhpcy5fZG9jICYmIGl0ZW0uX2lkKSkge1xuICAgICAgY29uc3QgdGhpc0lkID0gbm4odGhpcy5faWQpLFxuICAgICAgICBzdG9yYWdlVXBkYXRlcyA9IG5ldyBNYXAoKTtcbiAgICAgIHN0b3JhZ2VVcGRhdGVzLnNldCh0aGlzSWQsIHtcbiAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgdHlwZTogXCJMaXZlTWFwXCIsXG4gICAgICAgIHVwZGF0ZXM6IHsgW2tleV06IHsgdHlwZTogXCJkZWxldGVcIiB9IH0sXG4gICAgICB9KSxcbiAgICAgICAgdGhpcy5fZG9jLmRpc3BhdGNoKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdHlwZTogT3BDb2RlLkRFTEVURV9DUkRULFxuICAgICAgICAgICAgICBpZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgIG9wSWQ6IHRoaXMuX2RvYy5nZW5lcmF0ZU9wSWQoKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBpdGVtLl9zZXJpYWxpemUodGhpc0lkLCBrZXkpLFxuICAgICAgICAgIHN0b3JhZ2VVcGRhdGVzXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbiAgfVxuICBlbnRyaWVzKCkge1xuICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0aGlzLl9tYXAuZW50cmllcygpO1xuICAgIHJldHVybiB7XG4gICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgaXRlcmF0b3JWYWx1ZSA9IGlubmVySXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoaXRlcmF0b3JWYWx1ZS5kb25lKSByZXR1cm4geyBkb25lOiAhMCwgdmFsdWU6IHZvaWQgMCB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiBbXG4gICAgICAgICAgICBpdGVyYXRvclZhbHVlLnZhbHVlWzBdLFxuICAgICAgICAgICAgbGl2ZU5vZGVUb0xzb24oaXRlcmF0b3JWYWx1ZS52YWx1ZVsxXSksXG4gICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzKCk7XG4gIH1cbiAga2V5cygpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFwLmtleXMoKTtcbiAgfVxuICB2YWx1ZXMoKSB7XG4gICAgY29uc3QgaW5uZXJJdGVyYXRvciA9IHRoaXMuX21hcC52YWx1ZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGl0ZXJhdG9yVmFsdWUgPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKGl0ZXJhdG9yVmFsdWUuZG9uZSkgcmV0dXJuIHsgZG9uZTogITAsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGxpdmVOb2RlVG9Mc29uKGl0ZXJhdG9yVmFsdWUudmFsdWUpIH07XG4gICAgICB9LFxuICAgIH07XG4gIH1cbiAgZm9yRWFjaChjYWxsYmFjaykge1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcykgY2FsbGJhY2soZW50cnlbMV0sIGVudHJ5WzBdLCB0aGlzKTtcbiAgfVxufVxuY2xhc3MgTGl2ZU9iamVjdCBleHRlbmRzIEFic3RyYWN0Q3JkdCB7XG4gIGNvbnN0cnVjdG9yKG9iaiA9IHt9KSB7XG4gICAgc3VwZXIoKSwgKHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUgPSBuZXcgTWFwKCkpO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xuICAgICAgY29uc3QgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIHZvaWQgMCAhPT0gdmFsdWUgJiYgaXNMaXZlTm9kZSh2YWx1ZSkgJiYgdmFsdWUuX3NldFBhcmVudExpbmsodGhpcywga2V5KTtcbiAgICB9XG4gICAgdGhpcy5fbWFwID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhvYmopKTtcbiAgfVxuICBfc2VyaWFsaXplKHBhcmVudElkLCBwYXJlbnRLZXksIGRvYykge1xuICAgIGlmIChudWxsID09IHRoaXMuX2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNlcmlhbGl6ZSBpdGVtIGlzIG5vdCBhdHRhY2hlZFwiKTtcbiAgICBjb25zdCBvcElkID0gbnVsbCA9PSBkb2MgPyB2b2lkIDAgOiBkb2MuZ2VuZXJhdGVPcElkKCksXG4gICAgICBvcHMgPSBbXSxcbiAgICAgIG9wID1cbiAgICAgICAgdm9pZCAwICE9PSBwYXJlbnRJZCAmJiB2b2lkIDAgIT09IHBhcmVudEtleVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICB0eXBlOiBPcENvZGUuQ1JFQVRFX09CSkVDVCxcbiAgICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgICBvcElkOiBvcElkLFxuICAgICAgICAgICAgICBwYXJlbnRJZDogcGFyZW50SWQsXG4gICAgICAgICAgICAgIHBhcmVudEtleTogcGFyZW50S2V5LFxuICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA6IHsgdHlwZTogT3BDb2RlLkNSRUFURV9PQkpFQ1QsIGlkOiB0aGlzLl9pZCwgb3BJZDogb3BJZCwgZGF0YToge30gfTtcbiAgICBvcHMucHVzaChvcCk7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fbWFwKVxuICAgICAgaXNMaXZlTm9kZSh2YWx1ZSlcbiAgICAgICAgPyBvcHMucHVzaCguLi52YWx1ZS5fc2VyaWFsaXplKHRoaXMuX2lkLCBrZXksIGRvYykpXG4gICAgICAgIDogKG9wLmRhdGFba2V5XSA9IHZhbHVlKTtcbiAgICByZXR1cm4gb3BzO1xuICB9XG4gIHN0YXRpYyBfZGVzZXJpYWxpemUoW2lkLCBpdGVtXSwgcGFyZW50VG9DaGlsZHJlbiwgZG9jKSB7XG4gICAgY29uc3QgbGl2ZU9iaiA9IG5ldyBMaXZlT2JqZWN0KGl0ZW0uZGF0YSk7XG4gICAgcmV0dXJuIChcbiAgICAgIGxpdmVPYmouX2F0dGFjaChpZCwgZG9jKSxcbiAgICAgIHRoaXMuX2Rlc2VyaWFsaXplQ2hpbGRyZW4obGl2ZU9iaiwgcGFyZW50VG9DaGlsZHJlbiwgZG9jKVxuICAgICk7XG4gIH1cbiAgc3RhdGljIF9kZXNlcmlhbGl6ZUNoaWxkcmVuKGxpdmVPYmosIHBhcmVudFRvQ2hpbGRyZW4sIGRvYykge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gcGFyZW50VG9DaGlsZHJlbi5nZXQobm4obGl2ZU9iai5faWQpKTtcbiAgICBpZiAobnVsbCA9PSBjaGlsZHJlbikgcmV0dXJuIGxpdmVPYmo7XG4gICAgZm9yIChjb25zdCBbaWQsIGNyZHRdIG9mIGNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IGRlc2VyaWFsaXplVG9Mc29uKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgICBpc0xpdmVTdHJ1Y3R1cmUoY2hpbGQpICYmIGNoaWxkLl9zZXRQYXJlbnRMaW5rKGxpdmVPYmosIGNyZHQucGFyZW50S2V5KSxcbiAgICAgICAgbGl2ZU9iai5fbWFwLnNldChjcmR0LnBhcmVudEtleSwgY2hpbGQpO1xuICAgIH1cbiAgICByZXR1cm4gbGl2ZU9iajtcbiAgfVxuICBfYXR0YWNoKGlkLCBkb2MpIHtcbiAgICBzdXBlci5fYXR0YWNoKGlkLCBkb2MpO1xuICAgIGZvciAoY29uc3QgW19rZXksIHZhbHVlXSBvZiB0aGlzLl9tYXApXG4gICAgICBpc0xpdmVOb2RlKHZhbHVlKSAmJiB2YWx1ZS5fYXR0YWNoKGRvYy5nZW5lcmF0ZUlkKCksIGRvYyk7XG4gIH1cbiAgX2F0dGFjaENoaWxkKG9wLCBzb3VyY2UpIHtcbiAgICBpZiAobnVsbCA9PSB0aGlzLl9kb2MpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBhdHRhY2ggY2hpbGQgaWYgZG9jIGlzIG5vdCBwcmVzZW50XCIpO1xuICAgIGNvbnN0IHsgaWQ6IGlkLCBvcElkOiBvcElkLCBwYXJlbnRLZXk6IGtleSB9ID0gb3AsXG4gICAgICBjaGlsZCA9IGNyZWF0aW9uT3BUb0xzb24ob3ApO1xuICAgIGlmICh2b2lkIDAgIT09IHRoaXMuX2RvYy5nZXRJdGVtKGlkKSlcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUuZ2V0KGtleSkgPT09IG9wSWQgJiZcbiAgICAgICAgICB0aGlzLl9wcm9wVG9MYXN0VXBkYXRlLmRlbGV0ZShrZXkpLFxuICAgICAgICB7IG1vZGlmaWVkOiAhMSB9XG4gICAgICApO1xuICAgIGlmIChzb3VyY2UgPT09IE9wU291cmNlLlVORE9SRURPX1JFQ09OTkVDVClcbiAgICAgIHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUuc2V0KGtleSwgbm4ob3BJZCkpO1xuICAgIGVsc2UgaWYgKHZvaWQgMCAhPT0gdGhpcy5fcHJvcFRvTGFzdFVwZGF0ZS5nZXQoa2V5KSlcbiAgICAgIHJldHVybiB0aGlzLl9wcm9wVG9MYXN0VXBkYXRlLmdldChrZXkpID09PSBvcElkXG4gICAgICAgID8gKHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUuZGVsZXRlKGtleSksIHsgbW9kaWZpZWQ6ICExIH0pXG4gICAgICAgIDogeyBtb2RpZmllZDogITEgfTtcbiAgICBjb25zdCB0aGlzSWQgPSBubih0aGlzLl9pZCksXG4gICAgICBwcmV2aW91c1ZhbHVlID0gdGhpcy5fbWFwLmdldChrZXkpO1xuICAgIGxldCByZXZlcnNlO1xuICAgIHJldHVybiAoXG4gICAgICBpc0xpdmVOb2RlKHByZXZpb3VzVmFsdWUpXG4gICAgICAgID8gKChyZXZlcnNlID0gcHJldmlvdXNWYWx1ZS5fc2VyaWFsaXplKHRoaXNJZCwga2V5KSksXG4gICAgICAgICAgcHJldmlvdXNWYWx1ZS5fZGV0YWNoKCkpXG4gICAgICAgIDogKHJldmVyc2UgPVxuICAgICAgICAgICAgdm9pZCAwID09PSBwcmV2aW91c1ZhbHVlXG4gICAgICAgICAgICAgID8gW3sgdHlwZTogT3BDb2RlLkRFTEVURV9PQkpFQ1RfS0VZLCBpZDogdGhpc0lkLCBrZXk6IGtleSB9XVxuICAgICAgICAgICAgICA6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogT3BDb2RlLlVQREFURV9PQkpFQ1QsXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0aGlzSWQsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgW2tleV06IHByZXZpb3VzVmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSksXG4gICAgICB0aGlzLl9tYXAuc2V0KGtleSwgY2hpbGQpLFxuICAgICAgaXNMaXZlU3RydWN0dXJlKGNoaWxkKSAmJlxuICAgICAgICAoY2hpbGQuX3NldFBhcmVudExpbmsodGhpcywga2V5KSwgY2hpbGQuX2F0dGFjaChpZCwgdGhpcy5fZG9jKSksXG4gICAgICB7XG4gICAgICAgIHJldmVyc2U6IHJldmVyc2UsXG4gICAgICAgIG1vZGlmaWVkOiB7XG4gICAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgICB0eXBlOiBcIkxpdmVPYmplY3RcIixcbiAgICAgICAgICB1cGRhdGVzOiB7IFtrZXldOiB7IHR5cGU6IFwidXBkYXRlXCIgfSB9LFxuICAgICAgICB9LFxuICAgICAgfVxuICAgICk7XG4gIH1cbiAgX2RldGFjaENoaWxkKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBjb25zdCBpZCA9IG5uKHRoaXMuX2lkKSxcbiAgICAgICAgcGFyZW50S2V5ID0gbm4oY2hpbGQuX3BhcmVudEtleSksXG4gICAgICAgIHJldmVyc2UgPSBjaGlsZC5fc2VyaWFsaXplKGlkLCBwYXJlbnRLZXksIHRoaXMuX2RvYyk7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLl9tYXApXG4gICAgICAgIHZhbHVlID09PSBjaGlsZCAmJiB0aGlzLl9tYXAuZGVsZXRlKGtleSk7XG4gICAgICBjaGlsZC5fZGV0YWNoKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtb2RpZmllZDoge1xuICAgICAgICAgIG5vZGU6IHRoaXMsXG4gICAgICAgICAgdHlwZTogXCJMaXZlT2JqZWN0XCIsXG4gICAgICAgICAgdXBkYXRlczogeyBbcGFyZW50S2V5XTogeyB0eXBlOiBcImRlbGV0ZVwiIH0gfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmV2ZXJzZTogcmV2ZXJzZSxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IG1vZGlmaWVkOiAhMSB9O1xuICB9XG4gIF9kZXRhY2goKSB7XG4gICAgc3VwZXIuX2RldGFjaCgpO1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5fbWFwLnZhbHVlcygpKVxuICAgICAgaXNMaXZlTm9kZSh2YWx1ZSkgJiYgdmFsdWUuX2RldGFjaCgpO1xuICB9XG4gIF9hcHBseShvcCwgaXNMb2NhbCkge1xuICAgIHJldHVybiBvcC50eXBlID09PSBPcENvZGUuVVBEQVRFX09CSkVDVFxuICAgICAgPyB0aGlzLl9hcHBseVVwZGF0ZShvcCwgaXNMb2NhbClcbiAgICAgIDogb3AudHlwZSA9PT0gT3BDb2RlLkRFTEVURV9PQkpFQ1RfS0VZXG4gICAgICA/IHRoaXMuX2FwcGx5RGVsZXRlT2JqZWN0S2V5KG9wKVxuICAgICAgOiBzdXBlci5fYXBwbHkob3AsIGlzTG9jYWwpO1xuICB9XG4gIF90b1NlcmlhbGl6ZWRDcmR0KCkge1xuICAgIGNvbnN0IGRhdGEgPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLl9tYXApXG4gICAgICBpc0xpdmVOb2RlKHZhbHVlKSB8fCAoZGF0YVtrZXldID0gdmFsdWUpO1xuICAgIHJldHVybiBcIkhhc1BhcmVudFwiID09PSB0aGlzLnBhcmVudC50eXBlICYmIHRoaXMucGFyZW50Lm5vZGUuX2lkXG4gICAgICA/IHtcbiAgICAgICAgICB0eXBlOiBDcmR0VHlwZS5PQkpFQ1QsXG4gICAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50Lm5vZGUuX2lkLFxuICAgICAgICAgIHBhcmVudEtleTogdGhpcy5wYXJlbnQua2V5LFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIH1cbiAgICAgIDogeyB0eXBlOiBDcmR0VHlwZS5PQkpFQ1QsIGRhdGE6IGRhdGEgfTtcbiAgfVxuICBfYXBwbHlVcGRhdGUob3AsIGlzTG9jYWwpIHtcbiAgICBsZXQgaXNNb2RpZmllZCA9ICExO1xuICAgIGNvbnN0IGlkID0gbm4odGhpcy5faWQpLFxuICAgICAgcmV2ZXJzZSA9IFtdLFxuICAgICAgcmV2ZXJzZVVwZGF0ZSA9IHsgdHlwZTogT3BDb2RlLlVQREFURV9PQkpFQ1QsIGlkOiBpZCwgZGF0YToge30gfTtcbiAgICByZXZlcnNlLnB1c2gocmV2ZXJzZVVwZGF0ZSk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3AuZGF0YSkge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGtleSk7XG4gICAgICBpc0xpdmVOb2RlKG9sZFZhbHVlKVxuICAgICAgICA/IChyZXZlcnNlLnB1c2goLi4ub2xkVmFsdWUuX3NlcmlhbGl6ZShpZCwga2V5KSksIG9sZFZhbHVlLl9kZXRhY2goKSlcbiAgICAgICAgOiB2b2lkIDAgIT09IG9sZFZhbHVlXG4gICAgICAgID8gKHJldmVyc2VVcGRhdGUuZGF0YVtrZXldID0gb2xkVmFsdWUpXG4gICAgICAgIDogdm9pZCAwID09PSBvbGRWYWx1ZSAmJlxuICAgICAgICAgIHJldmVyc2UucHVzaCh7IHR5cGU6IE9wQ29kZS5ERUxFVEVfT0JKRUNUX0tFWSwgaWQ6IGlkLCBrZXk6IGtleSB9KTtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlRGVsdGEgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcC5kYXRhKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG9wLmRhdGFba2V5XTtcbiAgICAgIGlmICh2b2lkIDAgPT09IHZhbHVlKSBjb250aW51ZTtcbiAgICAgIGlmIChpc0xvY2FsKSB0aGlzLl9wcm9wVG9MYXN0VXBkYXRlLnNldChrZXksIG5uKG9wLm9wSWQpKTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9wcm9wVG9MYXN0VXBkYXRlLmdldChrZXkpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUuZ2V0KGtleSkgPT09IG9wLm9wSWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb3BUb0xhc3RVcGRhdGUuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaXNNb2RpZmllZCA9ICEwO1xuICAgICAgfVxuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGtleSk7XG4gICAgICBpc0xpdmVOb2RlKG9sZFZhbHVlKSAmJiBvbGRWYWx1ZS5fZGV0YWNoKCksXG4gICAgICAgIChpc01vZGlmaWVkID0gITApLFxuICAgICAgICAodXBkYXRlRGVsdGFba2V5XSA9IHsgdHlwZTogXCJ1cGRhdGVcIiB9KSxcbiAgICAgICAgdGhpcy5fbWFwLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDAgIT09IE9iamVjdC5rZXlzKHJldmVyc2VVcGRhdGUuZGF0YSkubGVuZ3RoICYmXG4gICAgICAgIHJldmVyc2UudW5zaGlmdChyZXZlcnNlVXBkYXRlKSxcbiAgICAgIGlzTW9kaWZpZWRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBtb2RpZmllZDogeyBub2RlOiB0aGlzLCB0eXBlOiBcIkxpdmVPYmplY3RcIiwgdXBkYXRlczogdXBkYXRlRGVsdGEgfSxcbiAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXG4gICAgICAgICAgfVxuICAgICAgICA6IHsgbW9kaWZpZWQ6ICExIH1cbiAgICApO1xuICB9XG4gIF9hcHBseURlbGV0ZU9iamVjdEtleShvcCkge1xuICAgIGNvbnN0IGtleSA9IG9wLmtleTtcbiAgICBpZiAoITEgPT09IHRoaXMuX21hcC5oYXMoa2V5KSkgcmV0dXJuIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5fcHJvcFRvTGFzdFVwZGF0ZS5nZXQoa2V5KSkgcmV0dXJuIHsgbW9kaWZpZWQ6ICExIH07XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGtleSksXG4gICAgICBpZCA9IG5uKHRoaXMuX2lkKTtcbiAgICBsZXQgcmV2ZXJzZSA9IFtdO1xuICAgIHJldHVybiAoXG4gICAgICBpc0xpdmVOb2RlKG9sZFZhbHVlKVxuICAgICAgICA/ICgocmV2ZXJzZSA9IG9sZFZhbHVlLl9zZXJpYWxpemUoaWQsIG9wLmtleSkpLCBvbGRWYWx1ZS5fZGV0YWNoKCkpXG4gICAgICAgIDogdm9pZCAwICE9PSBvbGRWYWx1ZSAmJlxuICAgICAgICAgIChyZXZlcnNlID0gW1xuICAgICAgICAgICAgeyB0eXBlOiBPcENvZGUuVVBEQVRFX09CSkVDVCwgaWQ6IGlkLCBkYXRhOiB7IFtrZXldOiBvbGRWYWx1ZSB9IH0sXG4gICAgICAgICAgXSksXG4gICAgICB0aGlzLl9tYXAuZGVsZXRlKGtleSksXG4gICAgICB7XG4gICAgICAgIG1vZGlmaWVkOiB7XG4gICAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgICB0eXBlOiBcIkxpdmVPYmplY3RcIixcbiAgICAgICAgICB1cGRhdGVzOiB7IFtvcC5rZXldOiB7IHR5cGU6IFwiZGVsZXRlXCIgfSB9LFxuICAgICAgICB9LFxuICAgICAgICByZXZlcnNlOiByZXZlcnNlLFxuICAgICAgfVxuICAgICk7XG4gIH1cbiAgdG9PYmplY3QoKSB7XG4gICAgcmV0dXJuIChmdW5jdGlvbiAoaXRlcmFibGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIGl0ZXJhYmxlKSBvYmpba2V5XSA9IHZhbDtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSkodGhpcy5fbWFwKTtcbiAgfVxuICBzZXQoa2V5LCB2YWx1ZSkge1xuICAgIHRoaXMudXBkYXRlKHsgW2tleV06IHZhbHVlIH0pO1xuICB9XG4gIGdldChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFwLmdldChrZXkpO1xuICB9XG4gIGRlbGV0ZShrZXkpIHtcbiAgICBjb25zdCBrZXlBc1N0cmluZyA9IGtleSxcbiAgICAgIG9sZFZhbHVlID0gdGhpcy5fbWFwLmdldChrZXlBc1N0cmluZyk7XG4gICAgaWYgKHZvaWQgMCA9PT0gb2xkVmFsdWUpIHJldHVybjtcbiAgICBpZiAobnVsbCA9PSB0aGlzLl9kb2MgfHwgbnVsbCA9PSB0aGlzLl9pZClcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGlzTGl2ZU5vZGUob2xkVmFsdWUpICYmIG9sZFZhbHVlLl9kZXRhY2goKSxcbiAgICAgICAgdm9pZCB0aGlzLl9tYXAuZGVsZXRlKGtleUFzU3RyaW5nKVxuICAgICAgKTtcbiAgICBsZXQgcmV2ZXJzZTtcbiAgICBpc0xpdmVOb2RlKG9sZFZhbHVlKVxuICAgICAgPyAob2xkVmFsdWUuX2RldGFjaCgpLFxuICAgICAgICAocmV2ZXJzZSA9IG9sZFZhbHVlLl9zZXJpYWxpemUodGhpcy5faWQsIGtleUFzU3RyaW5nKSkpXG4gICAgICA6IChyZXZlcnNlID0gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IE9wQ29kZS5VUERBVEVfT0JKRUNULFxuICAgICAgICAgICAgZGF0YTogeyBba2V5QXNTdHJpbmddOiBvbGRWYWx1ZSB9LFxuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pLFxuICAgICAgdGhpcy5fbWFwLmRlbGV0ZShrZXlBc1N0cmluZyk7XG4gICAgY29uc3Qgc3RvcmFnZVVwZGF0ZXMgPSBuZXcgTWFwKCk7XG4gICAgc3RvcmFnZVVwZGF0ZXMuc2V0KHRoaXMuX2lkLCB7XG4gICAgICBub2RlOiB0aGlzLFxuICAgICAgdHlwZTogXCJMaXZlT2JqZWN0XCIsXG4gICAgICB1cGRhdGVzOiB7IFtrZXldOiB7IHR5cGU6IFwiZGVsZXRlXCIgfSB9LFxuICAgIH0pLFxuICAgICAgdGhpcy5fZG9jLmRpc3BhdGNoKFxuICAgICAgICBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogT3BDb2RlLkRFTEVURV9PQkpFQ1RfS0VZLFxuICAgICAgICAgICAga2V5OiBrZXlBc1N0cmluZyxcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgICAgICAgIG9wSWQ6IHRoaXMuX2RvYy5nZW5lcmF0ZU9wSWQoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICByZXZlcnNlLFxuICAgICAgICBzdG9yYWdlVXBkYXRlc1xuICAgICAgKTtcbiAgfVxuICB1cGRhdGUob3ZlcnJpZGVzKSB7XG4gICAgaWYgKG51bGwgPT0gdGhpcy5fZG9jIHx8IG51bGwgPT0gdGhpcy5faWQpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIG92ZXJyaWRlcykge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IG92ZXJyaWRlc1trZXldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuZXdWYWx1ZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fbWFwLmdldChrZXkpO1xuICAgICAgICBpc0xpdmVOb2RlKG9sZFZhbHVlKSAmJiBvbGRWYWx1ZS5fZGV0YWNoKCksXG4gICAgICAgICAgaXNMaXZlTm9kZShuZXdWYWx1ZSkgJiYgbmV3VmFsdWUuX3NldFBhcmVudExpbmsodGhpcywga2V5KSxcbiAgICAgICAgICB0aGlzLl9tYXAuc2V0KGtleSwgbmV3VmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvcHMgPSBbXSxcbiAgICAgIHJldmVyc2VPcHMgPSBbXSxcbiAgICAgIG9wSWQgPSB0aGlzLl9kb2MuZ2VuZXJhdGVPcElkKCksXG4gICAgICB1cGRhdGVkUHJvcHMgPSB7fSxcbiAgICAgIHJldmVyc2VVcGRhdGVPcCA9IHsgaWQ6IHRoaXMuX2lkLCB0eXBlOiBPcENvZGUuVVBEQVRFX09CSkVDVCwgZGF0YToge30gfSxcbiAgICAgIHVwZGF0ZURlbHRhID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3ZlcnJpZGVzKSB7XG4gICAgICBjb25zdCBuZXdWYWx1ZSA9IG92ZXJyaWRlc1trZXldO1xuICAgICAgaWYgKHZvaWQgMCA9PT0gbmV3VmFsdWUpIGNvbnRpbnVlO1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl9tYXAuZ2V0KGtleSk7XG4gICAgICBpZiAoXG4gICAgICAgIChpc0xpdmVOb2RlKG9sZFZhbHVlKVxuICAgICAgICAgID8gKHJldmVyc2VPcHMucHVzaCguLi5vbGRWYWx1ZS5fc2VyaWFsaXplKHRoaXMuX2lkLCBrZXkpKSxcbiAgICAgICAgICAgIG9sZFZhbHVlLl9kZXRhY2goKSlcbiAgICAgICAgICA6IHZvaWQgMCA9PT0gb2xkVmFsdWVcbiAgICAgICAgICA/IHJldmVyc2VPcHMucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IE9wQ29kZS5ERUxFVEVfT0JKRUNUX0tFWSxcbiAgICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiAocmV2ZXJzZVVwZGF0ZU9wLmRhdGFba2V5XSA9IG9sZFZhbHVlKSxcbiAgICAgICAgaXNMaXZlTm9kZShuZXdWYWx1ZSkpXG4gICAgICApIHtcbiAgICAgICAgbmV3VmFsdWUuX3NldFBhcmVudExpbmsodGhpcywga2V5KSxcbiAgICAgICAgICBuZXdWYWx1ZS5fYXR0YWNoKHRoaXMuX2RvYy5nZW5lcmF0ZUlkKCksIHRoaXMuX2RvYyk7XG4gICAgICAgIGNvbnN0IG5ld0F0dGFjaENoaWxkT3BzID0gbmV3VmFsdWUuX3NlcmlhbGl6ZSh0aGlzLl9pZCwga2V5LCB0aGlzLl9kb2MpLFxuICAgICAgICAgIGNyZWF0ZUNyZHRPcCA9IG5ld0F0dGFjaENoaWxkT3BzLmZpbmQoXG4gICAgICAgICAgICAob3ApID0+IG9wLnBhcmVudElkID09PSB0aGlzLl9pZFxuICAgICAgICAgICk7XG4gICAgICAgIGNyZWF0ZUNyZHRPcCAmJiB0aGlzLl9wcm9wVG9MYXN0VXBkYXRlLnNldChrZXksIG5uKGNyZWF0ZUNyZHRPcC5vcElkKSksXG4gICAgICAgICAgb3BzLnB1c2goLi4ubmV3QXR0YWNoQ2hpbGRPcHMpO1xuICAgICAgfSBlbHNlXG4gICAgICAgICh1cGRhdGVkUHJvcHNba2V5XSA9IG5ld1ZhbHVlKSwgdGhpcy5fcHJvcFRvTGFzdFVwZGF0ZS5zZXQoa2V5LCBvcElkKTtcbiAgICAgIHRoaXMuX21hcC5zZXQoa2V5LCBuZXdWYWx1ZSksICh1cGRhdGVEZWx0YVtrZXldID0geyB0eXBlOiBcInVwZGF0ZVwiIH0pO1xuICAgIH1cbiAgICAwICE9PSBPYmplY3Qua2V5cyhyZXZlcnNlVXBkYXRlT3AuZGF0YSkubGVuZ3RoICYmXG4gICAgICByZXZlcnNlT3BzLnVuc2hpZnQocmV2ZXJzZVVwZGF0ZU9wKSxcbiAgICAgIDAgIT09IE9iamVjdC5rZXlzKHVwZGF0ZWRQcm9wcykubGVuZ3RoICYmXG4gICAgICAgIG9wcy51bnNoaWZ0KHtcbiAgICAgICAgICBvcElkOiBvcElkLFxuICAgICAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgICAgICB0eXBlOiBPcENvZGUuVVBEQVRFX09CSkVDVCxcbiAgICAgICAgICBkYXRhOiB1cGRhdGVkUHJvcHMsXG4gICAgICAgIH0pO1xuICAgIGNvbnN0IHN0b3JhZ2VVcGRhdGVzID0gbmV3IE1hcCgpO1xuICAgIHN0b3JhZ2VVcGRhdGVzLnNldCh0aGlzLl9pZCwge1xuICAgICAgbm9kZTogdGhpcyxcbiAgICAgIHR5cGU6IFwiTGl2ZU9iamVjdFwiLFxuICAgICAgdXBkYXRlczogdXBkYXRlRGVsdGEsXG4gICAgfSksXG4gICAgICB0aGlzLl9kb2MuZGlzcGF0Y2gob3BzLCByZXZlcnNlT3BzLCBzdG9yYWdlVXBkYXRlcyk7XG4gIH1cbn1cbmZ1bmN0aW9uIHJlbW92ZShhcnJheSwgaXRlbSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgIGlmIChhcnJheVtpXSA9PT0gaXRlbSkge1xuICAgICAgYXJyYXkuc3BsaWNlKGksIDEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcGFjdChpdGVtcykge1xuICByZXR1cm4gaXRlbXMuZmlsdGVyKChpdGVtKSA9PiBudWxsICE9IGl0ZW0pO1xufVxuZnVuY3Rpb24gY3JlYXRpb25PcFRvTGl2ZU5vZGUob3ApIHtcbiAgcmV0dXJuIGxzb25Ub0xpdmVOb2RlKGNyZWF0aW9uT3BUb0xzb24ob3ApKTtcbn1cbmZ1bmN0aW9uIGNyZWF0aW9uT3BUb0xzb24ob3ApIHtcbiAgc3dpdGNoIChvcC50eXBlKSB7XG4gICAgY2FzZSBPcENvZGUuQ1JFQVRFX1JFR0lTVEVSOlxuICAgICAgcmV0dXJuIG9wLmRhdGE7XG4gICAgY2FzZSBPcENvZGUuQ1JFQVRFX09CSkVDVDpcbiAgICAgIHJldHVybiBuZXcgTGl2ZU9iamVjdChvcC5kYXRhKTtcbiAgICBjYXNlIE9wQ29kZS5DUkVBVEVfTUFQOlxuICAgICAgcmV0dXJuIG5ldyBMaXZlTWFwKCk7XG4gICAgY2FzZSBPcENvZGUuQ1JFQVRFX0xJU1Q6XG4gICAgICByZXR1cm4gbmV3IExpdmVMaXN0KCk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBhc3NlcnROZXZlcigwLCBcIlVua25vd24gY3JlYXRpb24gT3BcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIGlzU2FtZU5vZGVPckNoaWxkT2Yobm9kZSwgcGFyZW50KSB7XG4gIHJldHVybiAoXG4gICAgbm9kZSA9PT0gcGFyZW50IHx8XG4gICAgKFwiSGFzUGFyZW50XCIgPT09IG5vZGUucGFyZW50LnR5cGUgJiZcbiAgICAgIGlzU2FtZU5vZGVPckNoaWxkT2Yobm9kZS5wYXJlbnQubm9kZSwgcGFyZW50KSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGRlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYykge1xuICBzd2l0Y2ggKGNyZHQudHlwZSkge1xuICAgIGNhc2UgQ3JkdFR5cGUuT0JKRUNUOlxuICAgICAgcmV0dXJuIExpdmVPYmplY3QuX2Rlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgY2FzZSBDcmR0VHlwZS5MSVNUOlxuICAgICAgcmV0dXJuIExpdmVMaXN0Ll9kZXNlcmlhbGl6ZShbaWQsIGNyZHRdLCBwYXJlbnRUb0NoaWxkcmVuLCBkb2MpO1xuICAgIGNhc2UgQ3JkdFR5cGUuTUFQOlxuICAgICAgcmV0dXJuIExpdmVNYXAuX2Rlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgY2FzZSBDcmR0VHlwZS5SRUdJU1RFUjpcbiAgICAgIHJldHVybiBMaXZlUmVnaXN0ZXIuX2Rlc2VyaWFsaXplKFtpZCwgY3JkdF0sIHBhcmVudFRvQ2hpbGRyZW4sIGRvYyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgQ1JEVCB0eXBlXCIpO1xuICB9XG59XG5mdW5jdGlvbiBkZXNlcmlhbGl6ZVRvTHNvbihbaWQsIGNyZHRdLCBwYXJlbnRUb0NoaWxkcmVuLCBkb2MpIHtcbiAgc3dpdGNoIChjcmR0LnR5cGUpIHtcbiAgICBjYXNlIENyZHRUeXBlLk9CSkVDVDpcbiAgICAgIHJldHVybiBMaXZlT2JqZWN0Ll9kZXNlcmlhbGl6ZShbaWQsIGNyZHRdLCBwYXJlbnRUb0NoaWxkcmVuLCBkb2MpO1xuICAgIGNhc2UgQ3JkdFR5cGUuTElTVDpcbiAgICAgIHJldHVybiBMaXZlTGlzdC5fZGVzZXJpYWxpemUoW2lkLCBjcmR0XSwgcGFyZW50VG9DaGlsZHJlbiwgZG9jKTtcbiAgICBjYXNlIENyZHRUeXBlLk1BUDpcbiAgICAgIHJldHVybiBMaXZlTWFwLl9kZXNlcmlhbGl6ZShbaWQsIGNyZHRdLCBwYXJlbnRUb0NoaWxkcmVuLCBkb2MpO1xuICAgIGNhc2UgQ3JkdFR5cGUuUkVHSVNURVI6XG4gICAgICByZXR1cm4gY3JkdC5kYXRhO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIENSRFQgdHlwZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gaXNMaXZlU3RydWN0dXJlKHZhbHVlKSB7XG4gIHJldHVybiAoXG4gICAgaXNMaXZlTGlzdCh2YWx1ZSkgfHxcbiAgICAoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBMaXZlTWFwO1xuICAgIH0pKHZhbHVlKSB8fFxuICAgIGlzTGl2ZU9iamVjdCh2YWx1ZSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzTGl2ZU5vZGUodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICBpc0xpdmVTdHJ1Y3R1cmUodmFsdWUpIHx8XG4gICAgKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTGl2ZVJlZ2lzdGVyO1xuICAgIH0pKHZhbHVlKVxuICApO1xufVxuZnVuY3Rpb24gaXNMaXZlTGlzdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBMaXZlTGlzdDtcbn1cbmZ1bmN0aW9uIGlzTGl2ZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBMaXZlT2JqZWN0O1xufVxuZnVuY3Rpb24gbGl2ZU5vZGVUb0xzb24ob2JqKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiBMaXZlUmVnaXN0ZXJcbiAgICA/IG9iai5kYXRhXG4gICAgOiBvYmogaW5zdGFuY2VvZiBMaXZlTGlzdCB8fFxuICAgICAgb2JqIGluc3RhbmNlb2YgTGl2ZU1hcCB8fFxuICAgICAgb2JqIGluc3RhbmNlb2YgTGl2ZU9iamVjdFxuICAgID8gb2JqXG4gICAgOiBhc3NlcnROZXZlcigwLCBcIlVua25vd24gQWJzdHJhY3RDcmR0XCIpO1xufVxuZnVuY3Rpb24gbHNvblRvTGl2ZU5vZGUodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTGl2ZU9iamVjdCB8fFxuICAgIHZhbHVlIGluc3RhbmNlb2YgTGl2ZU1hcCB8fFxuICAgIHZhbHVlIGluc3RhbmNlb2YgTGl2ZUxpc3RcbiAgICA/IHZhbHVlXG4gICAgOiBuZXcgTGl2ZVJlZ2lzdGVyKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGdldFRyZWVzRGlmZk9wZXJhdGlvbnMoY3VycmVudEl0ZW1zLCBuZXdJdGVtcykge1xuICBjb25zdCBvcHMgPSBbXTtcbiAgcmV0dXJuIChcbiAgICBjdXJyZW50SXRlbXMuZm9yRWFjaCgoXywgaWQpID0+IHtcbiAgICAgIG5ld0l0ZW1zLmdldChpZCkgfHwgb3BzLnB1c2goeyB0eXBlOiBPcENvZGUuREVMRVRFX0NSRFQsIGlkOiBpZCB9KTtcbiAgICB9KSxcbiAgICBuZXdJdGVtcy5mb3JFYWNoKChjcmR0LCBpZCkgPT4ge1xuICAgICAgY29uc3QgY3VycmVudENyZHQgPSBjdXJyZW50SXRlbXMuZ2V0KGlkKTtcbiAgICAgIGlmIChjdXJyZW50Q3JkdClcbiAgICAgICAgY3JkdC50eXBlID09PSBDcmR0VHlwZS5PQkpFQ1QgJiZcbiAgICAgICAgICAoKGN1cnJlbnRDcmR0LnR5cGUgPT09IENyZHRUeXBlLk9CSkVDVCAmJlxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoY3JkdC5kYXRhKSA9PT0gSlNPTi5zdHJpbmdpZnkoY3VycmVudENyZHQuZGF0YSkpIHx8XG4gICAgICAgICAgICBvcHMucHVzaCh7IHR5cGU6IE9wQ29kZS5VUERBVEVfT0JKRUNULCBpZDogaWQsIGRhdGE6IGNyZHQuZGF0YSB9KSksXG4gICAgICAgICAgY3JkdC5wYXJlbnRLZXkgIT09IGN1cnJlbnRDcmR0LnBhcmVudEtleSAmJlxuICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBPcENvZGUuU0VUX1BBUkVOVF9LRVksXG4gICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgcGFyZW50S2V5OiBubihjcmR0LnBhcmVudEtleSwgXCJQYXJlbnQga2V5IG11c3Qgbm90IGJlIG1pc3NpbmdcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgIGVsc2VcbiAgICAgICAgc3dpdGNoIChjcmR0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIENyZHRUeXBlLlJFR0lTVEVSOlxuICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICB0eXBlOiBPcENvZGUuQ1JFQVRFX1JFR0lTVEVSLFxuICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBjcmR0LnBhcmVudElkLFxuICAgICAgICAgICAgICBwYXJlbnRLZXk6IGNyZHQucGFyZW50S2V5LFxuICAgICAgICAgICAgICBkYXRhOiBjcmR0LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgQ3JkdFR5cGUuTElTVDpcbiAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgdHlwZTogT3BDb2RlLkNSRUFURV9MSVNULFxuICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBjcmR0LnBhcmVudElkLFxuICAgICAgICAgICAgICBwYXJlbnRLZXk6IGNyZHQucGFyZW50S2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIENyZHRUeXBlLk9CSkVDVDpcbiAgICAgICAgICAgIG9wcy5wdXNoKFxuICAgICAgICAgICAgICBjcmR0LnBhcmVudElkXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IE9wQ29kZS5DUkVBVEVfT0JKRUNULFxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudElkOiBjcmR0LnBhcmVudElkLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRLZXk6IGNyZHQucGFyZW50S2V5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjcmR0LmRhdGEsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7IHR5cGU6IE9wQ29kZS5DUkVBVEVfT0JKRUNULCBpZDogaWQsIGRhdGE6IGNyZHQuZGF0YSB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBDcmR0VHlwZS5NQVA6XG4gICAgICAgICAgICBvcHMucHVzaCh7XG4gICAgICAgICAgICAgIHR5cGU6IE9wQ29kZS5DUkVBVEVfTUFQLFxuICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgIHBhcmVudElkOiBjcmR0LnBhcmVudElkLFxuICAgICAgICAgICAgICBwYXJlbnRLZXk6IGNyZHQucGFyZW50S2V5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KSxcbiAgICBvcHNcbiAgKTtcbn1cbmZ1bmN0aW9uIG1lcmdlU3RvcmFnZVVwZGF0ZXMoZmlyc3QsIHNlY29uZCkge1xuICByZXR1cm4gZmlyc3RcbiAgICA/IFwiTGl2ZU9iamVjdFwiID09PSBmaXJzdC50eXBlICYmIFwiTGl2ZU9iamVjdFwiID09PSBzZWNvbmQudHlwZVxuICAgICAgPyAoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVzID0gZmlyc3QudXBkYXRlcztcbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKHNlY29uZC51cGRhdGVzKSlcbiAgICAgICAgICAgIHVwZGF0ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNlY29uZCksIHsgdXBkYXRlczogdXBkYXRlcyB9KTtcbiAgICAgICAgfSkoZmlyc3QsIHNlY29uZClcbiAgICAgIDogXCJMaXZlTWFwXCIgPT09IGZpcnN0LnR5cGUgJiYgXCJMaXZlTWFwXCIgPT09IHNlY29uZC50eXBlXG4gICAgICA/IChmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBmaXJzdC51cGRhdGVzO1xuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMoc2Vjb25kLnVwZGF0ZXMpKVxuICAgICAgICAgICAgdXBkYXRlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2Vjb25kKSwgeyB1cGRhdGVzOiB1cGRhdGVzIH0pO1xuICAgICAgICB9KShmaXJzdCwgc2Vjb25kKVxuICAgICAgOiBcIkxpdmVMaXN0XCIgPT09IGZpcnN0LnR5cGUgJiYgXCJMaXZlTGlzdFwiID09PSBzZWNvbmQudHlwZVxuICAgICAgPyAoZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVzID0gZmlyc3QudXBkYXRlcztcbiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzZWNvbmQpLCB7XG4gICAgICAgICAgICB1cGRhdGVzOiB1cGRhdGVzLmNvbmNhdChzZWNvbmQudXBkYXRlcyksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKGZpcnN0LCBzZWNvbmQpXG4gICAgICA6IHNlY29uZFxuICAgIDogc2Vjb25kO1xufVxuZnVuY3Rpb24gaXNQbGFpbih2YWx1ZSkge1xuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKFxuICAgIG51bGwgPT0gdmFsdWUgfHxcbiAgICBcInN0cmluZ1wiID09PSB0eXBlIHx8XG4gICAgXCJib29sZWFuXCIgPT09IHR5cGUgfHxcbiAgICBcIm51bWJlclwiID09PSB0eXBlIHx8XG4gICAgQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHxcbiAgICBpc1BsYWluT2JqZWN0KHZhbHVlKVxuICApO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChibG9iKSB7XG4gIHJldHVybiAoXG4gICAgbnVsbCAhPT0gYmxvYiAmJlxuICAgIFwib2JqZWN0XCIgPT0gdHlwZW9mIGJsb2IgJiZcbiAgICBcIltvYmplY3QgT2JqZWN0XVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYmxvYilcbiAgKTtcbn1cbmZ1bmN0aW9uIGZpbmROb25TZXJpYWxpemFibGVWYWx1ZSh2YWx1ZSwgcGF0aCA9IFwiXCIpIHtcbiAgaWYgKCFpc1BsYWluKSByZXR1cm4geyBwYXRoOiBwYXRoIHx8IFwicm9vdFwiLCB2YWx1ZTogdmFsdWUgfTtcbiAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHZhbHVlIHx8IG51bGwgPT09IHZhbHVlKSByZXR1cm4gITE7XG4gIGZvciAoY29uc3QgW2tleSwgbmVzdGVkVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuICAgIGNvbnN0IG5lc3RlZFBhdGggPSBwYXRoID8gcGF0aCArIFwiLlwiICsga2V5IDoga2V5O1xuICAgIGlmICghaXNQbGFpbihuZXN0ZWRWYWx1ZSkpIHJldHVybiB7IHBhdGg6IG5lc3RlZFBhdGgsIHZhbHVlOiBuZXN0ZWRWYWx1ZSB9O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBuZXN0ZWRWYWx1ZSkge1xuICAgICAgY29uc3Qgbm9uU2VyaWFsaXphYmxlTmVzdGVkVmFsdWUgPSBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUoXG4gICAgICAgIG5lc3RlZFZhbHVlLFxuICAgICAgICBuZXN0ZWRQYXRoXG4gICAgICApO1xuICAgICAgaWYgKG5vblNlcmlhbGl6YWJsZU5lc3RlZFZhbHVlKSByZXR1cm4gbm9uU2VyaWFsaXphYmxlTmVzdGVkVmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiAhMTtcbn1cbmZ1bmN0aW9uIGVudHJpZXMob2JqKSB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyhvYmopO1xufVxuZnVuY3Rpb24gdHJ5UGFyc2VKc29uKHJhd01lc3NhZ2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShyYXdNZXNzYWdlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybjtcbiAgfVxufVxuZnVuY3Rpb24gYjY0ZGVjb2RlKGI2NHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9ybWF0dGVkVmFsdWUgPSBiNjR2YWx1ZS5yZXBsYWNlKC8tL2csIFwiK1wiKS5yZXBsYWNlKC9fL2csIFwiL1wiKTtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KFxuICAgICAgYXRvYihmb3JtYXR0ZWRWYWx1ZSlcbiAgICAgICAgLnNwbGl0KFwiXCIpXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICByZXR1cm4gXCIlXCIgKyAoXCIwMFwiICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbihcIlwiKVxuICAgICk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBhdG9iKGI2NHZhbHVlKTtcbiAgfVxufVxuY29uc3QgU0NPUEVTID0gW1xuICBcIndlYnNvY2tldDpwcmVzZW5jZVwiLFxuICBcIndlYnNvY2tldDpzdG9yYWdlXCIsXG4gIFwicm9vbTpyZWFkXCIsXG4gIFwicm9vbTp3cml0ZVwiLFxuICBcInJvb21zOnJlYWRcIixcbiAgXCJyb29tczp3cml0ZVwiLFxuXTtcbmZ1bmN0aW9uIGlzVG9rZW5FeHBpcmVkKHRva2VuKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCkgLyAxZTM7XG4gIHJldHVybiBub3cgPiB0b2tlbi5leHAgLSAzMDAgfHwgbm93IDwgdG9rZW4uaWF0ICsgMzAwO1xufVxuZnVuY3Rpb24gaXNTY29wZSh2YWx1ZSkge1xuICByZXR1cm4gU0NPUEVTLmluY2x1ZGVzKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzU3RyaW5nTGlzdCh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUuZXZlcnkoKGkpID0+IFwic3RyaW5nXCIgPT0gdHlwZW9mIGkpO1xufVxuZnVuY3Rpb24gaXNBcHBPbmx5QXV0aFRva2VuKGRhdGEpIHtcbiAgcmV0dXJuIChcbiAgICBcInN0cmluZ1wiID09IHR5cGVvZiBkYXRhLmFwcElkICYmXG4gICAgdm9pZCAwID09PSBkYXRhLnJvb21JZCAmJlxuICAgIGlzU3RyaW5nTGlzdChkYXRhLnNjb3BlcylcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzUm9vbUF1dGhUb2tlbihkYXRhKSB7XG4gIHJldHVybiAoXG4gICAgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZGF0YS5hcHBJZCAmJlxuICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGRhdGEucm9vbUlkICYmXG4gICAgXCJudW1iZXJcIiA9PSB0eXBlb2YgZGF0YS5hY3RvciAmJlxuICAgICh2b2lkIDAgPT09IGRhdGEuaWQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZGF0YS5pZCkgJiZcbiAgICBpc1N0cmluZ0xpc3QoZGF0YS5zY29wZXMpICYmXG4gICAgKHZvaWQgMCA9PT0gZGF0YS5tYXhDb25uZWN0aW9uc1BlclJvb20gfHxcbiAgICAgIFwibnVtYmVyXCIgPT0gdHlwZW9mIGRhdGEubWF4Q29ubmVjdGlvbnNQZXJSb29tKVxuICApO1xufVxuZnVuY3Rpb24gaXNBdXRoVG9rZW4oZGF0YSkge1xuICByZXR1cm4gaXNBcHBPbmx5QXV0aFRva2VuKGRhdGEpIHx8IGlzUm9vbUF1dGhUb2tlbihkYXRhKTtcbn1cbmZ1bmN0aW9uIHBhcnNlSnd0VG9rZW4odG9rZW4pIHtcbiAgY29uc3QgdG9rZW5QYXJ0cyA9IHRva2VuLnNwbGl0KFwiLlwiKTtcbiAgaWYgKDMgIT09IHRva2VuUGFydHMubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkF1dGhlbnRpY2F0aW9uIGVycm9yOiBpbnZhbGlkIEpXVCB0b2tlblwiKTtcbiAgY29uc3QgZGF0YSA9IHRyeVBhcnNlSnNvbihiNjRkZWNvZGUodG9rZW5QYXJ0c1sxXSkpO1xuICBpZiAoXG4gICAgZGF0YSAmJlxuICAgIChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSByZXR1cm4gITE7XG4gICAgICBjb25zdCB7IGlhdDogaWF0LCBleHA6IGV4cCB9ID0gZGF0YTtcbiAgICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiBpYXQgJiYgXCJudW1iZXJcIiA9PSB0eXBlb2YgZXhwO1xuICAgIH0pKGRhdGEpXG4gIClcbiAgICByZXR1cm4gZGF0YTtcbiAgdGhyb3cgbmV3IEVycm9yKFwiQXV0aGVudGljYXRpb24gZXJyb3I6IG1pc3NpbmcgSldUIG1ldGFkYXRhXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VSb29tQXV0aFRva2VuKHRva2VuU3RyaW5nKSB7XG4gIGNvbnN0IGRhdGEgPSBwYXJzZUp3dFRva2VuKHRva2VuU3RyaW5nKTtcbiAgaWYgKGRhdGEgJiYgaXNSb29tQXV0aFRva2VuKGRhdGEpKSB7XG4gICAgcmV0dXJuIF9fcmVzdChkYXRhLCBbXCJtYXhDb25uZWN0aW9uc1wiXSk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIFwiQXV0aGVudGljYXRpb24gZXJyb3I6IHdlIGV4cGVjdGVkIGEgcm9vbSB0b2tlbiBidXQgZGlkIG5vdCBnZXQgb25lLiBIaW50OiBpZiB5b3UgYXJlIHVzaW5nIGEgY2FsbGJhY2ssIGVuc3VyZSB0aGUgcm9vbSBpcyBwYXNzZWQgd2hlbiBjcmVhdGluZyB0aGUgdG9rZW4uIEZvciBtb3JlIGluZm9ybWF0aW9uOiBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9hcGktcmVmZXJlbmNlL2xpdmVibG9ja3MtY2xpZW50I2NyZWF0ZUNsaWVudENhbGxiYWNrXCJcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzSnNvblNjYWxhcihkYXRhKSB7XG4gIHJldHVybiAoXG4gICAgbnVsbCA9PT0gZGF0YSB8fFxuICAgIFwic3RyaW5nXCIgPT0gdHlwZW9mIGRhdGEgfHxcbiAgICBcIm51bWJlclwiID09IHR5cGVvZiBkYXRhIHx8XG4gICAgXCJib29sZWFuXCIgPT0gdHlwZW9mIGRhdGFcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzSnNvbkFycmF5KGRhdGEpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZGF0YSk7XG59XG5mdW5jdGlvbiBpc0pzb25PYmplY3QoZGF0YSkge1xuICByZXR1cm4gIWlzSnNvblNjYWxhcihkYXRhKSAmJiAhaXNKc29uQXJyYXkoZGF0YSk7XG59XG5leHBvcnQge1xuICBpc1Jvb21BdXRoVG9rZW4gYXMgQSxcbiAgaXNTY29wZSBhcyBCLFxuICBDbGllbnRNc2dDb2RlIGFzIEMsXG4gIGRlcHJlY2F0ZSBhcyBELFxuICBkZXByZWNhdGVJZiBhcyBFLFxuICB0aHJvd1VzYWdlRXJyb3IgYXMgRixcbiAgY29tcGFyZVBvc2l0aW9uIGFzIEcsXG4gIG1ha2VQb3NpdGlvbiBhcyBILFxuICBDcmR0VHlwZSBhcyBJLFxuICBpc0pzb25TY2FsYXIgYXMgSixcbiAgaXNDaGlsZENyZHQgYXMgSyxcbiAgTGl2ZU9iamVjdCBhcyBMLFxuICBiNjRkZWNvZGUgYXMgTSxcbiAgT3BTb3VyY2UgYXMgTyxcbiAgU2VydmVyTXNnQ29kZSBhcyBTLFxuICBXZWJzb2NrZXRDbG9zZUNvZGVzIGFzIFcsXG4gIF9fcmVzdCBhcyBfLFxuICBpc1Jvb21FdmVudE5hbWUgYXMgYSxcbiAgaXNQbGFpbk9iamVjdCBhcyBiLFxuICBpc1Rva2VuRXhwaXJlZCBhcyBjLFxuICBpc1NhbWVOb2RlT3JDaGlsZE9mIGFzIGQsXG4gIE9wQ29kZSBhcyBlLFxuICBpc0xpdmVMaXN0IGFzIGYsXG4gIGdldFRyZWVzRGlmZk9wZXJhdGlvbnMgYXMgZyxcbiAgaXNKc29uQXJyYXkgYXMgaCxcbiAgaXNMaXZlTm9kZSBhcyBpLFxuICBjb21wYWN0IGFzIGosXG4gIGlzUm9vdENyZHQgYXMgayxcbiAgaXNKc29uT2JqZWN0IGFzIGwsXG4gIG1lcmdlU3RvcmFnZVVwZGF0ZXMgYXMgbSxcbiAgbm4gYXMgbixcbiAgZXJyb3JJZiBhcyBvLFxuICBwYXJzZVJvb21BdXRoVG9rZW4gYXMgcCxcbiAgTGl2ZUxpc3QgYXMgcSxcbiAgcmVtb3ZlIGFzIHIsXG4gIExpdmVNYXAgYXMgcyxcbiAgdHJ5UGFyc2VKc29uIGFzIHQsXG4gIExpdmVSZWdpc3RlciBhcyB1LFxuICBmaW5kTm9uU2VyaWFsaXphYmxlVmFsdWUgYXMgdixcbiAgaXNMaXZlT2JqZWN0IGFzIHcsXG4gIGFzc2VydE5ldmVyIGFzIHgsXG4gIGlzQXBwT25seUF1dGhUb2tlbiBhcyB5LFxuICBpc0F1dGhUb2tlbiBhcyB6LFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@liveblocks/client/shared.mjs\n");

/***/ }),

/***/ "./node_modules/@liveblocks/react/index.mjs":
/*!**************************************************!*\
  !*** ./node_modules/@liveblocks/react/index.mjs ***!
  \**************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"LiveblocksProvider\": function() { return /* binding */ LiveblocksProvider; },\n/* harmony export */   \"RoomProvider\": function() { return /* binding */ RoomProvider; },\n/* harmony export */   \"createRoomContext\": function() { return /* binding */ createRoomContext; },\n/* harmony export */   \"useBatch\": function() { return /* binding */ useBatch; },\n/* harmony export */   \"useBroadcastEvent\": function() { return /* binding */ useBroadcastEvent; },\n/* harmony export */   \"useClient\": function() { return /* binding */ useClient; },\n/* harmony export */   \"useErrorListener\": function() { return /* binding */ useErrorListener; },\n/* harmony export */   \"useEventListener\": function() { return /* binding */ useEventListener; },\n/* harmony export */   \"useHistory\": function() { return /* binding */ useHistory; },\n/* harmony export */   \"useList\": function() { return /* binding */ useList; },\n/* harmony export */   \"useMap\": function() { return /* binding */ useMap; },\n/* harmony export */   \"useMyPresence\": function() { return /* binding */ useMyPresence; },\n/* harmony export */   \"useObject\": function() { return /* binding */ useObject; },\n/* harmony export */   \"useOthers\": function() { return /* binding */ useOthers; },\n/* harmony export */   \"useRedo\": function() { return /* binding */ useRedo; },\n/* harmony export */   \"useRoom\": function() { return /* binding */ useRoom; },\n/* harmony export */   \"useSelf\": function() { return /* binding */ useSelf; },\n/* harmony export */   \"useStorage\": function() { return /* binding */ useStorage; },\n/* harmony export */   \"useUndo\": function() { return /* binding */ useUndo; },\n/* harmony export */   \"useUpdateMyPresence\": function() { return /* binding */ useUpdateMyPresence; }\n/* harmony export */ });\n/* harmony import */ var _liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @liveblocks/client/internal */ \"./node_modules/@liveblocks/client/internal.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var _liveblocks_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @liveblocks/client */ \"./node_modules/@liveblocks/client/index.mjs\");\n\n\n\n\nconst ClientContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);\nfunction LiveblocksProvider(props) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"LiveblocksProvider is no longer needed in your component tree if you set up your Liveblocks context using `createRoomContext()`. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n      ClientContext.Provider,\n      { value: props.client },\n      props.children\n    )\n  );\n}\nfunction useClient() {\n  const client = react__WEBPACK_IMPORTED_MODULE_0__.useContext(ClientContext);\n  if (null == client)\n    throw new Error(\"LiveblocksProvider is missing from the react tree\");\n  return client;\n}\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      var value;\n      result.done\n        ? resolve(result.value)\n        : ((value = result.value),\n          value instanceof P\n            ? value\n            : new P(function (resolve) {\n                resolve(value);\n              })).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nfunction useRerender() {\n  const [, update] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)((x) => x + 1, 0);\n  return update;\n}\nfunction useInitial(value) {\n  return react__WEBPACK_IMPORTED_MODULE_0__.useRef(value).current;\n}\nfunction createRoomContext(client) {\n  let useClient$1;\n  useClient$1 = \"__legacy\" !== client ? () => client : useClient;\n  const RoomContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(null);\n  function useRoom() {\n    const room = react__WEBPACK_IMPORTED_MODULE_0__.useContext(RoomContext);\n    if (null == room)\n      throw new Error(\"RoomProvider is missing from the react tree\");\n    return room;\n  }\n  function useStorage() {\n    const room = useRoom(),\n      [root, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n    return (\n      react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n        let didCancel = !1;\n        return (\n          (function () {\n            __awaiter(this, void 0, void 0, function* () {\n              const storage = yield room.getStorage();\n              didCancel || setState(storage.root);\n            });\n          })(),\n          () => {\n            didCancel = !0;\n          }\n        );\n      }, [room]),\n      [root]\n    );\n  }\n  function useMap_deprecated(key, entries) {\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n      entries,\n      `Support for initializing entries in useMap() directly will be removed in @liveblocks/react 0.18.\\n\\nInstead, please initialize this data where you set up your RoomProvider:\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n        key\n      )}: new LiveMap(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n    );\n    const value = useStorageValue(\n      key,\n      new _liveblocks_client__WEBPACK_IMPORTED_MODULE_2__.LiveMap(null != entries ? entries : void 0)\n    );\n    return \"ok\" === value.status\n      ? value.value\n      : ((0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n          \"notfound\" === value.status,\n          `Key ${JSON.stringify(\n            key\n          )} was not found in Storage. Starting with 0.18, useMap() will no longer automatically create this key.\\n\\nInstead, please initialize your storage where you set up your RoomProvider:\\n\\n    import { LiveMap } from \"@liveblocks/client\";\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n            key\n          )}: new LiveMap(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n        ),\n        null);\n  }\n  function useList_deprecated(key, items) {\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n      items,\n      `Support for initializing items in useList() directly will be removed in @liveblocks/react 0.18.\\n\\nInstead, please initialize this data where you set up your RoomProvider:\\n\\n    import { LiveList } from \"@liveblocks/client\";\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n        key\n      )}: new LiveList(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n    );\n    const value = useStorageValue(key, new _liveblocks_client__WEBPACK_IMPORTED_MODULE_2__.LiveList(items));\n    return \"ok\" === value.status\n      ? value.value\n      : ((0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n          \"notfound\" === value.status,\n          `Key ${JSON.stringify(\n            key\n          )} was not found in Storage. Starting with 0.18, useList() will no longer automatically create this key.\\n\\nInstead, please initialize your storage where you set up your RoomProvider:\\n\\n    import { LiveList } from \"@liveblocks/client\";\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n            key\n          )}: new LiveList(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n        ),\n        null);\n  }\n  function useObject_deprecated(key, initialData) {\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n      initialData,\n      `Support for initializing data in useObject() directly will be removed in @liveblocks/react 0.18.\\n\\nInstead, please initialize this data where you set up your RoomProvider:\\n\\n    import { LiveObject } from \"@liveblocks/client\";\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n        key\n      )}: new LiveObject(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n    );\n    const value = useStorageValue(key, new _liveblocks_client__WEBPACK_IMPORTED_MODULE_2__.LiveObject(initialData));\n    return \"ok\" === value.status\n      ? value.value\n      : ((0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n          \"notfound\" === value.status,\n          `Key ${JSON.stringify(\n            key\n          )} was not found in Storage. Starting with 0.18, useObject() will no longer automatically create this key.\\n\\nInstead, please initialize your storage where you set up your RoomProvider:\\n\\n    import { LiveObject } from \"@liveblocks/client\";\\n\\n    const initialStorage = () => ({\\n      ${JSON.stringify(\n            key\n          )}: new LiveObject(...),\\n      ...\\n    });\\n\\n    <RoomProvider initialStorage={initialStorage}>\\n      ...\\n    </RoomProvider>\\n\\nPlease see https://bit.ly/3Niy5aP for details.`\n        ),\n        null);\n  }\n  function useHistory() {\n    return useRoom().history;\n  }\n  function useStorageValue(key, initialValue) {\n    const room = useRoom(),\n      [root] = useStorage(),\n      rerender = useRerender(),\n      frozenInitialValue = useInitial(initialValue);\n    if (\n      (react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n        if (null == root) return;\n        let liveValue = root.get(key);\n        null == liveValue &&\n          ((liveValue = frozenInitialValue), root.set(key, liveValue));\n        let unsubscribeCrdt = room.subscribe(liveValue, rerender);\n        const unsubscribeRoot = room.subscribe(root, function () {\n          const newCrdt = root.get(key);\n          newCrdt !== liveValue &&\n            (unsubscribeCrdt(),\n            (liveValue = newCrdt),\n            (unsubscribeCrdt = room.subscribe(liveValue, rerender)),\n            rerender());\n        });\n        return (\n          rerender(),\n          () => {\n            unsubscribeRoot(), unsubscribeCrdt();\n          }\n        );\n      }, [root, room, key, frozenInitialValue, rerender]),\n      null == root)\n    )\n      return { status: \"loading\" };\n    {\n      const value = root.get(key);\n      return null == value\n        ? { status: \"notfound\" }\n        : { status: \"ok\", value: value };\n    }\n  }\n  return {\n    RoomProvider: function (props) {\n      const {\n        id: roomId,\n        initialPresence: initialPresence,\n        initialStorage: initialStorage,\n        defaultPresence: defaultPresence,\n        defaultStorageRoot: defaultStorageRoot,\n      } = props;\n      if (true) {\n        if (null == roomId)\n          throw new Error(\n            \"RoomProvider id property is required. For more information: https://liveblocks.io/docs/errors/liveblocks-react/RoomProvider-id-property-is-required\"\n          );\n        if (\"string\" != typeof roomId)\n          throw new Error(\"RoomProvider id property should be a string.\");\n      }\n      (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n        defaultPresence,\n        \"RoomProvider's `defaultPresence` prop will be removed in @liveblocks/react 0.18. Please use `initialPresence` instead. For more info, see https://bit.ly/3Niy5aP\"\n      ),\n        (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.errorIf)(\n          defaultStorageRoot,\n          \"RoomProvider's `defaultStorageRoot` prop will be removed in @liveblocks/react 0.18. Please use `initialStorage` instead. For more info, see https://bit.ly/3Niy5aP\"\n        );\n      const _client = useClient$1(),\n        frozen = useInitial({\n          initialPresence: initialPresence,\n          initialStorage: initialStorage,\n          defaultPresence: defaultPresence,\n          defaultStorageRoot: defaultStorageRoot,\n        }),\n        [room, setRoom] = react__WEBPACK_IMPORTED_MODULE_0__.useState(() =>\n          _client.enter(roomId, {\n            initialPresence: initialPresence,\n            initialStorage: initialStorage,\n            defaultPresence: defaultPresence,\n            defaultStorageRoot: defaultStorageRoot,\n            DO_NOT_USE_withoutConnecting: \"undefined\" == typeof window,\n          })\n        );\n      return (\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(\n          () => (\n            setRoom(\n              _client.enter(roomId, {\n                initialPresence: frozen.initialPresence,\n                initialStorage: frozen.initialStorage,\n                defaultPresence: frozen.defaultPresence,\n                defaultStorageRoot: frozen.defaultStorageRoot,\n                DO_NOT_USE_withoutConnecting: \"undefined\" == typeof window,\n              })\n            ),\n            () => {\n              _client.leave(roomId);\n            }\n          ),\n          [_client, roomId, frozen]\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\n          RoomContext.Provider,\n          { value: room },\n          props.children\n        )\n      );\n    },\n    useBatch: function () {\n      return useRoom().batch;\n    },\n    useBroadcastEvent: function () {\n      const room = useRoom();\n      return react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n        (event, options = { shouldQueueEventIfNotReady: !1 }) => {\n          room.broadcastEvent(event, options);\n        },\n        [room]\n      );\n    },\n    useErrorListener: function (callback) {\n      const room = useRoom(),\n        savedCallback = react__WEBPACK_IMPORTED_MODULE_0__.useRef(callback);\n      react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n        savedCallback.current = callback;\n      }),\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n          const unsubscribe = room.subscribe(\"error\", (e) =>\n            savedCallback.current(e)\n          );\n          return () => {\n            unsubscribe();\n          };\n        }, [room]);\n    },\n    useEventListener: function (callback) {\n      const room = useRoom(),\n        savedCallback = react__WEBPACK_IMPORTED_MODULE_0__.useRef(callback);\n      react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n        savedCallback.current = callback;\n      }),\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n          const unsubscribe = room.subscribe(\"event\", (eventData) => {\n            savedCallback.current(eventData);\n          });\n          return () => {\n            unsubscribe();\n          };\n        }, [room]);\n    },\n    useHistory: useHistory,\n    useList: function (key) {\n      return useList_deprecated(key);\n    },\n    useMap: function (key) {\n      return useMap_deprecated(key);\n    },\n    useMyPresence: function () {\n      const room = useRoom(),\n        presence = room.getPresence(),\n        rerender = useRerender();\n      return (\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n          const unsubscribe = room.subscribe(\"my-presence\", rerender);\n          return () => {\n            unsubscribe();\n          };\n        }, [room, rerender]),\n        [\n          presence,\n          react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n            (overrides, options) => room.updatePresence(overrides, options),\n            [room]\n          ),\n        ]\n      );\n    },\n    useObject: function (key) {\n      return useObject_deprecated(key);\n    },\n    useOthers: function () {\n      const room = useRoom(),\n        rerender = useRerender();\n      return (\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n          const unsubscribe = room.subscribe(\"others\", rerender);\n          return () => {\n            unsubscribe();\n          };\n        }, [room, rerender]),\n        room.getOthers()\n      );\n    },\n    useRedo: function () {\n      return useHistory().redo;\n    },\n    useRoom: useRoom,\n    useSelf: function () {\n      const room = useRoom(),\n        rerender = useRerender();\n      return (\n        react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n          const unsubscribePresence = room.subscribe(\"my-presence\", rerender),\n            unsubscribeConnection = room.subscribe(\"connection\", rerender);\n          return () => {\n            unsubscribePresence(), unsubscribeConnection();\n          };\n        }, [room, rerender]),\n        room.getSelf()\n      );\n    },\n    useStorage: useStorage,\n    useUndo: function () {\n      return useHistory().undo;\n    },\n    useUpdateMyPresence: function () {\n      const room = useRoom();\n      return react__WEBPACK_IMPORTED_MODULE_0__.useCallback(\n        (overrides, options) => {\n          room.updatePresence(overrides, options);\n        },\n        [room]\n      );\n    },\n    RoomContext: RoomContext,\n    useList_deprecated: useList_deprecated,\n    useMap_deprecated: useMap_deprecated,\n    useObject_deprecated: useObject_deprecated,\n  };\n}\nconst _hooks = createRoomContext(\"__legacy\");\nfunction RoomProvider(props) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `RoomProvider` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.RoomProvider(props)\n  );\n}\nfunction useBatch() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useBatch` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useBatch()\n  );\n}\nfunction useBroadcastEvent() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useBroadcastEvent` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useBroadcastEvent()\n  );\n}\nfunction useErrorListener(callback) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useErrorListener` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useErrorListener(callback)\n  );\n}\nfunction useEventListener(callback) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useEventListener` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useEventListener(callback)\n  );\n}\nfunction useHistory() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useHistory` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useHistory()\n  );\n}\nfunction useMyPresence() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useMyPresence` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useMyPresence()\n  );\n}\nfunction useOthers() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useOthers` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useOthers()\n  );\n}\nfunction useRedo() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useRedo` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useRedo()\n  );\n}\nfunction useRoom() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useRoom` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useRoom()\n  );\n}\nfunction useSelf() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useSelf` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useSelf()\n  );\n}\nfunction useStorage() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useStorage` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useStorage()\n  );\n}\nfunction useUndo() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useUndo` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useUndo()\n  );\n}\nfunction useUpdateMyPresence() {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useUpdateMyPresence` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useUpdateMyPresence()\n  );\n}\nfunction useList(key, items) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useList` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useList_deprecated(key, items)\n  );\n}\nfunction useMap(key, entries) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useMap` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useMap_deprecated(key, entries)\n  );\n}\nfunction useObject(key, initialData) {\n  return (\n    (0,_liveblocks_client_internal__WEBPACK_IMPORTED_MODULE_1__.deprecate)(\n      \"Please use `createRoomContext()` instead of importing `useObject` from `@liveblocks/react` directly. See https://liveblocks.io/docs/guides/upgrading#upgrading-from-0-16-to-0-17 for details.\"\n    ),\n    _hooks.useObject_deprecated(key, initialData)\n  );\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGxpdmVibG9ja3MvcmVhY3QvaW5kZXgubWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ2xDO0FBQ0k7QUFDZ0M7QUFDbkUsc0JBQXNCLGdEQUFtQjtBQUN6QztBQUNBO0FBQ0EsSUFBSSxzRUFBUztBQUNiO0FBQ0E7QUFDQSxJQUFJLGdEQUFtQjtBQUN2QjtBQUNBLFFBQVEscUJBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkNBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHFCQUFxQixpREFBVTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxTQUFTLHlDQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGdEQUFtQjtBQUN6QztBQUNBLGlCQUFpQiw2Q0FBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJDQUFjO0FBQ3ZDO0FBQ0EsTUFBTSw0Q0FBZTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxvRUFBTztBQUNYO0FBQ0EsME5BQTBOLFVBQVU7QUFDcE87QUFDQSxRQUFRLHFDQUFxQyxFQUFFLHNDQUFzQyxlQUFlO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLFVBQVUsdURBQU87QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvRUFBTztBQUNo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QTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVUsOENBQWlCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNENBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDRDQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGFBQWEsOENBQWlCO0FBQzlCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHNFQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNCRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGxpdmVibG9ja3MvcmVhY3QvaW5kZXgubWpzP2FmNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVwcmVjYXRlLCBlcnJvcklmIH0gZnJvbSBcIkBsaXZlYmxvY2tzL2NsaWVudC9pbnRlcm5hbFwiO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VSZWR1Y2VyIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMaXZlTWFwLCBMaXZlTGlzdCwgTGl2ZU9iamVjdCB9IGZyb20gXCJAbGl2ZWJsb2Nrcy9jbGllbnRcIjtcbmNvbnN0IENsaWVudENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gTGl2ZWJsb2Nrc1Byb3ZpZGVyKHByb3BzKSB7XG4gIHJldHVybiAoXG4gICAgZGVwcmVjYXRlKFxuICAgICAgXCJMaXZlYmxvY2tzUHJvdmlkZXIgaXMgbm8gbG9uZ2VyIG5lZWRlZCBpbiB5b3VyIGNvbXBvbmVudCB0cmVlIGlmIHlvdSBzZXQgdXAgeW91ciBMaXZlYmxvY2tzIGNvbnRleHQgdXNpbmcgYGNyZWF0ZVJvb21Db250ZXh0KClgLiBTZWUgaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvZ3VpZGVzL3VwZ3JhZGluZyN1cGdyYWRpbmctZnJvbS0wLTE2LXRvLTAtMTcgZm9yIGRldGFpbHMuXCJcbiAgICApLFxuICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICBDbGllbnRDb250ZXh0LlByb3ZpZGVyLFxuICAgICAgeyB2YWx1ZTogcHJvcHMuY2xpZW50IH0sXG4gICAgICBwcm9wcy5jaGlsZHJlblxuICAgIClcbiAgKTtcbn1cbmZ1bmN0aW9uIHVzZUNsaWVudCgpIHtcbiAgY29uc3QgY2xpZW50ID0gUmVhY3QudXNlQ29udGV4dChDbGllbnRDb250ZXh0KTtcbiAgaWYgKG51bGwgPT0gY2xpZW50KVxuICAgIHRocm93IG5ldyBFcnJvcihcIkxpdmVibG9ja3NQcm92aWRlciBpcyBtaXNzaW5nIGZyb20gdGhlIHJlYWN0IHRyZWVcIik7XG4gIHJldHVybiBjbGllbnQ7XG59XG5mdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdGVwKGdlbmVyYXRvci50aHJvdyh2YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QoZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7XG4gICAgICB2YXIgdmFsdWU7XG4gICAgICByZXN1bHQuZG9uZVxuICAgICAgICA/IHJlc29sdmUocmVzdWx0LnZhbHVlKVxuICAgICAgICA6ICgodmFsdWUgPSByZXN1bHQudmFsdWUpLFxuICAgICAgICAgIHZhbHVlIGluc3RhbmNlb2YgUFxuICAgICAgICAgICAgPyB2YWx1ZVxuICAgICAgICAgICAgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgICB9KSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTtcbiAgICB9XG4gICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHVzZVJlcmVuZGVyKCkge1xuICBjb25zdCBbLCB1cGRhdGVdID0gdXNlUmVkdWNlcigoeCkgPT4geCArIDEsIDApO1xuICByZXR1cm4gdXBkYXRlO1xufVxuZnVuY3Rpb24gdXNlSW5pdGlhbCh2YWx1ZSkge1xuICByZXR1cm4gUmVhY3QudXNlUmVmKHZhbHVlKS5jdXJyZW50O1xufVxuZnVuY3Rpb24gY3JlYXRlUm9vbUNvbnRleHQoY2xpZW50KSB7XG4gIGxldCB1c2VDbGllbnQkMTtcbiAgdXNlQ2xpZW50JDEgPSBcIl9fbGVnYWN5XCIgIT09IGNsaWVudCA/ICgpID0+IGNsaWVudCA6IHVzZUNsaWVudDtcbiAgY29uc3QgUm9vbUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KG51bGwpO1xuICBmdW5jdGlvbiB1c2VSb29tKCkge1xuICAgIGNvbnN0IHJvb20gPSBSZWFjdC51c2VDb250ZXh0KFJvb21Db250ZXh0KTtcbiAgICBpZiAobnVsbCA9PSByb29tKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9vbVByb3ZpZGVyIGlzIG1pc3NpbmcgZnJvbSB0aGUgcmVhY3QgdHJlZVwiKTtcbiAgICByZXR1cm4gcm9vbTtcbiAgfVxuICBmdW5jdGlvbiB1c2VTdG9yYWdlKCkge1xuICAgIGNvbnN0IHJvb20gPSB1c2VSb29tKCksXG4gICAgICBbcm9vdCwgc2V0U3RhdGVdID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG4gICAgcmV0dXJuIChcbiAgICAgIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGxldCBkaWRDYW5jZWwgPSAhMTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICBjb25zdCBzdG9yYWdlID0geWllbGQgcm9vbS5nZXRTdG9yYWdlKCk7XG4gICAgICAgICAgICAgIGRpZENhbmNlbCB8fCBzZXRTdGF0ZShzdG9yYWdlLnJvb3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSkoKSxcbiAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBkaWRDYW5jZWwgPSAhMDtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9LCBbcm9vbV0pLFxuICAgICAgW3Jvb3RdXG4gICAgKTtcbiAgfVxuICBmdW5jdGlvbiB1c2VNYXBfZGVwcmVjYXRlZChrZXksIGVudHJpZXMpIHtcbiAgICBlcnJvcklmKFxuICAgICAgZW50cmllcyxcbiAgICAgIGBTdXBwb3J0IGZvciBpbml0aWFsaXppbmcgZW50cmllcyBpbiB1c2VNYXAoKSBkaXJlY3RseSB3aWxsIGJlIHJlbW92ZWQgaW4gQGxpdmVibG9ja3MvcmVhY3QgMC4xOC5cXG5cXG5JbnN0ZWFkLCBwbGVhc2UgaW5pdGlhbGl6ZSB0aGlzIGRhdGEgd2hlcmUgeW91IHNldCB1cCB5b3VyIFJvb21Qcm92aWRlcjpcXG5cXG4gICAgY29uc3QgaW5pdGlhbFN0b3JhZ2UgPSAoKSA9PiAoe1xcbiAgICAgICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIGtleVxuICAgICAgKX06IG5ldyBMaXZlTWFwKC4uLiksXFxuICAgICAgLi4uXFxuICAgIH0pO1xcblxcbiAgICA8Um9vbVByb3ZpZGVyIGluaXRpYWxTdG9yYWdlPXtpbml0aWFsU3RvcmFnZX0+XFxuICAgICAgLi4uXFxuICAgIDwvUm9vbVByb3ZpZGVyPlxcblxcblBsZWFzZSBzZWUgaHR0cHM6Ly9iaXQubHkvM05peTVhUCBmb3IgZGV0YWlscy5gXG4gICAgKTtcbiAgICBjb25zdCB2YWx1ZSA9IHVzZVN0b3JhZ2VWYWx1ZShcbiAgICAgIGtleSxcbiAgICAgIG5ldyBMaXZlTWFwKG51bGwgIT0gZW50cmllcyA/IGVudHJpZXMgOiB2b2lkIDApXG4gICAgKTtcbiAgICByZXR1cm4gXCJva1wiID09PSB2YWx1ZS5zdGF0dXNcbiAgICAgID8gdmFsdWUudmFsdWVcbiAgICAgIDogKGVycm9ySWYoXG4gICAgICAgICAgXCJub3Rmb3VuZFwiID09PSB2YWx1ZS5zdGF0dXMsXG4gICAgICAgICAgYEtleSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gd2FzIG5vdCBmb3VuZCBpbiBTdG9yYWdlLiBTdGFydGluZyB3aXRoIDAuMTgsIHVzZU1hcCgpIHdpbGwgbm8gbG9uZ2VyIGF1dG9tYXRpY2FsbHkgY3JlYXRlIHRoaXMga2V5Llxcblxcbkluc3RlYWQsIHBsZWFzZSBpbml0aWFsaXplIHlvdXIgc3RvcmFnZSB3aGVyZSB5b3Ugc2V0IHVwIHlvdXIgUm9vbVByb3ZpZGVyOlxcblxcbiAgICBpbXBvcnQgeyBMaXZlTWFwIH0gZnJvbSBcIkBsaXZlYmxvY2tzL2NsaWVudFwiO1xcblxcbiAgICBjb25zdCBpbml0aWFsU3RvcmFnZSA9ICgpID0+ICh7XFxuICAgICAgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9OiBuZXcgTGl2ZU1hcCguLi4pLFxcbiAgICAgIC4uLlxcbiAgICB9KTtcXG5cXG4gICAgPFJvb21Qcm92aWRlciBpbml0aWFsU3RvcmFnZT17aW5pdGlhbFN0b3JhZ2V9PlxcbiAgICAgIC4uLlxcbiAgICA8L1Jvb21Qcm92aWRlcj5cXG5cXG5QbGVhc2Ugc2VlIGh0dHBzOi8vYml0Lmx5LzNOaXk1YVAgZm9yIGRldGFpbHMuYFxuICAgICAgICApLFxuICAgICAgICBudWxsKTtcbiAgfVxuICBmdW5jdGlvbiB1c2VMaXN0X2RlcHJlY2F0ZWQoa2V5LCBpdGVtcykge1xuICAgIGVycm9ySWYoXG4gICAgICBpdGVtcyxcbiAgICAgIGBTdXBwb3J0IGZvciBpbml0aWFsaXppbmcgaXRlbXMgaW4gdXNlTGlzdCgpIGRpcmVjdGx5IHdpbGwgYmUgcmVtb3ZlZCBpbiBAbGl2ZWJsb2Nrcy9yZWFjdCAwLjE4Llxcblxcbkluc3RlYWQsIHBsZWFzZSBpbml0aWFsaXplIHRoaXMgZGF0YSB3aGVyZSB5b3Ugc2V0IHVwIHlvdXIgUm9vbVByb3ZpZGVyOlxcblxcbiAgICBpbXBvcnQgeyBMaXZlTGlzdCB9IGZyb20gXCJAbGl2ZWJsb2Nrcy9jbGllbnRcIjtcXG5cXG4gICAgY29uc3QgaW5pdGlhbFN0b3JhZ2UgPSAoKSA9PiAoe1xcbiAgICAgICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIGtleVxuICAgICAgKX06IG5ldyBMaXZlTGlzdCguLi4pLFxcbiAgICAgIC4uLlxcbiAgICB9KTtcXG5cXG4gICAgPFJvb21Qcm92aWRlciBpbml0aWFsU3RvcmFnZT17aW5pdGlhbFN0b3JhZ2V9PlxcbiAgICAgIC4uLlxcbiAgICA8L1Jvb21Qcm92aWRlcj5cXG5cXG5QbGVhc2Ugc2VlIGh0dHBzOi8vYml0Lmx5LzNOaXk1YVAgZm9yIGRldGFpbHMuYFxuICAgICk7XG4gICAgY29uc3QgdmFsdWUgPSB1c2VTdG9yYWdlVmFsdWUoa2V5LCBuZXcgTGl2ZUxpc3QoaXRlbXMpKTtcbiAgICByZXR1cm4gXCJva1wiID09PSB2YWx1ZS5zdGF0dXNcbiAgICAgID8gdmFsdWUudmFsdWVcbiAgICAgIDogKGVycm9ySWYoXG4gICAgICAgICAgXCJub3Rmb3VuZFwiID09PSB2YWx1ZS5zdGF0dXMsXG4gICAgICAgICAgYEtleSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gd2FzIG5vdCBmb3VuZCBpbiBTdG9yYWdlLiBTdGFydGluZyB3aXRoIDAuMTgsIHVzZUxpc3QoKSB3aWxsIG5vIGxvbmdlciBhdXRvbWF0aWNhbGx5IGNyZWF0ZSB0aGlzIGtleS5cXG5cXG5JbnN0ZWFkLCBwbGVhc2UgaW5pdGlhbGl6ZSB5b3VyIHN0b3JhZ2Ugd2hlcmUgeW91IHNldCB1cCB5b3VyIFJvb21Qcm92aWRlcjpcXG5cXG4gICAgaW1wb3J0IHsgTGl2ZUxpc3QgfSBmcm9tIFwiQGxpdmVibG9ja3MvY2xpZW50XCI7XFxuXFxuICAgIGNvbnN0IGluaXRpYWxTdG9yYWdlID0gKCkgPT4gKHtcXG4gICAgICAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX06IG5ldyBMaXZlTGlzdCguLi4pLFxcbiAgICAgIC4uLlxcbiAgICB9KTtcXG5cXG4gICAgPFJvb21Qcm92aWRlciBpbml0aWFsU3RvcmFnZT17aW5pdGlhbFN0b3JhZ2V9PlxcbiAgICAgIC4uLlxcbiAgICA8L1Jvb21Qcm92aWRlcj5cXG5cXG5QbGVhc2Ugc2VlIGh0dHBzOi8vYml0Lmx5LzNOaXk1YVAgZm9yIGRldGFpbHMuYFxuICAgICAgICApLFxuICAgICAgICBudWxsKTtcbiAgfVxuICBmdW5jdGlvbiB1c2VPYmplY3RfZGVwcmVjYXRlZChrZXksIGluaXRpYWxEYXRhKSB7XG4gICAgZXJyb3JJZihcbiAgICAgIGluaXRpYWxEYXRhLFxuICAgICAgYFN1cHBvcnQgZm9yIGluaXRpYWxpemluZyBkYXRhIGluIHVzZU9iamVjdCgpIGRpcmVjdGx5IHdpbGwgYmUgcmVtb3ZlZCBpbiBAbGl2ZWJsb2Nrcy9yZWFjdCAwLjE4Llxcblxcbkluc3RlYWQsIHBsZWFzZSBpbml0aWFsaXplIHRoaXMgZGF0YSB3aGVyZSB5b3Ugc2V0IHVwIHlvdXIgUm9vbVByb3ZpZGVyOlxcblxcbiAgICBpbXBvcnQgeyBMaXZlT2JqZWN0IH0gZnJvbSBcIkBsaXZlYmxvY2tzL2NsaWVudFwiO1xcblxcbiAgICBjb25zdCBpbml0aWFsU3RvcmFnZSA9ICgpID0+ICh7XFxuICAgICAgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAga2V5XG4gICAgICApfTogbmV3IExpdmVPYmplY3QoLi4uKSxcXG4gICAgICAuLi5cXG4gICAgfSk7XFxuXFxuICAgIDxSb29tUHJvdmlkZXIgaW5pdGlhbFN0b3JhZ2U9e2luaXRpYWxTdG9yYWdlfT5cXG4gICAgICAuLi5cXG4gICAgPC9Sb29tUHJvdmlkZXI+XFxuXFxuUGxlYXNlIHNlZSBodHRwczovL2JpdC5seS8zTml5NWFQIGZvciBkZXRhaWxzLmBcbiAgICApO1xuICAgIGNvbnN0IHZhbHVlID0gdXNlU3RvcmFnZVZhbHVlKGtleSwgbmV3IExpdmVPYmplY3QoaW5pdGlhbERhdGEpKTtcbiAgICByZXR1cm4gXCJva1wiID09PSB2YWx1ZS5zdGF0dXNcbiAgICAgID8gdmFsdWUudmFsdWVcbiAgICAgIDogKGVycm9ySWYoXG4gICAgICAgICAgXCJub3Rmb3VuZFwiID09PSB2YWx1ZS5zdGF0dXMsXG4gICAgICAgICAgYEtleSAke0pTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAga2V5XG4gICAgICAgICAgKX0gd2FzIG5vdCBmb3VuZCBpbiBTdG9yYWdlLiBTdGFydGluZyB3aXRoIDAuMTgsIHVzZU9iamVjdCgpIHdpbGwgbm8gbG9uZ2VyIGF1dG9tYXRpY2FsbHkgY3JlYXRlIHRoaXMga2V5Llxcblxcbkluc3RlYWQsIHBsZWFzZSBpbml0aWFsaXplIHlvdXIgc3RvcmFnZSB3aGVyZSB5b3Ugc2V0IHVwIHlvdXIgUm9vbVByb3ZpZGVyOlxcblxcbiAgICBpbXBvcnQgeyBMaXZlT2JqZWN0IH0gZnJvbSBcIkBsaXZlYmxvY2tzL2NsaWVudFwiO1xcblxcbiAgICBjb25zdCBpbml0aWFsU3RvcmFnZSA9ICgpID0+ICh7XFxuICAgICAgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9OiBuZXcgTGl2ZU9iamVjdCguLi4pLFxcbiAgICAgIC4uLlxcbiAgICB9KTtcXG5cXG4gICAgPFJvb21Qcm92aWRlciBpbml0aWFsU3RvcmFnZT17aW5pdGlhbFN0b3JhZ2V9PlxcbiAgICAgIC4uLlxcbiAgICA8L1Jvb21Qcm92aWRlcj5cXG5cXG5QbGVhc2Ugc2VlIGh0dHBzOi8vYml0Lmx5LzNOaXk1YVAgZm9yIGRldGFpbHMuYFxuICAgICAgICApLFxuICAgICAgICBudWxsKTtcbiAgfVxuICBmdW5jdGlvbiB1c2VIaXN0b3J5KCkge1xuICAgIHJldHVybiB1c2VSb29tKCkuaGlzdG9yeTtcbiAgfVxuICBmdW5jdGlvbiB1c2VTdG9yYWdlVmFsdWUoa2V5LCBpbml0aWFsVmFsdWUpIHtcbiAgICBjb25zdCByb29tID0gdXNlUm9vbSgpLFxuICAgICAgW3Jvb3RdID0gdXNlU3RvcmFnZSgpLFxuICAgICAgcmVyZW5kZXIgPSB1c2VSZXJlbmRlcigpLFxuICAgICAgZnJvemVuSW5pdGlhbFZhbHVlID0gdXNlSW5pdGlhbChpbml0aWFsVmFsdWUpO1xuICAgIGlmIChcbiAgICAgIChSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAobnVsbCA9PSByb290KSByZXR1cm47XG4gICAgICAgIGxldCBsaXZlVmFsdWUgPSByb290LmdldChrZXkpO1xuICAgICAgICBudWxsID09IGxpdmVWYWx1ZSAmJlxuICAgICAgICAgICgobGl2ZVZhbHVlID0gZnJvemVuSW5pdGlhbFZhbHVlKSwgcm9vdC5zZXQoa2V5LCBsaXZlVmFsdWUpKTtcbiAgICAgICAgbGV0IHVuc3Vic2NyaWJlQ3JkdCA9IHJvb20uc3Vic2NyaWJlKGxpdmVWYWx1ZSwgcmVyZW5kZXIpO1xuICAgICAgICBjb25zdCB1bnN1YnNjcmliZVJvb3QgPSByb29tLnN1YnNjcmliZShyb290LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3QgbmV3Q3JkdCA9IHJvb3QuZ2V0KGtleSk7XG4gICAgICAgICAgbmV3Q3JkdCAhPT0gbGl2ZVZhbHVlICYmXG4gICAgICAgICAgICAodW5zdWJzY3JpYmVDcmR0KCksXG4gICAgICAgICAgICAobGl2ZVZhbHVlID0gbmV3Q3JkdCksXG4gICAgICAgICAgICAodW5zdWJzY3JpYmVDcmR0ID0gcm9vbS5zdWJzY3JpYmUobGl2ZVZhbHVlLCByZXJlbmRlcikpLFxuICAgICAgICAgICAgcmVyZW5kZXIoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJlcmVuZGVyKCksXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmVSb290KCksIHVuc3Vic2NyaWJlQ3JkdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0sIFtyb290LCByb29tLCBrZXksIGZyb3plbkluaXRpYWxWYWx1ZSwgcmVyZW5kZXJdKSxcbiAgICAgIG51bGwgPT0gcm9vdClcbiAgICApXG4gICAgICByZXR1cm4geyBzdGF0dXM6IFwibG9hZGluZ1wiIH07XG4gICAge1xuICAgICAgY29uc3QgdmFsdWUgPSByb290LmdldChrZXkpO1xuICAgICAgcmV0dXJuIG51bGwgPT0gdmFsdWVcbiAgICAgICAgPyB7IHN0YXR1czogXCJub3Rmb3VuZFwiIH1cbiAgICAgICAgOiB7IHN0YXR1czogXCJva1wiLCB2YWx1ZTogdmFsdWUgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBSb29tUHJvdmlkZXI6IGZ1bmN0aW9uIChwcm9wcykge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpZDogcm9vbUlkLFxuICAgICAgICBpbml0aWFsUHJlc2VuY2U6IGluaXRpYWxQcmVzZW5jZSxcbiAgICAgICAgaW5pdGlhbFN0b3JhZ2U6IGluaXRpYWxTdG9yYWdlLFxuICAgICAgICBkZWZhdWx0UHJlc2VuY2U6IGRlZmF1bHRQcmVzZW5jZSxcbiAgICAgICAgZGVmYXVsdFN0b3JhZ2VSb290OiBkZWZhdWx0U3RvcmFnZVJvb3QsXG4gICAgICB9ID0gcHJvcHM7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09IHByb2Nlc3MuZW52Lk5PREVfRU5WKSB7XG4gICAgICAgIGlmIChudWxsID09IHJvb21JZClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIlJvb21Qcm92aWRlciBpZCBwcm9wZXJ0eSBpcyByZXF1aXJlZC4gRm9yIG1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2Vycm9ycy9saXZlYmxvY2tzLXJlYWN0L1Jvb21Qcm92aWRlci1pZC1wcm9wZXJ0eS1pcy1yZXF1aXJlZFwiXG4gICAgICAgICAgKTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIHJvb21JZClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSb29tUHJvdmlkZXIgaWQgcHJvcGVydHkgc2hvdWxkIGJlIGEgc3RyaW5nLlwiKTtcbiAgICAgIH1cbiAgICAgIGVycm9ySWYoXG4gICAgICAgIGRlZmF1bHRQcmVzZW5jZSxcbiAgICAgICAgXCJSb29tUHJvdmlkZXIncyBgZGVmYXVsdFByZXNlbmNlYCBwcm9wIHdpbGwgYmUgcmVtb3ZlZCBpbiBAbGl2ZWJsb2Nrcy9yZWFjdCAwLjE4LiBQbGVhc2UgdXNlIGBpbml0aWFsUHJlc2VuY2VgIGluc3RlYWQuIEZvciBtb3JlIGluZm8sIHNlZSBodHRwczovL2JpdC5seS8zTml5NWFQXCJcbiAgICAgICksXG4gICAgICAgIGVycm9ySWYoXG4gICAgICAgICAgZGVmYXVsdFN0b3JhZ2VSb290LFxuICAgICAgICAgIFwiUm9vbVByb3ZpZGVyJ3MgYGRlZmF1bHRTdG9yYWdlUm9vdGAgcHJvcCB3aWxsIGJlIHJlbW92ZWQgaW4gQGxpdmVibG9ja3MvcmVhY3QgMC4xOC4gUGxlYXNlIHVzZSBgaW5pdGlhbFN0b3JhZ2VgIGluc3RlYWQuIEZvciBtb3JlIGluZm8sIHNlZSBodHRwczovL2JpdC5seS8zTml5NWFQXCJcbiAgICAgICAgKTtcbiAgICAgIGNvbnN0IF9jbGllbnQgPSB1c2VDbGllbnQkMSgpLFxuICAgICAgICBmcm96ZW4gPSB1c2VJbml0aWFsKHtcbiAgICAgICAgICBpbml0aWFsUHJlc2VuY2U6IGluaXRpYWxQcmVzZW5jZSxcbiAgICAgICAgICBpbml0aWFsU3RvcmFnZTogaW5pdGlhbFN0b3JhZ2UsXG4gICAgICAgICAgZGVmYXVsdFByZXNlbmNlOiBkZWZhdWx0UHJlc2VuY2UsXG4gICAgICAgICAgZGVmYXVsdFN0b3JhZ2VSb290OiBkZWZhdWx0U3RvcmFnZVJvb3QsXG4gICAgICAgIH0pLFxuICAgICAgICBbcm9vbSwgc2V0Um9vbV0gPSBSZWFjdC51c2VTdGF0ZSgoKSA9PlxuICAgICAgICAgIF9jbGllbnQuZW50ZXIocm9vbUlkLCB7XG4gICAgICAgICAgICBpbml0aWFsUHJlc2VuY2U6IGluaXRpYWxQcmVzZW5jZSxcbiAgICAgICAgICAgIGluaXRpYWxTdG9yYWdlOiBpbml0aWFsU3RvcmFnZSxcbiAgICAgICAgICAgIGRlZmF1bHRQcmVzZW5jZTogZGVmYXVsdFByZXNlbmNlLFxuICAgICAgICAgICAgZGVmYXVsdFN0b3JhZ2VSb290OiBkZWZhdWx0U3RvcmFnZVJvb3QsXG4gICAgICAgICAgICBET19OT1RfVVNFX3dpdGhvdXRDb25uZWN0aW5nOiBcInVuZGVmaW5lZFwiID09IHR5cGVvZiB3aW5kb3csXG4gICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFJlYWN0LnVzZUVmZmVjdChcbiAgICAgICAgICAoKSA9PiAoXG4gICAgICAgICAgICBzZXRSb29tKFxuICAgICAgICAgICAgICBfY2xpZW50LmVudGVyKHJvb21JZCwge1xuICAgICAgICAgICAgICAgIGluaXRpYWxQcmVzZW5jZTogZnJvemVuLmluaXRpYWxQcmVzZW5jZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsU3RvcmFnZTogZnJvemVuLmluaXRpYWxTdG9yYWdlLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRQcmVzZW5jZTogZnJvemVuLmRlZmF1bHRQcmVzZW5jZSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0U3RvcmFnZVJvb3Q6IGZyb3plbi5kZWZhdWx0U3RvcmFnZVJvb3QsXG4gICAgICAgICAgICAgICAgRE9fTk9UX1VTRV93aXRob3V0Q29ubmVjdGluZzogXCJ1bmRlZmluZWRcIiA9PSB0eXBlb2Ygd2luZG93LFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgX2NsaWVudC5sZWF2ZShyb29tSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICksXG4gICAgICAgICAgW19jbGllbnQsIHJvb21JZCwgZnJvemVuXVxuICAgICAgICApLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFJvb21Db250ZXh0LlByb3ZpZGVyLFxuICAgICAgICAgIHsgdmFsdWU6IHJvb20gfSxcbiAgICAgICAgICBwcm9wcy5jaGlsZHJlblxuICAgICAgICApXG4gICAgICApO1xuICAgIH0sXG4gICAgdXNlQmF0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB1c2VSb29tKCkuYmF0Y2g7XG4gICAgfSxcbiAgICB1c2VCcm9hZGNhc3RFdmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3Qgcm9vbSA9IHVzZVJvb20oKTtcbiAgICAgIHJldHVybiBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAgICAgKGV2ZW50LCBvcHRpb25zID0geyBzaG91bGRRdWV1ZUV2ZW50SWZOb3RSZWFkeTogITEgfSkgPT4ge1xuICAgICAgICAgIHJvb20uYnJvYWRjYXN0RXZlbnQoZXZlbnQsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBbcm9vbV1cbiAgICAgICk7XG4gICAgfSxcbiAgICB1c2VFcnJvckxpc3RlbmVyOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHJvb20gPSB1c2VSb29tKCksXG4gICAgICAgIHNhdmVkQ2FsbGJhY2sgPSBSZWFjdC51c2VSZWYoY2FsbGJhY2spO1xuICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2F2ZWRDYWxsYmFjay5jdXJyZW50ID0gY2FsbGJhY2s7XG4gICAgICB9KSxcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHJvb20uc3Vic2NyaWJlKFwiZXJyb3JcIiwgKGUpID0+XG4gICAgICAgICAgICBzYXZlZENhbGxiYWNrLmN1cnJlbnQoZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0sIFtyb29tXSk7XG4gICAgfSxcbiAgICB1c2VFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIGNvbnN0IHJvb20gPSB1c2VSb29tKCksXG4gICAgICAgIHNhdmVkQ2FsbGJhY2sgPSBSZWFjdC51c2VSZWYoY2FsbGJhY2spO1xuICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgc2F2ZWRDYWxsYmFjay5jdXJyZW50ID0gY2FsbGJhY2s7XG4gICAgICB9KSxcbiAgICAgICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHJvb20uc3Vic2NyaWJlKFwiZXZlbnRcIiwgKGV2ZW50RGF0YSkgPT4ge1xuICAgICAgICAgICAgc2F2ZWRDYWxsYmFjay5jdXJyZW50KGV2ZW50RGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgW3Jvb21dKTtcbiAgICB9LFxuICAgIHVzZUhpc3Rvcnk6IHVzZUhpc3RvcnksXG4gICAgdXNlTGlzdDogZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIHVzZUxpc3RfZGVwcmVjYXRlZChrZXkpO1xuICAgIH0sXG4gICAgdXNlTWFwOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gdXNlTWFwX2RlcHJlY2F0ZWQoa2V5KTtcbiAgICB9LFxuICAgIHVzZU15UHJlc2VuY2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IHJvb20gPSB1c2VSb29tKCksXG4gICAgICAgIHByZXNlbmNlID0gcm9vbS5nZXRQcmVzZW5jZSgpLFxuICAgICAgICByZXJlbmRlciA9IHVzZVJlcmVuZGVyKCk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gcm9vbS5zdWJzY3JpYmUoXCJteS1wcmVzZW5jZVwiLCByZXJlbmRlcik7XG4gICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgW3Jvb20sIHJlcmVuZGVyXSksXG4gICAgICAgIFtcbiAgICAgICAgICBwcmVzZW5jZSxcbiAgICAgICAgICBSZWFjdC51c2VDYWxsYmFjayhcbiAgICAgICAgICAgIChvdmVycmlkZXMsIG9wdGlvbnMpID0+IHJvb20udXBkYXRlUHJlc2VuY2Uob3ZlcnJpZGVzLCBvcHRpb25zKSxcbiAgICAgICAgICAgIFtyb29tXVxuICAgICAgICAgICksXG4gICAgICAgIF1cbiAgICAgICk7XG4gICAgfSxcbiAgICB1c2VPYmplY3Q6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiB1c2VPYmplY3RfZGVwcmVjYXRlZChrZXkpO1xuICAgIH0sXG4gICAgdXNlT3RoZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCByb29tID0gdXNlUm9vbSgpLFxuICAgICAgICByZXJlbmRlciA9IHVzZVJlcmVuZGVyKCk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gcm9vbS5zdWJzY3JpYmUoXCJvdGhlcnNcIiwgcmVyZW5kZXIpO1xuICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0sIFtyb29tLCByZXJlbmRlcl0pLFxuICAgICAgICByb29tLmdldE90aGVycygpXG4gICAgICApO1xuICAgIH0sXG4gICAgdXNlUmVkbzogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHVzZUhpc3RvcnkoKS5yZWRvO1xuICAgIH0sXG4gICAgdXNlUm9vbTogdXNlUm9vbSxcbiAgICB1c2VTZWxmOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCByb29tID0gdXNlUm9vbSgpLFxuICAgICAgICByZXJlbmRlciA9IHVzZVJlcmVuZGVyKCk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlUHJlc2VuY2UgPSByb29tLnN1YnNjcmliZShcIm15LXByZXNlbmNlXCIsIHJlcmVuZGVyKSxcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlQ29ubmVjdGlvbiA9IHJvb20uc3Vic2NyaWJlKFwiY29ubmVjdGlvblwiLCByZXJlbmRlcik7XG4gICAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlUHJlc2VuY2UoKSwgdW5zdWJzY3JpYmVDb25uZWN0aW9uKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSwgW3Jvb20sIHJlcmVuZGVyXSksXG4gICAgICAgIHJvb20uZ2V0U2VsZigpXG4gICAgICApO1xuICAgIH0sXG4gICAgdXNlU3RvcmFnZTogdXNlU3RvcmFnZSxcbiAgICB1c2VVbmRvOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdXNlSGlzdG9yeSgpLnVuZG87XG4gICAgfSxcbiAgICB1c2VVcGRhdGVNeVByZXNlbmNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCByb29tID0gdXNlUm9vbSgpO1xuICAgICAgcmV0dXJuIFJlYWN0LnVzZUNhbGxiYWNrKFxuICAgICAgICAob3ZlcnJpZGVzLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgcm9vbS51cGRhdGVQcmVzZW5jZShvdmVycmlkZXMsIG9wdGlvbnMpO1xuICAgICAgICB9LFxuICAgICAgICBbcm9vbV1cbiAgICAgICk7XG4gICAgfSxcbiAgICBSb29tQ29udGV4dDogUm9vbUNvbnRleHQsXG4gICAgdXNlTGlzdF9kZXByZWNhdGVkOiB1c2VMaXN0X2RlcHJlY2F0ZWQsXG4gICAgdXNlTWFwX2RlcHJlY2F0ZWQ6IHVzZU1hcF9kZXByZWNhdGVkLFxuICAgIHVzZU9iamVjdF9kZXByZWNhdGVkOiB1c2VPYmplY3RfZGVwcmVjYXRlZCxcbiAgfTtcbn1cbmNvbnN0IF9ob29rcyA9IGNyZWF0ZVJvb21Db250ZXh0KFwiX19sZWdhY3lcIik7XG5mdW5jdGlvbiBSb29tUHJvdmlkZXIocHJvcHMpIHtcbiAgcmV0dXJuIChcbiAgICBkZXByZWNhdGUoXG4gICAgICBcIlBsZWFzZSB1c2UgYGNyZWF0ZVJvb21Db250ZXh0KClgIGluc3RlYWQgb2YgaW1wb3J0aW5nIGBSb29tUHJvdmlkZXJgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MuUm9vbVByb3ZpZGVyKHByb3BzKVxuICApO1xufVxuZnVuY3Rpb24gdXNlQmF0Y2goKSB7XG4gIHJldHVybiAoXG4gICAgZGVwcmVjYXRlKFxuICAgICAgXCJQbGVhc2UgdXNlIGBjcmVhdGVSb29tQ29udGV4dCgpYCBpbnN0ZWFkIG9mIGltcG9ydGluZyBgdXNlQmF0Y2hgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlQmF0Y2goKVxuICApO1xufVxuZnVuY3Rpb24gdXNlQnJvYWRjYXN0RXZlbnQoKSB7XG4gIHJldHVybiAoXG4gICAgZGVwcmVjYXRlKFxuICAgICAgXCJQbGVhc2UgdXNlIGBjcmVhdGVSb29tQ29udGV4dCgpYCBpbnN0ZWFkIG9mIGltcG9ydGluZyBgdXNlQnJvYWRjYXN0RXZlbnRgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlQnJvYWRjYXN0RXZlbnQoKVxuICApO1xufVxuZnVuY3Rpb24gdXNlRXJyb3JMaXN0ZW5lcihjYWxsYmFjaykge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZUVycm9yTGlzdGVuZXJgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlRXJyb3JMaXN0ZW5lcihjYWxsYmFjaylcbiAgKTtcbn1cbmZ1bmN0aW9uIHVzZUV2ZW50TGlzdGVuZXIoY2FsbGJhY2spIHtcbiAgcmV0dXJuIChcbiAgICBkZXByZWNhdGUoXG4gICAgICBcIlBsZWFzZSB1c2UgYGNyZWF0ZVJvb21Db250ZXh0KClgIGluc3RlYWQgb2YgaW1wb3J0aW5nIGB1c2VFdmVudExpc3RlbmVyYCBmcm9tIGBAbGl2ZWJsb2Nrcy9yZWFjdGAgZGlyZWN0bHkuIFNlZSBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvdXBncmFkaW5nI3VwZ3JhZGluZy1mcm9tLTAtMTYtdG8tMC0xNyBmb3IgZGV0YWlscy5cIlxuICAgICksXG4gICAgX2hvb2tzLnVzZUV2ZW50TGlzdGVuZXIoY2FsbGJhY2spXG4gICk7XG59XG5mdW5jdGlvbiB1c2VIaXN0b3J5KCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZUhpc3RvcnlgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlSGlzdG9yeSgpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VNeVByZXNlbmNlKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZU15UHJlc2VuY2VgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlTXlQcmVzZW5jZSgpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VPdGhlcnMoKSB7XG4gIHJldHVybiAoXG4gICAgZGVwcmVjYXRlKFxuICAgICAgXCJQbGVhc2UgdXNlIGBjcmVhdGVSb29tQ29udGV4dCgpYCBpbnN0ZWFkIG9mIGltcG9ydGluZyBgdXNlT3RoZXJzYCBmcm9tIGBAbGl2ZWJsb2Nrcy9yZWFjdGAgZGlyZWN0bHkuIFNlZSBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvdXBncmFkaW5nI3VwZ3JhZGluZy1mcm9tLTAtMTYtdG8tMC0xNyBmb3IgZGV0YWlscy5cIlxuICAgICksXG4gICAgX2hvb2tzLnVzZU90aGVycygpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VSZWRvKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVJlZG9gIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlUmVkbygpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VSb29tKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVJvb21gIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlUm9vbSgpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VTZWxmKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVNlbGZgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlU2VsZigpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VTdG9yYWdlKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVN0b3JhZ2VgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlU3RvcmFnZSgpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VVbmRvKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVVuZG9gIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlVW5kbygpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VVcGRhdGVNeVByZXNlbmNlKCkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZVVwZGF0ZU15UHJlc2VuY2VgIGZyb20gYEBsaXZlYmxvY2tzL3JlYWN0YCBkaXJlY3RseS4gU2VlIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2d1aWRlcy91cGdyYWRpbmcjdXBncmFkaW5nLWZyb20tMC0xNi10by0wLTE3IGZvciBkZXRhaWxzLlwiXG4gICAgKSxcbiAgICBfaG9va3MudXNlVXBkYXRlTXlQcmVzZW5jZSgpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VMaXN0KGtleSwgaXRlbXMpIHtcbiAgcmV0dXJuIChcbiAgICBkZXByZWNhdGUoXG4gICAgICBcIlBsZWFzZSB1c2UgYGNyZWF0ZVJvb21Db250ZXh0KClgIGluc3RlYWQgb2YgaW1wb3J0aW5nIGB1c2VMaXN0YCBmcm9tIGBAbGl2ZWJsb2Nrcy9yZWFjdGAgZGlyZWN0bHkuIFNlZSBodHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvdXBncmFkaW5nI3VwZ3JhZGluZy1mcm9tLTAtMTYtdG8tMC0xNyBmb3IgZGV0YWlscy5cIlxuICAgICksXG4gICAgX2hvb2tzLnVzZUxpc3RfZGVwcmVjYXRlZChrZXksIGl0ZW1zKVxuICApO1xufVxuZnVuY3Rpb24gdXNlTWFwKGtleSwgZW50cmllcykge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZU1hcGAgZnJvbSBgQGxpdmVibG9ja3MvcmVhY3RgIGRpcmVjdGx5LiBTZWUgaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvZ3VpZGVzL3VwZ3JhZGluZyN1cGdyYWRpbmctZnJvbS0wLTE2LXRvLTAtMTcgZm9yIGRldGFpbHMuXCJcbiAgICApLFxuICAgIF9ob29rcy51c2VNYXBfZGVwcmVjYXRlZChrZXksIGVudHJpZXMpXG4gICk7XG59XG5mdW5jdGlvbiB1c2VPYmplY3Qoa2V5LCBpbml0aWFsRGF0YSkge1xuICByZXR1cm4gKFxuICAgIGRlcHJlY2F0ZShcbiAgICAgIFwiUGxlYXNlIHVzZSBgY3JlYXRlUm9vbUNvbnRleHQoKWAgaW5zdGVhZCBvZiBpbXBvcnRpbmcgYHVzZU9iamVjdGAgZnJvbSBgQGxpdmVibG9ja3MvcmVhY3RgIGRpcmVjdGx5LiBTZWUgaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvZ3VpZGVzL3VwZ3JhZGluZyN1cGdyYWRpbmctZnJvbS0wLTE2LXRvLTAtMTcgZm9yIGRldGFpbHMuXCJcbiAgICApLFxuICAgIF9ob29rcy51c2VPYmplY3RfZGVwcmVjYXRlZChrZXksIGluaXRpYWxEYXRhKVxuICApO1xufVxuZXhwb3J0IHtcbiAgTGl2ZWJsb2Nrc1Byb3ZpZGVyLFxuICBSb29tUHJvdmlkZXIsXG4gIGNyZWF0ZVJvb21Db250ZXh0LFxuICB1c2VCYXRjaCxcbiAgdXNlQnJvYWRjYXN0RXZlbnQsXG4gIHVzZUNsaWVudCxcbiAgdXNlRXJyb3JMaXN0ZW5lcixcbiAgdXNlRXZlbnRMaXN0ZW5lcixcbiAgdXNlSGlzdG9yeSxcbiAgdXNlTGlzdCxcbiAgdXNlTWFwLFxuICB1c2VNeVByZXNlbmNlLFxuICB1c2VPYmplY3QsXG4gIHVzZU90aGVycyxcbiAgdXNlUmVkbyxcbiAgdXNlUm9vbSxcbiAgdXNlU2VsZixcbiAgdXNlU3RvcmFnZSxcbiAgdXNlVW5kbyxcbiAgdXNlVXBkYXRlTXlQcmVzZW5jZSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/@liveblocks/react/index.mjs\n");

/***/ }),

/***/ "./data/lemonstre.json":
/*!*****************************!*\
  !*** ./data/lemonstre.json ***!
  \*****************************/
/***/ (function(module) {

"use strict";
module.exports = JSON.parse('{"script":{"type":"play","title":"Le Monstre","lang":"fr-FR","cast":[{"id":"nob","displayName":"Nob"},{"id":"tim","displayName":"Tim"},{"id":"lil","displayName":"Lil"},{"id":"hommeVenerable","displayName":"Homme Vénérable"},{"id":"lesFemmes","displayName":"Les Femmes"},{"id":"lesHommes","displayName":"Les Hommes"},{"id":"unHomme","displayName":"Un Homme"},{"id":"homme1","displayName":"Homme 1"},{"id":"homme2","displayName":"Homme 2"},{"id":"homme3","displayName":"Homme 3"},{"id":"tous","displayName":"Tous"}],"sections":[{"number":"1","lines":[{"characterId":"nob","text":"Tim. Tim. Tim. Réveille-toi. Il y a un animal énorme dans le grand piège, Tim. Un animal bizarre."},{"characterId":"tim","text":"Toi-même tu es un animal bizarre, Nob. Il est vraiment trop tôt pour que je me lève."},{"characterId":"nob","text":"Non, Tim, réellement, j\'aimerais que tu viennes et que tu le regardes. Tu seras très étonné. Tu n\'as jamais vu un animal aussi grand et aussi horrible."},{"characterId":"tim","text":"Un animal horrible? Mais quelle sorte d\'animal, Nob? Cela ressemble certainement à quelque chose."},{"characterId":"nob","text":"Non, justement, Tim. Je t\'assure que cela ne ressemble à rien, à rien de ce que nous avons pu voir jusqu\'à présent."},{"characterId":"tim","text":"Mais cela peut attendre le matin, Nob, cela peut certainement attendre le matin."},{"characterId":"nob","text":"Non, Tim, je ne pense pas. Je ne sais pas que faire et... j\'ai peur."},{"characterId":"tim","text":"Peur, Nob? Toi? Tu as peur?"},{"characterId":"nob","text":"Oui, j\'ai peur. Viens donc, Tim. Nous déciderons ensemble ensuite de ce qu\'il conviendra de faire. N\'es-tu pas mon meilleur ami, Tim? J\'ai besoin de toi."},{"characterId":"tim","text":"Cela me semble sérieux, Nob. C\'est bon. Je te suis. Mais qu\'entend-on? Quel est ce bruit bizarre?"},{"characterId":"nob","text":"C\'est l\'animal, Tim. C\'est la respiration de l\'animal que tu entends.."},{"characterId":"tim","text":"Ce n\'est pas possible! D\'aussi loin?"},{"characterId":"nob","text":"Oui, Tim. N\'est-ce pas inquiétant?"},{"characterId":"tim","text":"Allons voir."},{"characterId":"nob","text":"Je ne veux pas, je n\'aimerais pas le voir encore une fois. Va, Tim. Rends-toi compte par toi-même."},{"characterId":"tim","text":"C\'est de plus en plus étrange."},{"characterId":"nob","text":"Tu l\'as vu, Tim? Tu es pâle."},{"characterId":"tim","text":"Réveillons tout le monde. Toi, va chercher l\'Homme Vénérable. C\'est lui qui décidera de la chose à faire. Moi, je prendrai le tambour."},{"characterId":"lesFemmes","text":"Malheur, malheur. La paix est finie. Quel danger nous menace Malheur, malheur. Que va-t-il arriver. A nos enfants. Si gracieux. Si fragiles. Si innocents. Malheur, malheur. Que va-t-il arriver À nos hommes. Si forts. Si courageux. Si beaux. Malheur, malheur. Un grand danger nous menace."},{"characterId":"hommeVenerable","text":"Parle!"},{"characterId":"nob","text":"J\'étais de garde cette nuit au grand piège. Je dormais."},{"characterId":"hommeVenerable","text":"C\'est permis."},{"characterId":"nob","text":"Le bruit des chaînes et des cloches m\'a réveillé. Je suis allé voir. C\'est... c\'est un animal que l\'on n\'a jamais vu par ici. Il est énorme, il ne ressemble à rien, et il s\'en dégage une odeur répugnante."},{"characterId":"tim","text":"Une odeur insoutenable. Cela m\'a soulevé le cœur."},{"characterId":"hommeVenerable","text":"Est-il mort?"},{"characterId":"nob","text":"Non. Il respire. On peut l\'entendre d\'ici."},{"characterId":"hommeVenerable","text":"Écoutons!"},{"characterId":"hommeVenerable","text":"Vivant! Malgré les piques aiguisées au fond du piège! Femmes, rentrez chez vous. Hommes, suivez-moi!"},{"characterId":"lesHommes","text":"Nous sommes les hommes. Au grand courage. Nous défendrons nos femmes. Nos enfants. Nos maisons. Contre tout danger. Contre toute menace. Rien ne nous fait peur. Nous vaincrons. Nous sommes les hommes."},{"characterId":"lesHommes","text":"Qu\'il est laid! Puant! Visqueux! Répugnant! Monstrueux! Abominable!"},{"characterId":"hommeVenerable","text":"Levez vos lances!"},{"characterId":"hommeVenerable","text":"Retirez vos lances!"},{"characterId":"lesHommes","text":"Pas de sang! Pas de sang! Pas de sang!"},{"characterId":"hommeVenerable","text":"Vos arcs! Vos flèches empoisonnées!"},{"characterId":"hommeVenerable","text":"Des pierres!"},{"characterId":"hommeVenerable","text":"Prions!"},{"characterId":"tous","text":"Dieu unique de notre monde unique. Dieu éternel de notre monde éternel. Viens à notre aide. Nous sommes devenus faibles et vulnérables. Nous nous prosternons dans la poussière. Relève tes enfants. Notre douleur est grande. Oh! nous avons besoin de Toi. Dieu unique de notre monde unique. Dieu éternel de notre monde éternel."}]},{"number":"2","lines":[{"characterId":"nob","text":"Tout a changé ici. L\'air, les gens, tout, toute la vie. J\'ai peur, Lil, je sens qu\'un grand danger nous menace."},{"characterId":"lil","text":"Quel danger? Au contraire, la vie devient de plus en plus belle."},{"characterId":"nob","text":"Le Monstre grandit, Lil, il grandit sans cesse, tu le sais bien."},{"characterId":"lil","text":"Mais qu\'est-ce que cela peut faire? Il grandit. Il y a assez de place."},{"characterId":"nob","text":"De la place, peut-être, il y en a encore assez, oui. Mais le Monstre mange de plus en plus, il sent de plus en plus fort, et il respire de plus en plus bruyamment. Et... il mange n\'importe quoi, même des hommes."},{"characterId":"lil","text":"Oh, tu es agaçant! Il ne l\'a pas fait exprès. C\'était... ce n\'étaient que des imprudents qui se sont trouvés juste devant sa bouche. Il a refermé sa bouche, c\'est tout. Il n\'est certainement pas méchant. Et il ne peut même pas se déplacer."},{"characterId":"nob","text":"De temps à autre il écrase un enfant sous ses pattes..."},{"characterId":"lil","text":"Il est lourd et maladroit, c\'est tout. Il ne le fait pas par méchanceté. Les mères n\'ont qu\'à surveiller leurs enfants un peu mieux."},{"characterId":"nob","text":"C\'est curieux, comme tout le monde le défend. Même toi."},{"characterId":"lil","text":"Oui, je le défends, Nob, car je l\'aime. Tout le monde l\'aime, sauf toi. Parce que toi, tu n\'as jamais respiré le parfum de ses fleurs merveilleuses."},{"characterId":"nob","text":"J\'en ai entendu parler. On dit que quand on respire le parfum de ses fleurs, de ces fleurs qui ont poussé sur son dos hideux, oui, il paraît, qu\'en respirant ces fleurs, on ressent un étrange bonheur, une félicité inconnue..."},{"characterId":"lil","text":"Oui, Nob. Et toute peur disparaît, et toutes les angoisses et toutes les tristesses. Et même les douleurs physiques. Les vieux oublient qu\'ils sont vieux, et les malades oublient leurs maladies. Il guérit tous les maux, il guérit les âmes."},{"characterId":"nob","text":"Pour un moment, peut-être, pour un certain temps. Mais le Monstre grandit, Lil, n\'oublie pas qu\'il grandit très vite. Il a déjà pris la place de notre ancien village. Nous avons dû reconstruire nos maisons ailleurs, replanter nos jardins plus loin. Et, dans quelques mois, il faudra recommencer."},{"characterId":"lil","text":"Il va certainement arrêter de grandir un jour, non?"},{"characterId":"nob","text":"Comment le sais-tu?"},{"characterId":"lil","text":"Mais... cela ne peut pas être autrement."},{"characterId":"nob","text":"Pourquoi pas?"},{"characterId":"lil","text":"Parce que... parce que... il n\'y aura plus de place... pour nous."},{"characterId":"lil","text":"Tu me fais peur, Nob. Tu vois tout en noir. Tu verras, tout va s\'arranger pour le mieux."}]},{"number":"4","lines":[{"characterId":"nob","text":"J\'aimerais te parler, Homme Vénérable."},{"characterId":"hommeVenerable","text":"Approche-toi, mon fils. Parle."},{"characterId":"nob","text":"Il y a un certain temps, j\'ai fait un rêve, mon père, que je ne parviens pas à oublier."},{"characterId":"hommeVenerable","text":"Raconte-le-moi, mon fils."},{"characterId":"nob","text":"D\'abord, c\'était un cauchemar. Il y avait des monstres, des petits monstres qui sont nés de l\'affreux animal au dos fleuri. Des hommes m\'ont mis dans un cercueil et ils ont lancé les monstres sur moi, pour qu\'ils se nourrissent de mon corps. Mais je me suis libéré, j\'étais devenu un grand oiseau, j\'avais des ailes et je me suis envolé vers un autre monde."},{"characterId":"hommeVenerable","text":"Il n\'existe pas d\'autre monde, fils."},{"characterId":"nob","text":"Le monde... après la vie?"},{"characterId":"hommeVenerable","text":"La mort?"},{"characterId":"nob","text":"La mort, puis l\'autre monde?"},{"characterId":"nob","text":"Pourquoi ne me réponds-tu pas, Homme Vénérable?"},{"characterId":"hommeVenerable","text":"Qu\'attends-tu de moi?"},{"characterId":"nob","text":"J\'aimerais partir. Comme dans mon rêve. Dans ce monde qui attend nos âmes après la vie. Dans ce monde dont tu nous as tant parlé..."},{"characterId":"hommeVenerable","text":"Pourquoi? Pourquoi veux-tu partir, pourquoi veux-tu mourir, mon fils?"},{"characterId":"nob","text":"À cause du Monstre. Je le hais, je le hais aussi fort que le premier jour."},{"characterId":"hommeVenerable","text":"Tout le monde l\'aime, pourtant."},{"characterId":"nob","text":"Toi aussi, mon père?"},{"characterId":"hommeVenerable","text":"Non, pas moi. Je ne l\'aime pas. Je sais qu\'il causera notre perte, il nous détruira."},{"characterId":"nob","text":"Alors, pourquoi n\'agis-tu pas? Pourquoi ne fais-tu pas quelque chose?"},{"characterId":"hommeVenerable","text":"Mais que faire, mon fils? Nous avons tout essayé au début. Et, à présent, les gens sont tous pour lui. Je suis seul et vieux."},{"characterId":"nob","text":"Non, tu n\'es pas seul. Je suis avec toi."},{"characterId":"hommeVenerable","text":"Tu veux partir..."},{"characterId":"nob","text":"Je ne peux plus vivre ici. Je veux vivre dans le monde qui suit la mort. Ce monde dont tu nous as tant parlé, ce monde, mon père, existe-t-il?"},{"characterId":"nob","text":"Réponds, mon père. Je dois le savoir. J\'ai le droit de le savoir."},{"characterId":"hommeVenerable","text":"Oui, tu as le droit de le savoir. Ce monde existe, mon fils, mais, je le crains, dans ce monde, il n\'y a rien d\'autre que la nuit."},{"characterId":"nob","text":"Alors, mon rêve... Que signifie-t-il, mon rêve?"},{"characterId":"hommeVenerable","text":"Ton rêve signifie que tu retrouveras ce monde de lumière, tu le retrouveras non pas après la mort, mais ici, dans notre monde. Ton rêve signifie que tu vaincras le Monstre.."},{"characterId":"nob","text":"Moi? Pourquoi moi?"},{"characterId":"hommeVenerable","text":"Dis-moi, mon fils, as-tu déjà respiré le parfum de ses fleurs merveilleuses?"},{"characterId":"nob","text":"Jamais, mon père."},{"characterId":"hommeVenerable","text":"C\'est cela, ta force. Tu es le seul avec moi qui ne l\'as pas fait."},{"characterId":"nob","text":"Et je ne le ferai jamais, parce que je sais que ce serait ma perte, que je me mettrais à l\'aimer comme les autres, et je serais vaincu."},{"characterId":"hommeVenerable","text":"C\'est toi qui vaincras, mon fils, j\'en ai la certitude. Tu remplis mon âme d\'espoir, je ne me sens plus seul. Avec ton courage et avec ma sagesse nous serons plus forts que le Monstre."},{"characterId":"nob","text":"Mais que pouvons-nous contre lui?"},{"characterId":"hommeVenerable","text":"Rentre chez toi en paix, mon fils. Je vais réfléchir. Quand l\'heure sera venue, je t\'appellerai."},{"characterId":"nob","text":"J\'attendrai ton appel avec impatience. Tu m\'as rendu le courage, tu m\'as rendu la vie."},{"characterId":"nob","text":"Dans mes yeux se reflètent, Les couleurs du ciel, Dans mes cheveux jouent, Les doigts de la brise, Dans mon cœur renaissent, La joie et la paix, Les tourments de mon âme, Cèdent à l\'espoir, La terre sera rendue, Aux hommes de notre monde, Ils y feront pousser, Des fleurs pures et belles."}]},{"number":"5","lines":[{"characterId":"hommeVenerable","text":"Je vous ai choisis pour votre jeunesse et votre courage. J\'ai pris une décision importante. Avant de vous en parler, je veux savoir si je peux compter sur vous sans restriction."},{"characterId":"tous","text":"Oui, Homme Vénérable."},{"characterId":"hommeVenerable","text":"Bien. Je vous permets de vous asseoir, car ce sera long. Vous le savez tous, le Monstre grandit à une vitesse effrayante. Nous devons encore une fois rebâtir les maisons ailleurs et replanter nos jardins, car il a pris la place de notre deuxième village. Cela ne peut plus continuer ainsi. Si le Monstre n\'arrête pas de grandir, nous ne saurons plus où aller. Nous n\'aurons plus de place pour vivre."},{"characterId":"tous","text":"Plus de place... pour vivre!"},{"characterId":"hommeVenerable","text":"Il nous faut donc agir et empêcher le Monstre de grandir."},{"characterId":"tous","text":"L\'empêcher de grandir!"},{"characterId":"hommeVenerable","text":"Par l\'observation et par la réflexion, j\'ai trouvé la seule solution possible."},{"characterId":"tous","text":"Il l\'a trouvée!"},{"characterId":"hommeVenerable","text":"Le seul moyen d\'empêcher le Monstre de grandir, c\'est de le priver de sa nourriture préférée qui est la chair humaine."},{"characterId":"tous","text":"La chair humaine!"},{"characterId":"hommeVenerable","text":"Oui. J\'ai remarqué qu\'après avoir englouti un être humain qui se trouvait devant sa bouche, le Monstre grandissait immédiatement d\'une façon incroyable. Par contre, quand il n\'avait que sa nourriture habituelle pendant un certain temps, non seulement il gardait sa taille normale, mais il rapetissait visiblement. Ma conclusion est la suivante : si nous privons le Monstre de chair humaine et de toute nourriture pendant un laps de temps suffisamment long, sa taille se réduira de plus en plus, jusqu\'à la disparition totale."},{"characterId":"tous","text":"Disparition totale!"},{"characterId":"hommeVenerable","text":"Pour cela, il faut empêcher les gens de s\'en approcher. Je sais que cela ne plaira pas à tout le monde. Les gens sont habitués au Monstre, ils en ont besoin. Ils aiment respirer le poison de ses fleurs."},{"characterId":"unHomme","text":"Le poison?"},{"characterId":"hommeVenerable","text":"Oui, c\'est un poison qui engourdit leur esprit, qui leur procure une sensation de bonheur."},{"characterId":"unHomme","text":"Un immense bonheur!"},{"characterId":"hommeVenerable","text":"Une illusion de bonheur, très peu durable. Même parmi vous, il y en a certainement qui ne voudraient plus s\'en passer."},{"characterId":"tous","text":"Nous en passer? Pour toujours?"},{"characterId":"hommeVenerable","text":"Oui, pour toujours. Il nous faut choisir. La mort pour tous, ou la disparition du Monstre."},{"characterId":"tous","text":"Pas la mort! Pas la mort!"},{"characterId":"hommeVenerable","text":"Ceux qui sont pour le Monstre peuvent partir. Ils peuvent encore retourner près de lui, respirer le venin de ses fleurs, jusqu\'au vertige total qui les fera tomber devant sa bouche entrouverte. Allez le nourrir de votre corps! Allez le faire gonfler encore et encore!"},{"characterId":"nob","text":"Tu penses donc, Homme Vénérable, que c\'est le parfum des fleurs qui fait tomber les hommes inanimés devant la bouche du Monstre?"},{"characterId":"hommeVenerable","text":"Certainement. C\'est une ruse du Monstre qui ne peut pas bouger, qui ne peut pas se déplacer. C\'est ainsi qu\'il se procure sa nourriture préférée, la seule qui lui convienne véritablement."},{"characterId":"nob","text":"Vous l\'entendez? Vous comprenez? C\'est votre corps qu\'il veut. L\'immense bonheur qu\'il vous donne, c\'est pour vous attirer dans sa bouche immonde."},{"characterId":"hommeVenerable","text":"Nous devons choisir. Que ceux qui veulent partir, partent."},{"characterId":"hommeVenerable","text":"Vous restez tous. Merci. Je vais vous exposer mes plans. Nous devons faire vite, car le moment est propice. Les gens doivent de nouveau rebâtir leurs maisons ailleurs, ils sont mal disposés envers le Monstre. Ils commencent à avoir peur. La première chose à faire est de construire un mur de pierre autour du Monstre. Que toute la population y participe. On leur dira que c\'est pour empêcher le Monstre de grandir. Ils seront d\'accord. Seconde chose: ramassez toutes les armes, jetez-les dans le précipice."},{"characterId":"tous","text":"Désarmer les hommes?"},{"characterId":"hommeVenerable","text":"Oui. Par la force, ou par la ruse. Les désarmer tous. Sauf vous. Vous garderez vos armes, car vous en aurez besoin. Vous en aurez besoin, car à l\'avenir vous devrez tirer sur quiconque s\'approchera du mur que nous aurons bâti autour du Monstre. Tirer sans pitié, sans considération. Sur vos parents, sur vos amis, sans distinction."},{"characterId":"tous","text":"Sans distinction!"},{"characterId":"hommeVenerable","text":"Même parmi vous, ceux qui faibliront, ceux qui voudront traverser le mur... Les autres doivent les tuer sans hésitation."},{"characterId":"tous","text":"Sans hésitation!"},{"characterId":"hommeVenerable","text":"C\'est cruel, je le sais. Mais autrement nous sommes tous perdus. M\'avez-vous compris?"},{"characterId":"tous","text":"Oui, Homme Vénérable."},{"characterId":"hommeVenerable","text":"Êtes-vous prêts à accomplir ce travail sanglant pour sauver notre monde?"},{"characterId":"tous","text":"Nous sommes prêts. Nous tuerons. Nous tuerons. Sans faiblesse. Sans pitié. Nous tuerons. Pour sauver notre monde. Nous tuerons des hommes. Pour que d\'autres vivent. Pour que le Monstre meure. Sans faiblesse. Sans pitié. Nous tuerons."}]},{"number":"6","lines":[{"characterId":"nob","text":"Arrête-toi, homme! N\'y va pas!"},{"characterId":"unHomme","text":"Aie pitié."},{"characterId":"nob","text":"De qui?"},{"characterId":"unHomme","text":"De moi."},{"characterId":"nob","text":"Je ne te connais pas. J\'ai déjà tué mes parents. La jeune fille que j\'aimais, Lil, je l\'ai tuée aussi. J\'ai tué mon meilleur ami, Tim. J\'ai tué des enfants. Pourquoi aurais-je pitié de toi?"},{"characterId":"unHomme","text":"Je sais. Tu es implacable. Tu as tué aussi tes amis de garde."},{"characterId":"nob","text":"Ils faiblissaient. Ils voulaient s\'approcher du Monstre. Je les ai tués. Tous. Pour que le Monstre disparaisse. Et j\'ai réussi. Dans quelques jours, il ne restera plus rien de lui."},{"characterId":"unHomme","text":"A quoi cela servira-t-il? Au village non plus, il ne reste plus personne."},{"characterId":"nob","text":"Que dis-tu?"},{"characterId":"unHomme","text":"Je suis le dernier habitant du village. Tes camarades et toi vous avez tué tout le monde."},{"characterId":"nob","text":"Tous?"},{"characterId":"unHomme","text":"Il reste l\'Homme Vénérable... et toi... et moi. Mais je ne veux plus vivre. A quoi sert-il de vivre dans la solitude, sans bonheur!"},{"characterId":"nob","text":"Bonheur?"},{"characterId":"unHomme","text":"Toi, tu ne l\'as jamais connu. Le bonheur qui venait du parfum des fleurs...."},{"characterId":"nob","text":"Non, je ne l\'ai jamais connu."},{"characterId":"unHomme","text":"C\'est pour cela que tu es sans pitié. Tu ne connais que la haine. Tu es rempli de haine."},{"characterId":"nob","text":"Sans la haine, je n\'aurais pas pu faire ce que j\'ai fait. Il fallait que j\'aie cette haine de lui, pour le vaincre."},{"characterId":"unHomme","text":"Et tu es devenu toi-même un monstre. Tu ne fais que tuer depuis des mois. Tu as exterminé ton peuple."},{"characterId":"nob","text":"J\'ai sauvé notre monde."},{"characterId":"unHomme","text":"Tu l\'as sauvé pour toi seul. Il est à toi, maintenant, le monde! Et que comptes-tu en faire?"},{"characterId":"nob","text":"Tu es encore en vie, toi aussi. Pars, ou je te tue!"},{"characterId":"unHomme","text":"Je ne te demande pas de me laisser vivre, puisque je suis venu ici pour mourir. J\'ai perdu tous ceux que j\'aimais. Je voudrais les rejoindre dans la mort. Mais laisse-moi mourir auprès du Monstre. Laisse-moi respirer encore une fois le parfum de ses fleurs. Laisse-moi connaître le bonheur une dernière fois."},{"characterId":"nob","text":"Et le Monstre te mangera et il grandira de nouveau. Et on devrait attendre encore des semaines ou des mois pour qu\'il disparaisse. Alors que sa disparition est maintenant si proche."},{"characterId":"unHomme","text":"Qu\'est-ce que cela peut faire à présent? Quelques semaines ou quelques mois de plus? En quoi cela peut-il changer quelque chose? Pour qui? Pour quoi?"},{"characterId":"nob","text":"Pour moi. Je veux que mon travail soit fini. Que le Monstre disparaisse. Je n\'en peux plus. J\'ai trop tué. J\'ai trop attendu. Arrête, te dis-je! Ne t\'approche pas! Ne t\'approche pas du mur! Je tire!"},{"characterId":"nob","text":"J\'ai gagné! J\'ai gagné! Le Monstre n\'est plus!"},{"characterId":"hommeVenerable","text":"Approche-toi, Nob. Je vais mourir."},{"characterId":"nob","text":"C\'est fini, mon père."},{"characterId":"hommeVenerable","text":"Oui, c\'est fini. Ton rêve s\'est réalisé, Nob. Tu vivras dans un monde sans monstre. Seul. Puis tu mourras. Seul. Seul, Nob, tu entends? Le Monstre a gagné, Nob. Il nous a tués. Il a tué... la vie. Je me suis trompé, peut-être. Aurais-je dû laisser mourir les gens dans le bonheur illusoire des fleurs? Peut être. Je ne sais plus. C\'est trop tard. Je me suis trompé, oui, mais c\'est trop tard."},{"characterId":"nob","text":"J\'ai vaincu le Monstre! J\'ai gagné! C\'est moi qui ai gagné!"},{"characterId":"nob","text":"Venez, venez tous! J\'ai gagné, j\'ai vaincu le Monstre! On vivra de nouveau dans la joie, dans la paix. Venez tous! On va faire une grande fête. Venez mes amis, jeunes et vieux! Nous chanterons, nous danserons. Lil, où es-tu? Viens danser, Lil! Tim, où es-tu? Viens chanter avec moi! Venez tous! Venez!"},{"characterId":"nob","text":"Mais où sont-ils tous? Où sont-ils partis? Je ne comprends pas. Où sont Lil, Tim, les autres? Je ne comprends pas. Voici ma guitare. Voici ma guitare."},{"characterId":"nob","text":"Cela s\'est passé ici ou ailleurs. Quelque part. Une fois. Aujourd\'hui hier ou demain."}]}]}}');

/***/ }),

/***/ "./data/romeoandjuliet.json":
/*!**********************************!*\
  !*** ./data/romeoandjuliet.json ***!
  \**********************************/
/***/ (function(module) {

"use strict";
module.exports = JSON.parse('{"script":{"type":"play","title":"Romeo & Juliet","lang":"en-GB","cast":[{"id":"romeo","displayName":"Romeo"},{"id":"juliet","displayName":"Juliet"},{"id":"nurse","displayName":"Nurse"}],"sections":[{"number":"2","lines":[{"characterId":"romeo","text":"But, soft! what light through yonder window breaks? It is the east, and Juliet is the sun. Arise, fair sun, and kill the envious moon, Who is already sick and pale with grief, That thou her maid art far more fair than she: Be not her maid, since she is envious; Her vestal livery is but sick and green And none but fools do wear it; cast it off. It is my lady, O, it is my love! O, that she knew she were! She speaks yet she says nothing: what of that? Her eye discourses; I will answer it. I am too bold, \'tis not to me she speaks: Two of the fairest stars in all the heaven, Having some business, do entreat her eyes To twinkle in their spheres till they return. What if her eyes were there, they in her head? The brightness of her cheek would shame those stars, As daylight doth a lamp; her eyes in heaven Would through the airy region stream so bright That birds would sing and think it were not night. See, how she leans her cheek upon her hand! O, that I were a glove upon that hand, That I might touch that cheek!"},{"characterId":"juliet","text":"Ay me!"},{"characterId":"romeo","text":"She speaks: O, speak again, bright angel! for thou art As glorious to this night, being o\'er my head As is a winged messenger of heaven Unto the white-upturned wondering eyes Of mortals that fall back to gaze on him When he bestrides the lazy-pacing clouds And sails upon the bosom of the air."},{"characterId":"juliet","text":"O Romeo, Romeo! wherefore art thou Romeo? Deny thy father and refuse thy name; Or, if thou wilt not, be but sworn my love, And I\'ll no longer be a Capulet."},{"characterId":"romeo","text":"Shall I hear more, or shall I speak at this?"},{"characterId":"juliet","text":"\'Tis but thy name that is my enemy; Thou art thyself, though not a Montague. What\'s Montague? it is nor hand, nor foot, Nor arm, nor face, nor any other part Belonging to a man. O, be some other name! What\'s in a name? that which we call a rose By any other name would smell as sweet; So Romeo would, were he not Romeo call\'d, Retain that dear perfection which he owes Without that title. Romeo, doff thy name, And for that name which is no part of thee Take all myself."},{"characterId":"romeo","text":"I take thee at thy word: Call me but love, and I\'ll be new baptized; Henceforth I never will be Romeo."},{"characterId":"juliet","text":"What man art thou that thus bescreen\'d in night So stumblest on my counsel?"},{"characterId":"romeo","text":"By a name I know not how to tell thee who I am: My name, dear saint, is hateful to myself, Because it is an enemy to thee; Had I it written, I would tear the word."},{"characterId":"juliet","text":"My ears have not yet drunk a hundred words Of that tongue\'s utterance, yet I know the sound: Art thou not Romeo and a Montague?"},{"characterId":"romeo","text":"Neither, fair saint, if either thee dislike."},{"characterId":"juliet","text":"How camest thou hither, tell me, and wherefore? The orchard walls are high and hard to climb, And the place death, considering who thou art, If any of my kinsmen find thee here."},{"characterId":"romeo","text":"With love\'s light wings did I o\'er-perch these walls; For stony limits cannot hold love out, And what love can do that dares love attempt; Therefore thy kinsmen are no let to me."},{"characterId":"juliet","text":"If they do see thee, they will murder thee."},{"characterId":"romeo","text":"Alack, there lies more peril in thine eye Than twenty of their swords: look thou but sweet, And I am proof against their enmity."},{"characterId":"juliet","text":"I would not for the world they saw thee here."},{"characterId":"romeo","text":"I have night\'s cloak to hide me from their sight; And but thou love me, let them find me here: My life were better ended by their hate, Than death prorogued, wanting of thy love."},{"characterId":"juliet","text":"By whose direction found\'st thou out this place?"},{"characterId":"romeo","text":"By love, who first did prompt me to inquire; He lent me counsel and I lent him eyes. I am no pilot; yet, wert thou as far As that vast shore wash\'d with the farthest sea, I would adventure for such merchandise."},{"characterId":"juliet","text":"Thou know\'st the mask of night is on my face, Else would a maiden blush bepaint my cheek For that which thou hast heard me speak to-night Fain would I dwell on form, fain, fain deny What I have spoke: but farewell compliment! Dost thou love me? I know thou wilt say \'Ay,\' And I will take thy word: yet if thou swear\'st, Thou mayst prove false; at lovers\' perjuries Then say, Jove laughs. O gentle Romeo, If thou dost love, pronounce it faithfully: Or if thou think\'st I am too quickly won, I\'ll frown and be perverse an say thee nay, So thou wilt woo; but else, not for the world. In truth, fair Montague, I am too fond, And therefore thou mayst think my \'havior light: But trust me, gentleman, I\'ll prove more true Than those that have more cunning to be strange. I should have been more strange, I must confess, But that thou overheard\'st, ere I was ware, My true love\'s passion: therefore pardon me, And not impute this yielding to light love, Which the dark night hath so discovered."},{"characterId":"romeo","text":"Lady, by yonder blessed moon I swear That tips with silver all these fruit-tree tops--"},{"characterId":"juliet","text":"O, swear not by the moon, the inconstant moon, That monthly changes in her circled orb, Lest that thy love prove likewise variable."},{"characterId":"romeo","text":"What shall I swear by?"},{"characterId":"juliet","text":"Do not swear at all; Or, if thou wilt, swear by thy gracious self, Which is the god of my idolatry, And I\'ll believe thee."},{"characterId":"romeo","text":"If my heart\'s dear love--"},{"characterId":"juliet","text":"Well, do not swear: although I joy in thee, I have no joy of this contract to-night: It is too rash, too unadvised, too sudden; Too like the lightning, which doth cease to be Ere one can say \'It lightens.\' Sweet, good night! This bud of love, by summer\'s ripening breath, May prove a beauteous flower when next we meet. Good night, good night! as sweet repose and rest Come to thy heart as that within my breast!"},{"characterId":"romeo","text":"O, wilt thou leave me so unsatisfied?"},{"characterId":"juliet","text":"What satisfaction canst thou have to-night?"},{"characterId":"romeo","text":"The exchange of thy love\'s faithful vow for mine."},{"characterId":"juliet","text":"I gave thee mine before thou didst request it: And yet I would it were to give again."},{"characterId":"romeo","text":"Wouldst thou withdraw it? for what purpose, love?"},{"characterId":"juliet","text":"But to be frank, and give it thee again. And yet I wish but for the thing I have: My bounty is as boundless as the sea, My love as deep; the more I give to thee, The more I have, for both are infinite.  I hear some noise within; dear love, adieu! Anon, good nurse! Sweet Montague, be true. Stay but a little, I will come again."},{"characterId":"romeo","text":"O blessed, blessed night! I am afeard. Being in night, all this is but a dream, Too flattering-sweet to be substantial."},{"characterId":"juliet","text":"Three words, dear Romeo, and good night indeed. If that thy bent of love be honourable, Thy purpose marriage, send me word to-morrow, By one that I\'ll procure to come to thee, Where and what time thou wilt perform the rite; And all my fortunes at thy foot I\'ll lay And follow thee my lord throughout the world."},{"characterId":"nurse","text":"Madam!"},{"characterId":"juliet","text":"I come, anon.--But if thou mean\'st not well, I do beseech thee--"},{"characterId":"nurse","text":"Madam!"},{"characterId":"juliet","text":"By and by, I come:-- To cease thy suit, and leave me to my grief: To-morrow will I send."},{"characterId":"romeo","text":"So thrive my soul--"},{"characterId":"juliet","text":"A thousand times good night!"},{"characterId":"romeo","text":"A thousand times the worse, to want thy light. Love goes toward love, as schoolboys from their books, But love from love, toward school with heavy looks."},{"characterId":"juliet","text":"Hist! Romeo, hist! O, for a falconer\'s voice, To lure this tassel-gentle back again! Bondage is hoarse, and may not speak aloud; Else would I tear the cave where Echo lies, And make her airy tongue more hoarse than mine, With repetition of my Romeo\'s name."},{"characterId":"romeo","text":"It is my soul that calls upon my name: How silver-sweet sound lovers\' tongues by night, Like softest music to attending ears!"},{"characterId":"juliet","text":"Romeo!"},{"characterId":"romeo","text":"My dear?"},{"characterId":"juliet","text":"At what o\'clock to-morrow Shall I send to thee?"},{"characterId":"romeo","text":"At the hour of nine."},{"characterId":"juliet","text":"I will not fail: \'tis twenty years till then. I have forgot why I did call thee back."},{"characterId":"romeo","text":"Let me stand here till thou remember it."},{"characterId":"juliet","text":"I shall forget, to have thee still stand there, Remembering how I love thy company."},{"characterId":"romeo","text":"And I\'ll still stay, to have thee still forget, Forgetting any other home but this."},{"characterId":"juliet","text":"\'Tis almost morning; I would have thee gone: And yet no further than a wanton\'s bird; Who lets it hop a little from her hand, Like a poor prisoner in his twisted gyves, And with a silk thread plucks it back again, So loving-jealous of his liberty."},{"characterId":"romeo","text":"I would I were thy bird."},{"characterId":"juliet","text":"Sweet, so would I: Yet I should kill thee with much cherishing. Good night, good night! parting is such sweet sorrow, That I shall say good night till it be morrow."},{"characterId":"romeo","text":"Sleep dwell upon thine eyes, peace in thy breast! Would I were sleep and peace, so sweet to rest! Hence will I to my ghostly father\'s cell, His help to crave, and my dear hap to tell."}]}]}}');

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["pages/_app","main"], function() { return __webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Fadriengaudon%2FDocuments%2FDEV%2Fmemorizing-buddy-nextjs%2Fpages%2Findex.tsx&page=%2F!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);